<!DOCTYPE html>
<html lang="en" class="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TechTonic Times | Nuclear Science Environmental Protection</title>
<meta name="description" content="Discover how nuclear science and technology are providing innovative solutions to protect the environment. From wastewater treatment to glacier monitoring, learn about six groundbreaking applications.">

<!-- === OPEN GRAPH / FACEBOOK / LINKEDIN / WHATSAPP === -->
<meta property="og:type" content="article">
<meta property="og:url" content="https://techtonic-times.github.io/science/test04.html">
<meta property="og:title" content="Six Ways Nuclear Science and Technology Are Protecting Our Planet">
<meta property="og:description" content="Discover how nuclear science and technology are providing innovative solutions to protect the environment. From wastewater treatment to glacier monitoring, learn about six groundbreaking applications.">
<!-- OPTIMIZED IMAGE: Your 1:1 square image -->
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhBncyzPzv-nUp-Yu229IYbloo55ANeO2wYFS50ZCvokQTFiqnoOrzMf4z-dPKcAyGErH1fXOooj2-EoTQ2-5Og0jNFuYIKQ5ShjTbgHggTEv0eTTLNFrsJXPUKwYVe4-QpRBS4IfpWze5HHkEBApbTl_woy4E8PHkp3QdnRHM-8BaINig/s1600/pexels-vedih-akbas-99816515-12543917.jpg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="1200">
<meta property="og:site_name" content="TechTonic Times">
<meta property="og:locale" content="en_US">

<!-- === TWITTER CARD === -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:url" content="https://techtonic-times.github.io/science/test04.html">
<meta name="twitter:title" content="Six Ways Nuclear Science and Technology Are Protecting Our Planet">
<meta name="twitter:description" content="Discover how nuclear science and technology are providing innovative solutions to protect the environment. From wastewater treatment to glacier monitoring, learn about six groundbreaking applications.">
<!-- Same optimized image for Twitter -->
<meta name="twitter:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhBncyzPzv-nUp-Yu229IYbloo55ANeO2wYFS50ZCvokQTFiqnoOrzMf4z-dPKcAyGErH1fXOooj2-EoTQ2-5Og0jNFuYIKQ5ShjTbgHggTEv0eTTLNFrsJXPUKwYVe4-QpRBS4IfpWze5HHkEBApbTl_woy4E8PHkp3QdnRHM-8BaINig/s1600/pexels-vedih-akbas-99816515-12543917.jpg">
<meta name="twitter:creator" content="@TechTonicTimes">

<meta name="color-scheme" content="light dark">
<link rel="icon" type="image/png" sizes="64x64" href="https://techtonic-times.github.io/home/favicon-64.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://techtonic-times.github.io/home/favicon-180.png">
<link rel="icon" type="image/png" sizes="192x192" href="https://techtonic-times.github.io/home/favicon-192.png">
<link rel="icon" type="image/png" sizes="512x512" href="https://techtonic-times.github.io/home/favicon-512.png">
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
/* === CORE VARIABLES & DARK MODE === */
:root {
    --primary: #0E7B7F;  /* darker teal */
    --primary-light: rgba(14, 123, 127, 0.1);
    --primary-dark: #096669; /* darker teal */
    --bg-primary: #f9fafb;
    --bg-secondary: #ffffff;
    --text-primary: #111827;
    --text-secondary: #6b7280;
    --border-color: #0E7B7F;
    --card-bg: #ffffff;
    --header-bg: #ffffff;
    --footer-bg: #111827;
    --news-bar-bg: #ff0000;
    --teal-color: #0E7B7F;  /* darker teal */
    --teal-dark: #096669;   /* darker teal */
    --teal-light: #0E8E92;  /* darker teal */
    --light-card: rgba(255,255,255,0.98);
    --dark-card: #0a0e1a;
    --border-radius: 12px;
    --box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    --teal-bright: #12ABB0; /* new bright teal for dark mode accents */
}
.dark {
    --primary: #12ABB0; /* updated to bright teal */
    --primary-light: rgba(18, 171, 176, 0.15);
    --primary-dark: #0d8a8e;
    --bg-primary: #0a0f1d;
    --bg-secondary: #1e293b;
    --text-primary: #f1f5f9;
    --text-secondary: #94a3b8;
    --border-color: #07f2f2;
    --card-bg: #0f1522;
    --header-bg: #0f1522;
    --footer-bg: #0a0e1a;
    --news-bar-bg: #ff0000;
    --dark-card: #0a0e1a;
    --teal-bright: #12ABB0;
}
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Inter', sans-serif;
}
body {
    background: linear-gradient(135deg, var(--teal-color), var(--teal-dark), var(--teal-light)) !important;
    color: #1f2937 !important;
    line-height: 1.6;
    padding: 0;
    min-height: 100vh;
    margin-top: -0.7rem;
    transition: background 0.3s ease, color 0.3s ease;
}
body.dark-mode {
    background: linear-gradient(135deg, #030812, #071127, #0a1525) !important;
    color: #e6eef8 !important;
}
.mono-font {
    font-family: 'JetBrains Mono', monospace;
}
/* === BREADCRUMB - EXACT TOOLIVO STYLE, 5px from top === */
.breadcrumb {
    padding: 0.3rem 0.6rem;
    background: rgba(255, 255, 255, 0.08);
    border-radius: 0 0 8px 8px;
    margin-bottom: 0.5rem;
    margin-top: 5px;
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
}
body.dark-mode .breadcrumb {
    background: rgba(255, 255, 255, 0.04);
}
.breadcrumb ul {
    display: flex;
    flex-wrap: wrap;
    gap: 0.1rem;
    margin: 0;
    padding: 0;
    list-style: none;
    font-size: 0.5rem;
    align-items: center;
}
@media (min-width: 768px) {
    .breadcrumb ul {
        font-size: 0.7rem;
    }
}
.breadcrumb li {
    display: flex;
    align-items: center;
}
.breadcrumb li:not(:last-child)::after {
    content: "/";
    margin: 0 0.1rem;
    color: rgba(255, 255, 255, 0.5);
    font-weight: 600;
}
.breadcrumb a {
    color: rgba(255, 255, 255, 0.85);
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 0.3rem;
}
.breadcrumb a:hover {
    color: white;
}
body.dark-mode .breadcrumb a {
    color: rgba(230, 238, 248, 0.85);
}
body.dark-mode .breadcrumb a:hover {
    color: #e6eef8;
}
.breadcrumb li[aria-current="page"] {
    color: #e6eef8;
    font-weight: 600;
}
body.dark-mode .breadcrumb li[aria-current="page"] {
    color: #cbd5e1;
}
.breadcrumb i {
    font-size: 0.9em;
}
/* === HEADER WITH LOGO - BIGGER, 2-ROW STYLE === */
header {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 0.5rem;
    padding: 0.8rem 0 0.4rem 0;
}
.logo-container {
    display: flex;
    justify-content: center;
    flex-direction: column;
    align-items: center;
}
.logo {
    max-width: 320px;
    height: auto;
}
@media (max-width: 640px) {
    .logo {
        max-width: 260px;
    }
}
.logo-tagline {
    color: rgba(255,255,255,0.9);
    font-size: 0.85rem;
    letter-spacing: 2px;
    margin-top: 6px;
    font-weight: 400;
    text-transform: uppercase;
    border-top: 1px solid rgba(255,255,255,0.2);
    padding-top: 6px;
}
.dark-mode .logo-tagline {
    color: #12ABB0 !important;  /* bright teal in dark mode */
    border-top-color: rgba(18, 171, 176, 0.3);
}
/* === GLOWING TEAL SHADOW ANIMATION FOR LOGO IN DARK MODE - RUNNING === */
@keyframes tealGlow {
    0% { filter: drop-shadow(0 0 2px rgba(18, 171, 176, 0.5)); }
    50% { filter: drop-shadow(0 0 12px rgba(18, 171, 176, 0.9)) drop-shadow(0 0 6px rgba(18, 171, 176, 0.6)); }
    100% { filter: drop-shadow(0 0 2px rgba(18, 171, 176, 0.5)); }
}
.dark-mode .logo {
    animation: tealGlow 3s ease-in-out infinite;
}
/* === ARTICLE TAG (BADGE) - EXACT TOOLIVO STYLE WITH CLICKABLE SVG === */
.article-tag {
    text-align: center;
    margin: 2rem auto 0.8rem auto;
    max-width: 900px;
}
.article-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    background: rgba(255, 255, 255, 0.25);
    color: white;
    padding: 0.3rem 0.8rem;
    border-radius: 50px;
    font-size: 0.8rem;
    font-weight: 600;
    backdrop-filter: blur(5px);
    text-decoration: none;
    cursor: pointer;
    transition: all 0.3s ease;
}
.article-badge:hover {
    background: rgba(255,255,255,0.4) !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255,255,255,0.2);
}
.article-badge svg {
    transition: transform 0.3s ease;
}
.article-badge:hover svg {
    transform: rotate(5deg);
}
body.dark-mode .article-badge {
    background: rgba(255, 255, 255, 0.1);
    color: #e6eef8;
}
/* === ARTICLE MAIN TITLE (H1) - EXACT TOOLIVO STYLE === */
.article-main-title {
    text-align: center;
    margin: 0.5rem auto 1rem auto;
    max-width: 900px;
    padding: 0 1.5rem;
}
.article-main-title h1 {
    font-size: 2.8rem;
    margin-bottom: 0.5rem;
    color: white;
    line-height: 1.3;
    font-weight: 700;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}
body.dark-mode .article-main-title h1 {
    color: #e6eef8;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.4);
}
@media (max-width: 768px) {
    .article-main-title h1 {
        font-size: 2rem;
    }
}
@media (max-width: 480px) {
    .article-main-title h1 {
        font-size: 1.8rem;
    }
    .article-main-title {
        padding: 0 0.8rem;
    }
}
/* === ARTICLE SECTION CARD - EXACT TOOLIVO STYLE === */
.article-section {
    background: var(--light-card);
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    padding: 0.5rem;
    margin-bottom: 3rem;
    overflow: hidden;
    max-width: 1000px;
    margin-left: auto;
    margin-right: auto;
    margin-top: 0.5rem;
}

body.dark-mode .article-section {
    background: var(--dark-card);
}
.article-header {
    text-align: center;
    margin-bottom: 1.5rem;
}
/* === ARTICLE META - UPDATED: Date left, Author right, smaller === */
.article-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1.5rem;
    margin-bottom: 1rem;
}
.article-date {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.75rem;  /* smaller */
    color: #4b5563;
    font-weight: 500;
    background: rgba(14, 123, 127, 0.08);  /* darker teal, lighter bg */
    padding: 0.25rem 0.6rem;  /* smaller padding */
    border-radius: 4px;  /* smaller radius */
}
.article-author {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.75rem;  /* smaller */
    color: #4b5563;
    font-weight: 500;
    background: rgba(14, 123, 127, 0.08);  /* darker teal, lighter bg */
    padding: 0.25rem 0.6rem;  /* smaller padding */
    border-radius: 4px;  /* smaller radius */
}
body.dark-mode .article-date,
body.dark-mode .article-author {
    color: #cbd5e1;
    background: rgba(18, 171, 176, 0.15); /* bright teal tint in dark */
}
.meta-icon {
    font-size: 0.75rem;  /* smaller */
    color: var(--teal-color);
}
body.dark-mode .meta-icon {
    color: #12ABB0; /* bright teal */
}
.article-single-content {
    display: block;
    width: 100%;
}
@media (min-width: 768px) {
    .article-single-content {
        max-width: 980px;
        margin: 0 auto;
    }
}
.article-single-content p {
    margin-bottom: 1rem;
    font-size: 1.05rem;
    line-height: 1.6;
    color: var(--text-primary);
}
body.dark-mode .article-single-content p {
    color: #e6eef8;  /* fixed: now white in dark mode */
}
body.dark-mode .article-single-content h2,
body.dark-mode .article-single-content h3,
body.dark-mode .article-single-content h4,
body.dark-mode .article-single-content li,
body.dark-mode .article-single-content div:not(.keypoints-container) {
    color: #e6eef8;
}
@media (max-width: 768px) {
    .article-meta {
        gap: 1rem;
    }
    .article-section {
        padding: 0.8rem;
    }
}
/* === PRESERVE ORIGINAL ARTICLE CONTENT STYLES - WITH DARK MODE FIX === */
.article-content {
    font-size: 1rem;
    line-height: 1.6;
    color: var(--text-primary);
}

/* === TEAL BACKGROUND FOR ALL H2s - SLIGHT ROUNDED CORNERS WITH 0.6rem PADDING GAP === */
.article-content h2,
.article-single-content h2 {
background: linear-gradient(135deg, var(--primary), var(--primary-dark));
color: white !important;
padding: 0.85rem 1rem;
border-radius: 15px;
font-size: 1.6rem;
font-weight: 700;
line-height: 1.3;
margin-top: 2.2rem;
margin-bottom: 1.2rem;
box-shadow: 0 4px 15px rgba(14, 123, 127, 0.2);
display: block;
word-break: break-word;
transition: all 0.2s ease;
}

/* Dark mode optimization */
.dark-mode .article-content h2,
.dark-mode .article-single-content h2 {
    background: linear-gradient(135deg, #12ABB0, #0d8a8e);
    box-shadow: 0 4px 15px rgba(18, 171, 176, 0.3);
}

/* Tablet optimization */
@media (max-width: 768px) {
.article-content h2,
.article-single-content h2 {
font-size: 1.5rem;
padding: 0.75rem 1rem;
border-radius: 15px;
margin-top: 2rem;
margin-bottom: 1rem;
}
}

/* Mobile optimization */
@media (max-width: 480px) {
.article-content h2,
.article-single-content h2 {
font-size: 1.4rem;
padding: 0.65rem 0.6rem;
border-radius: 15px;
margin-top: 1.8rem;
margin-bottom: 0.9rem;
line-height: 1.4;
}
}

/* Small mobile devices */
@media (max-width: 360px) {
.article-content h2,
.article-single-content h2 {
font-size: 1.3rem;
padding: 0.6rem 0.8rem;
border-radius: 15px;
}
}

.article-content h3 {
    font-size: 1.2rem;
    font-weight: 600;
    margin-top: 1.5rem;
    margin-bottom: 1rem;
    color: var(--text-primary);
}
body.dark-mode .article-content h3 {
    color: #e6eef8;
}
.article-content p {
    margin-bottom: 1.5rem;
    color: var(--text-primary);
}
body.dark-mode .article-content p {
    color: #e6eef8;
}
.article-content ul, .article-content ol {
    margin-bottom: 1.5rem;
    padding-left: 1.5rem;
}
.article-content li {
    margin-bottom: 0.7rem;
    color: var(--text-primary);
}
body.dark-mode .article-content li {
    color: #e6eef8;
}
.article-content blockquote {
    border-left: 4px solid var(--primary);
    padding-left: 0.5rem;
    margin: 2rem 0;
    font-style: italic;
    color: var(--text-secondary);
    background: var(--primary-light);
    padding: 1.5rem;
    border-radius: 0.5rem;
}
.article-content a {
    color: var(--primary);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: all 0.2s ease;
}
.article-content a:hover {
    border-bottom-color: var(--primary);
}
.highlight-box {
    background: var(--primary-light);
    border: 1px solid var(--border-color);
    border-radius: 0.75rem;
    padding: 0.8rem;
    margin: 2rem 0;
}

.highlight-box h4 {
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 0.8rem;
    color: var(--primary);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}
body.dark-mode .highlight-box h4 {
    color: #12ABB0; /* bright teal */
}
.highlight-box h4 svg {
    width: 20px;
    height: 20px;
}
.highlight-box p {
    color: var(--text-primary);
}
body.dark-mode .highlight-box p {
    color: #e6eef8;
}
/* === FIXED CARD DARK MODE BG === */
.tech-application-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
    margin: 2.5rem 0;
}
@media (min-width: 768px) {
    .tech-application-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}
.tech-card {
    background: var(--bg-secondary);
    border-radius: 0.75rem;
    padding: 1.5rem;
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
}
body.dark-mode .tech-card {
    background: #1a1f2e !important; /* fixed dark mode background for cards */
    border-color: #2d3748;
}
.tech-card:hover {
    border-color: var(--primary);
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
}
.tech-card h4 {
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 0.8rem;
    color: var(--primary);
}
body.dark-mode .tech-card h4 {
    color: #12ABB0; /* bright teal */
}
.tech-card p {
    font-size: 0.95rem;
    color: var(--text-secondary);
    margin-bottom: 1rem;
}
body.dark-mode .tech-card p {
    color: #cbd5e1;
}
.tech-tag {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    background: transparent;
    color: var(--primary);
    border: 1px solid var(--primary);
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 600;
    line-height: 1.2;
}
body.dark-mode .tech-tag {
    color: #12ABB0;
    border-color: #12ABB0;
}
/* === IMAGE + KEY INSIGHTS - DESKTOP SIDEBYSIDE, MOBILE STACKED === */
.square-image {
    width: 100%;
    height: auto;
    aspect-ratio: 1/1;
    border-radius: 15px;
    object-fit: cover;
    border: 1px solid rgba(14, 123, 127, 0.1);
}
.image-container {
    margin: 2rem 0;
}
/* === SLIGHT SHADOW AFTER IMAGE - FIXED === */
.square-image {
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2); /* ← Now BLACK/NEUTRAL */
transition: box-shadow 0.3s ease;
}
@media (max-width: 1023px) {
    .image-container {
        max-width: 100%;
        margin: 1.5rem 0;
        padding: 0 0.05rem;
    }
    .image-keypoints-container {
        display: block;
        margin: 1.5rem 0;
    }
    .keypoints-container {
        display: none;
    }
}
@media (min-width: 1024px) {
    .image-keypoints-container {
        display: flex;
        flex-direction: row;
        gap: 1.75rem;
        margin: 2.5rem 0;
        align-items: stretch;
    }
    .image-container, .keypoints-container {
        flex: 1;
        width: 50%;
    }
    .image-container {
        margin: 0;
    }
    .keypoints-container {
        background-color: #f8fcfd;
        border-radius: 15px;
        padding: 1.25rem;
        border-left: 3px solid var(--primary);
        box-shadow: 0 3px 10px rgba(14, 123, 127, 0.07);
        display: flex;
        flex-direction: column;
    }
    .dark-mode .keypoints-container {
  background-color: #1a1f2e;
  border-left-color: #12ABB0; /* bright teal */
  box-shadow: 0 3px 10px rgba(0,0,0,0.3);
}
    .keypoints-title {
        color: #0d3c3e;
        font-size: 1.4rem;
        font-weight: 700;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid rgba(14, 123, 127, 0.15);
        position: relative;
        display: inline-block;
    }
    .dark .keypoints-title {
        color: #f1f5f9;
    }
    .keypoints-title::after {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 100%;
        height: 2px;
        background: var(--primary);
        border-radius: 1px;
    }
    .keypoints-list {
        list-style-type: none;
        flex-grow: 1;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }
    .keypoint-item {
        margin-bottom: 1.2rem;
        padding-left: 2.25rem;
        position: relative;
        transition: transform 0.2s ease;
    }
    .keypoint-item:hover {
        transform: translateX(3px);
    }
    .keypoint-item:last-child {
        margin-bottom: 0;
        padding-bottom: 0.5rem;
    }
    .keypoint-item::before {
        content: "✓";
        position: absolute;
        left: 0;
        top: 0.15rem;
        width: 1.6rem;
        height: 1.6rem;
        background-color: var(--primary);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.1rem;
        font-weight: bold;
        flex-shrink: 0;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .keypoint-title {
        color: #0a2e2f;
        font-weight: 700;
        margin-bottom: 0.35rem;
        font-size: 1.1rem;
        line-height: 1.3;
    }
    .dark .keypoint-title {
        color: #e2e8f0;
    }
    .keypoint-description {
        color: #4a6a6c;
        font-size: 0.95rem;
        line-height: 1.5;
        opacity: 0.95;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    .dark .keypoint-description {
        color: #b9c7d9;
    }
}
/* === MENU TOGGLE BUTTON - ICON ALWAYS WHITE, SCROLL BEHAVIOR === */
.menu-toggle {
    position: absolute;
    top: 42px;
    left: 15px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    width: 40px;
    height: 40px;
    border-radius: 12px;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 5px;
    transition: top 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s, visibility 0.3s, transform 0.3s, background 0.3s;
    z-index: 1001;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(10px);
    padding: 0;
    opacity: 1;
    visibility: visible;
    transform: scale(1);
}
.menu-toggle.scrolled {
    top: 20px !important;
}
.menu-toggle span {
    display: block;
    height: 3px;
    width: 22px;
    border-radius: 2px;
    background: white !important;  /* ALWAYS WHITE */
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: center;
}
.dark-mode .menu-toggle span {
    background: white !important;  /* ALWAYS WHITE */
}
/* === THEME TOGGLE BUTTON - SCROLL BEHAVIOR === */
.theme-toggle {
    position: fixed;
    top: 42px;
    right: 15px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    width: 40px;
    height: 40px;
    border-radius: 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: top 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s, visibility 0.3s, transform 0.3s, background 0.3s;
    z-index: 1001;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    opacity: 1;
    visibility: visible;
    transform: scale(1);
    backdrop-filter: blur(10px);
}
.theme-toggle.scrolled {
    top: 20px !important;
}
.dark-mode .theme-toggle {
    background: rgba(30, 41, 59, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.1);
}
.theme-toggle:hover {
    transform: scale(1.05);
    background: rgba(255, 255, 255, 0.15);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}
.dark-mode .theme-toggle:hover {
    background: rgba(30, 41, 59, 0.9);
}
.theme-icon {
    position: absolute;
    width: 22px;
    height: 22px;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    stroke: currentColor;
}
.sun-icon {
    opacity: 1;
    transform: rotate(0deg);
    color: #f59e0b;
}
.moon-icon {
    opacity: 0;
    transform: rotate(-90deg);
    color: #e2e8f0;
}
.dark-mode .sun-icon {
    opacity: 0;
    transform: rotate(90deg);
}
.dark-mode .moon-icon {
    opacity: 1;
    transform: rotate(0deg);
}
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}
/* === MENU CARD - WITH TEAL LINE, DARK MODE FIXED === */
.menu-card {
    position: fixed;
    top: 20px;
    left: 10px;
    width: 280px;
    background: white;
    border-radius: 16px;
    box-shadow: 0 12px 32px rgba(0,0,0,0.2);
    transform: translateX(-105%) scale(0.95);
    transition: transform 0.4s cubic-bezier(0.22, 0.61, 0.36, 1);
    z-index: 1000;
    padding: 1.5rem;
    max-height: 70vh;
    overflow-y: auto;
    border: 1px solid #f0f0f0;
    opacity: 0;
    visibility: hidden;
}
.dark-mode .menu-card {
    background: #0f1522 !important; /* dark menu card background */
    border: 1px solid #1d2c40;
    color: #e6eef8;
}
.menu-card.open {
    transform: translateX(0) scale(1);
    opacity: 1;
    visibility: visible;
}
.menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #0E7B7F;
}
.dark-mode .menu-header {
border-bottom-color: #12ABB0; /* bright teal in dark mode */
}
.menu-header h3 {
    font-size: 1.2rem;
    font-weight: 600;
    color: #111;
}
.dark-mode .menu-header h3 {
    color: #e6eef8 !important;
}
/* === TEAL COLOR LINE IN MENU (border-left) - DARK MODE FIX === */
.menu-link {
    border-left: 3px solid transparent;
    transition: border-left 0.2s ease, background 0.2s;
}
.menu-link:hover {
    border-left: 3px solid var(--primary) !important;
    background: rgba(14, 123, 127, 0.05);
}
.dark-mode .menu-link:hover {
    border-left: 3px solid #12ABB0 !important;
    background: rgba(18, 171, 176, 0.15);
}
.dropdown-item {
    border-left: 2px solid transparent;
}
.dropdown-item:hover {
    border-left: 2px solid var(--primary) !important;
}
.dark-mode .dropdown-item:hover {
    border-left: 2px solid #12ABB0 !important;
}
.menu-close {
    background: transparent;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    transition: background 0.2s;
}
.menu-close:hover {
    background: rgba(0,0,0,0.05);
}
.dark-mode .menu-close:hover {
    background: rgba(255,255,255,0.05);
}
.menu-close svg {
    width: 20px;
    height: 20px;
    stroke: #111;
    stroke-width: 2;
    fill: none;
}
.dark-mode .menu-close svg {
    stroke: #e6eef8 !important; /* white in dark mode */
}
.menu-list {
    list-style: none;
    padding: 0;
}
.menu-item {
    margin-bottom: 0.01rem;
    position: relative;
}
.menu-link {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 0.75rem 1rem 0.75rem 0.5rem;
    color: #111;
    text-decoration: none;
    font-weight: 500;
    font-size: 0.75rem;
    border-radius: 8px;
    transition: all 0.3s ease;
    width: 100%;
    text-align: left;
    background: none;
    border: none;
    cursor: pointer;
    position: relative;
}
.dark-mode .menu-link {
    color: #e6eef8 !important; /* white text in dark mode */
}
.dark-mode .menu-link:hover {
    color: #12ABB0; /* bright teal on hover */
}
.menu-link:hover {
    background: rgba(14, 123, 127, 0.1);
    transform: translateX(4px);
    color: var(--primary);
}
.menu-icon {
    width: 20px;
    height: 20px;
    opacity: 0.7;
    stroke: currentColor;
    stroke-width: 1.8;
    fill: none;
    flex-shrink: 0;
}
.dark-mode .menu-icon {
    stroke: white; /* teal icons in dark mode */
}
.dropdown-parent {
    position: relative;
}
.dropdown-toggle {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-right: 0.75rem !important;
}
.dropdown-arrow {
    width: 14px;
    height: 14px;
    stroke: currentColor;
    stroke-width: 2.5;
    fill: none;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    flex-shrink: 0;
    margin-left: auto;
}
.dropdown-parent.active .dropdown-arrow {
    transform: rotate(90deg);
}
.dropdown-menu {
    list-style: none;
    padding-left: 0;
    margin-top: 0.25rem;
    margin-left: 32px;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s cubic-bezier(0.22, 0.61, 0.36, 1);
}
.dropdown-parent.active .dropdown-menu {
    max-height: 300px;
}
.dropdown-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.6rem 0.5rem 0.6rem 0;
    color: #555;
    text-decoration: none;
    font-weight: 500;
    font-size: 0.65rem;
    border-radius: 6px;
    transition: all 0.3s ease;
    margin-bottom: 0.01rem;
    position: relative;
    min-height: 36px;
}
.dark-mode .dropdown-item {
    color: #cbd5e1 !important; /* lighter gray in dark mode */
}
.dark-mode .dropdown-item:hover {
    color: #12ABB0; /* bright teal on hover */
    background: rgba(18, 171, 176, 0.08);
}
.subcategory-arrow {
    width: 12px;
    height: 12px;
    stroke: currentColor;
    stroke-width: 2;
    fill: none;
    opacity: 0.6;
    margin-left: 8px;
    flex-shrink: 0;
}
.dark-mode .subcategory-arrow {
    stroke: #12ABB0;
}
.subcategory-name {
    flex-grow: 1;
    text-align: right;
    margin-right: 8px;
    padding-right: 4px;
}
.backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0,0,0,0.4);
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
    z-index: 999;
}
.dark-mode .backdrop {
    background: rgba(0, 0, 0, 0.6) !important;
}
.backdrop.visible {
    opacity: 1;
    visibility: visible;
}
/* === BACK TO TOP BUTTON - ORIGINAL === */
.back-to-top {
    position: fixed;
    bottom: 30px;
    right: 15px;
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    opacity: 0;
    transform: translateY(20px) scale(0.8);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 100;
    box-shadow: 0 8px 25px rgba(14, 123, 127, 0.4);
    border: 2px solid rgba(255, 255, 255, 0.2);
}
.back-to-top:hover {
    transform: translateY(-5px) scale(1.1);
    box-shadow: 0 15px 35px rgba(14, 123, 127, 0.6);
}
.dark .back-to-top {
    background: #12ABB0;
}
.back-to-top.visible {
    opacity: 1;
    transform: translateY(0) scale(1);
}
/* ===== NEWSLETTER MODAL - DARK MODE FIX ===== */
.newsletter-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.65);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2001;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    backdrop-filter: blur(5px);
    
}

.dark-mode .newsletter-modal {
    background: rgba(10, 14, 26, 0.85);
    
}

.newsletter-modal.active {
    opacity: 1;
    visibility: visible;
}

.newsletter-modal-content {
    background: var(--bg-secondary);
    border-radius: 1rem;
    padding: 2rem;
    width: 90%;
    max-width: 400px;
    transform: translateY(20px);
    transition: transform 0.3s ease;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    border: 1px solid #0E7B7F;
    text-align: center;
    color: var(--text-primary);
}

.dark-mode .newsletter-modal-content {
    background: var(--dark-card);
    border: 1px solid #12ABB0;
}

.newsletter-modal.active .newsletter-modal-content {
    transform: translateY(0);
}

.newsletter-modal-icon {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    color: var(--text-primary);
}

.newsletter-modal-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 1rem;
}

/* CRITICAL FIX: Ensure title is white in dark mode */
.dark-mode .newsletter-modal-title {
    color: #ffffff !important;
}

/* TWO ADDITIONAL LINES FOR MORE WHITE TEXT IN DARK MODE */
.dark-mode .newsletter-modal-message {
    color: #ffffff !important;
}

.dark-mode .newsletter-modal-icon {
    color: #ffffff !important;
}

.newsletter-modal-message {
    color: var(--text-secondary);
    margin-bottom: 1.5rem;
    line-height: 1.6;
}

.newsletter-modal-close {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: 0.75rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.dark-mode .newsletter-modal-close {
    background: linear-gradient(135deg, #12ABB0, #0d8a8e);
}

.newsletter-modal-close:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(14, 123, 127, 0.3);
}

/* === FOOTER STYLES - NO BORDERS, FULL WIDTH === */
.footer-card {
    background: #0a0e1a !important;
    border-bottom: none !important;  /* REMOVED BORDERS */
    padding: 1.1rem 1rem !important;
    border-right: none !important;   /* REMOVED BORDERS */
}
.footer-card:last-child {
    border-bottom: none !important;
}
.footer-container {
    background: #0a0e1a !important;
    margin-top: 2rem;
    padding: 0 !important;
    width: 100%;
    max-width: 100% !important;  /* FULL WIDTH */
    margin-left: 0 !important;
    margin-right: 0 !important;
}
@media (min-width: 768px) {
    .footer-top-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0;
    }
    .footer-top-row > .footer-card:first-child {
        border-right: none !important;  /* REMOVED BORDER */
    }
    .quick-links-card {
        grid-column: span 2;
    }
}
@media (max-width: 767px) {
    .footer-top-row {
        display: block;
    }
    .footer-card {
        padding: 1.5rem 0 !important;
        width: 100% !important;
    }
    .footer-container {
        padding-left: 0 !important;
        padding-right: 0 !important;
    }
}
.social-icon {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}
.social-icon:hover {
    transform: translateY(-3px);
}
.facebook-bg { background: #1877F2; }
.twitter-bg { background: #000000; }
.instagram-bg { background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D); }
.linkedin-bg { background: #0A66C2; }
.youtube-bg { background: #FF0000; }
.newsletter-input {
    transition: all 0.3s ease;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
}
.newsletter-input:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 2px rgba(14, 123, 127, 0.2);
    background: rgba(255, 255, 255, 0.08);
}
.newsletter-btn {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    transition: all 0.3s ease;
}
.newsletter-btn:hover {
    background: linear-gradient(135deg, var(--primary-dark), var(--primary));
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(14, 123, 127, 0.4);
}
.feature-badge {
    background: linear-gradient(135deg, rgba(14, 123, 127, 0.15), rgba(14, 123, 127, 0.05));
    border: 1px solid rgba(14, 123, 127, 0.3);
}
.quick-links-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
}
@media (max-width: 768px) {
    .quick-links-grid a span.text-gray-300,
    .quick-links-grid a span.text-gray-400 {
        font-size: 0.75rem;
    }
    .quick-links-grid svg.w-3.h-3 {
        width: 1rem;
        height: 1rem;
    }
}
.gradient-text {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}
img {
    pointer-events: none !important;
    -webkit-user-select: none !important;
    user-select: none !important;
}
/* === 6 HASHTAGS - ROUNDED BG, LIKE AUTHOR BUT MORE ROUNDED === */
.hashtag-list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.6rem;
    margin: 1.8rem 0 1.2rem 0;
    align-items: center;
}
.hashtag-item {
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    background: rgba(14, 123, 127, 0.08);
    color: #0E7B7F;
    padding: 0.3rem 1rem;
    border-radius: 40px; /* more rounded */
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.5px;
    border: 1px solid rgba(14, 123, 127, 0.15);
}
.dark-mode .hashtag-item {
    background: rgba(18, 171, 176, 0.1);
    color: #12ABB0;
    border-color: rgba(18, 171, 176, 0.2);
}
.hashtag-item i {
    font-size: 0.65rem;
    opacity: 0.9;
}

/* === SCROLL INDICATOR - AT TOP EDGE (HORIZONTAL) === */
.scroll-indicator {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 5px;
    background: rgba(14, 123, 127, 0.15);
    z-index: 9999;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    opacity: 0;  /* Start hidden */
    transition: opacity 1s ease;  /* Smooth fade transition */
    pointer-events: none;  /* So it doesn't block clicks when invisible */
}

.scroll-indicator.visible {
    opacity: 1;
}

.scroll-progress {
    width: 0%;
    height: 100%;
    background: linear-gradient(90deg, var(--teal-color), var(--teal-dark));
    transition: width 0.1s ease;
    box-shadow: 0 0 15px rgba(14, 123, 127, 0.5);
    border-radius: 0 2px 2px 0;
}

.dark-mode .scroll-indicator {
    background: rgba(18, 171, 176, 0.2);
}

.dark-mode .scroll-progress {
    background: linear-gradient(90deg, #12ABB0, #0d8a8e);
    box-shadow: 0 0 20px #12ABB0;
}

/* Mobile optimization for scroll indicator */
@media (max-width: 768px) {
    .scroll-indicator {
        height: 4px;
    }
}

/* ===== TOOLBAR STYLES ===== */
.toolbar-container {
    max-width: 1000px;
    margin: 0.8rem auto 1rem auto;
    padding: 0;
    width: 100%;
}

.toolbar-collapsed {
    background: #0E7B7F;
    border-radius: 15px;
    padding: 0.2rem 0.5rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    border: 1px solid rgba(255,255,255,0.25);
    min-height: 48px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
.dark-mode .toolbar-collapsed { background: #12ABB0; }

.toolbar-expanded {
    background: #0E7B7F;
    border-radius: 15px;
    padding: 0.5rem 1rem;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    border: 1px solid rgba(255,255,255,0.25);
    min-height: 56px;
    animation: expandToolbar 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: center;
}
.dark-mode .toolbar-expanded { background: #12ABB0; }

@keyframes expandToolbar {
    0% { opacity: 0; transform: scale(0.95) translateY(-10px); }
    100% { opacity: 1; transform: scale(1) translateY(0); }
}

.toolbar-collapsed .toolbar-icons { animation: fadeInIcons 0.3s ease-out; }
@keyframes fadeInIcons {
    0% { opacity: 0; transform: translateY(-5px); }
    100% { opacity: 1; transform: translateY(0); }
}

/* Toolbar share panel - whitish background for all icons */
.toolbar-expanded .social-icon {
  background: rgba(255, 255, 255, 0.2) !important;
  border: 1px solid rgba(255, 255, 255, 0.4) !important;
  color: white !important;
}

/* Keep the copy button consistent */
.toolbar-expanded .copy-btn {
  background: rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.4);
  color: white;
}

.hidden-icon { 
    opacity: 0; transform: scale(0.8); transition: all 0.2s ease;
    pointer-events: none; display: none !important;
}

.toolbar-icons {
    display: flex; align-items: center; justify-content: space-evenly;
    gap: 0.8rem; width: 100%; padding: 0 0.2rem;
}
@media (max-width: 480px) { .toolbar-icons { gap: 0.3rem; } }

.toolbar-icon {
    background: transparent; border: none; color: white; font-size: 1.3rem;
    padding: 0; border-radius: 50%; cursor: pointer; display: flex;
    align-items: center; justify-content: center; transition: all 0.2s;
    width: 40px; height: 40px;
}
@media (max-width: 480px) { .toolbar-icon { width: 36px; height: 36px; font-size: 1.2rem; } }
.toolbar-icon:hover { background: rgba(255,255,255,0.2); transform: scale(1.05) rotate(5deg); }

.settings-panel {
    display: flex; align-items: center; gap: 1.2rem; color: white;
    font-weight: 500; flex-wrap: wrap; font-size: 0.85rem;
    animation: slideInSettings 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    width: 100%;
}
@keyframes slideInSettings {
    0% { opacity: 0; transform: translateX(-20px); }
    100% { opacity: 1; transform: translateX(0); }
}
.settings-item { display: flex; align-items: center; gap: 0.5rem; }

/* reaction grid with moving animation on hover */
.reaction-grid { display: flex; align-items: center; gap: 0.8rem; }
.reaction-icon {
    background: rgba(255,255,255,0.2); border: none; width: 40px; height: 40px;
    border-radius: 5px; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex; align-items: center; justify-content: center; color: white;
    padding: 0; animation: bounceIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}
.reaction-icon i { font-size: 16px !important; line-height: 1; display: block; }
.reaction-icon:hover {
    transform: translateY(-3px) scale(1.15) rotate(2deg);
    background: rgba(255,255,255,0.35);
    animation: wiggle 0.3s ease-in-out;
}
.reaction-icon:hover i { animation: pulse 0.3s ease-in-out; }

@keyframes pulse {
    0% { transform: scale(1); } 50% { transform: scale(1.3); } 100% { transform: scale(1); }
}
@keyframes bounceIn {
    0% { opacity: 0; transform: scale(0.3) translateY(-10px); }
    50% { opacity: 0.9; transform: scale(1.1); }
    80% { transform: scale(0.95); }
    100% { opacity: 1; transform: scale(1) translateY(0); }
}
@keyframes wiggle {
    0%, 100% { transform: translateY(-3px) scale(1.15) rotate(2deg); }
    25% { transform: translateY(-5px) scale(1.15) rotate(-4deg); }
    75% { transform: translateY(-1px) scale(1.15) rotate(4deg); }
}

.settings-item button, .settings-item select {
    background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.4);
    color: white; padding: 0.25rem 0.8rem; border-radius: 30px; font-size: 0.8rem;
    cursor: pointer; transition: all 0.2s ease;
}
.settings-item button:hover, .settings-item select:hover {
    background: rgba(255,255,255,0.3); transform: translateY(-1px);
}
select option { background: #0E7B7F; color: white; }

.text-size-slider { display: flex; align-items: center; gap: 1rem; }
.text-size-slider input {
    width: 200px; height: 6px; background: rgba(255,255,255,0.3);
    border-radius: 10px; accent-color: white; transition: all 0.2s ease;
}
.text-size-slider input:hover { transform: scaleY(1.5); }
@media (max-width: 480px) { .text-size-slider input { width: 150px; } }

/* listen panel */
.listen-controls {
    display: flex; align-items: center; gap: 1rem; flex-wrap: wrap; width: 100%;
}
.listen-controls-left {
    display: flex; align-items: center; gap: 0.8rem; flex-wrap: wrap;
}
.listen-controls-right {
    display: flex; align-items: center; gap: 1rem; margin-left: auto;
    flex: 1; max-width: 280px; justify-content: flex-end;
}
.speed-buttons {
    display: flex; align-items: center; gap: 0.4rem; background: rgba(255,255,255,0.15);
    padding: 0.2rem; border-radius: 30px;
}
.visualizer {
    display: flex; align-items: center; gap: 4px; height: 24px;
}
.visualizer span {
    width: 5px; height: 14px; background: rgba(255,255,255,0.9);
    border-radius: 3px; animation: none; transition: height 0.2s ease;
}
.visualizer.animating span {
    animation: soundwave 1.2s infinite ease-in-out;
}
.visualizer span:nth-child(2) { animation-delay: 0.6s; }
.visualizer span:nth-child(3) { animation-delay: 0.2s; }
.visualizer span:nth-child(4) { animation-delay: 0.4s; }
.visualizer span:nth-child(5) { animation-delay: 0.8s; }
@keyframes soundwave {
    0%, 100% { transform: scaleY(0.6); opacity: 0.8; }
    50% { transform: scaleY(1.4); opacity: 1; }
}

.speed-btn {
    background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.4);
    color: white; width: 38px; height: 38px; border-radius: 50%;
    font-size: 0.8rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease;
    display: flex; align-items: center; justify-content: center;
}
.speed-btn:hover { transform: scale(1.1); background: rgba(255,255,255,0.3); }
.speed-btn.active { background: white; color: #0E7B7F; font-weight: bold; }

.progress-container {
    display: flex; align-items: center; width: 100%; min-width: 160px; gap: 0.5rem;
}
@media (min-width: 768px) { .progress-container { min-width: 200px; } }
@media (max-width: 640px) {
    .listen-controls-right { max-width: 100%; margin-left: 0; width: 100%; justify-content: space-between; }
    .progress-container { min-width: 140px; flex: 2; }
}

.progress-bar { flex: 1; height: 6px; background: rgba(255,255,255,0.25); border-radius: 10px; overflow: hidden; }
.progress-fill { width: 0%; height: 100%; background: white; transition: width 0.1s linear; }

.listen-icon-btn {
    background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.4);
    color: white; width: 42px; height: 42px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center; font-size: 1.2rem;
    cursor: pointer; transition: all 0.2s ease; flex-shrink: 0;
}
.listen-icon-btn:hover { transform: scale(1.1); background: rgba(255,255,255,0.3); }

/* Spinner for TTS loading */
.spinner {
    border: 2px solid rgba(255,255,255,0.3); border-top: 2px solid white;
    border-radius: 50%; width: 20px; height: 20px; animation: spin 0.8s linear infinite;
    display: inline-block;
}
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

/* Updated share grid with fixed X logo */
.share-grid {
    display: flex; align-items: center; gap: 0.8rem; flex-wrap: wrap;
}

/* ===== SOCIAL MEDIA ICONS - FULL FIX ===== */
/* Remove the ash color overlay from the generic social-icon class */
.social-icon {
  border: none;
  color: white;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  animation: popIn 0.3s ease-out;
  animation-fill-mode: both;
  position: relative;
  overflow: hidden;
}

/* Brand color backgrounds - MUST come after .social-icon */
.facebook-bg { background: #1877F2 !important; }
.twitter-bg { background: #000000 !important; }
.instagram-bg { 
  background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D) !important; 
}
.linkedin-bg { background: #0A66C2 !important; }
.youtube-bg { background: #FF0000 !important; }

.x-logo-svg { 
  width: 18px; 
  height: 18px; 
  fill: white; 
}

/* Staggered animation delays */
.social-icon:nth-child(1) { animation-delay: 0.05s; }
.social-icon:nth-child(2) { animation-delay: 0.1s; }
.social-icon:nth-child(3) { animation-delay: 0.15s; }
.social-icon:nth-child(4) { animation-delay: 0.2s; }
.social-icon:nth-child(5) { animation-delay: 0.25s; }
.social-icon:nth-child(6) { animation-delay: 0.3s; }

/* Pop-in animation */
@keyframes popIn {
  0% { opacity: 0; transform: scale(0.5) rotate(-10deg); }
  70% { opacity: 0.8; transform: scale(1.1) rotate(5deg); }
  100% { opacity: 1; transform: scale(1) rotate(0); }
}

/* Hover effect - lift and scale with subtle ash overlay */
.social-icon:hover {
  transform: translateY(-3px) scale(1.15);
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

/* Click/Active state - ash color flash animation */
.social-icon:active {
  background: rgba(255, 255, 255, 0.2) !important;
  transform: scale(0.95);
  transition: all 0.15s ease;
}

/* Icon spin animation on hover */
.social-icon:hover i,
.social-icon:hover svg {
  animation: spinIcon 0.3s ease-out;
}

@keyframes spinIcon {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Ensure SVG icons stay white */
.social-icon svg path {
  fill: white !important;
}

.copy-btn {
    background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.4);
    color: white; width: 38px; height: 38px; border-radius: 50%; display: flex;
    align-items: center; justify-content: center; font-size: 1rem; cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); animation: popIn 0.3s ease-out 0.35s both;
}
.copy-btn:hover { transform: translateY(-3px) scale(1.15); background: rgba(255,255,255,0.35); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
.copy-btn i { transition: all 0.2s ease; }
.copy-btn:hover i { animation: bounce 0.3s ease-out; }
@keyframes bounce { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }

.cross-button {
    background: rgba(255,255,255,0.25); border: none; color: white; width: 34px; height: 34px;
    border-radius: 50%; display: flex; align-items: center; justify-content: center;
    font-size: 1.1rem; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    flex-shrink: 0; margin-left: 0.5rem; animation: rotateIn 0.3s ease-out;
}
@keyframes rotateIn {
    0% { opacity: 0; transform: rotate(-180deg) scale(0.5); }
    100% { opacity: 1; transform: rotate(0) scale(1); }
}
.cross-button:hover { background: rgba(255,255,255,0.4); transform: rotate(90deg) scale(1.1); }
.cross-button i { font-size: 1.2rem; transition: all 0.2s ease; }

/* ===== POST-ARTICLE SECTION STYLES ===== */
.post-article-section {
    max-width: 1000px;
    margin: 1rem auto;
    padding: 0.8rem;
    background: var(--light-card);
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    transition: all 0.3s ease;
    animation: fadeInUp 0.5s ease-out;
}
.dark-mode .post-article-section {
    background: var(--dark-card);
}

/* === SECTION REVEAL ON SCROLL ANIMATION === */
.fade-up-section {
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1), transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.fade-up-section.visible {
    opacity: 1;
    transform: translateY(0);
}

/* Stagger children animations inside sections */
.fade-up-section .section-title,
.fade-up-section .share-section,
.fade-up-section .quiz-container,
.fade-up-section .author-box,
.fade-up-section .you-may-like-container,
.fade-up-section .categories-grid,
.fade-up-section .faq-container,
.fade-up-section .comment-form,
.fade-up-section .comments-grid {
    animation: fadeInContent 0.8s ease-out forwards;
}

@keyframes fadeInContent {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Stagger children with delays */
.fade-up-section .section-title { animation-delay: 0.1s; }
.fade-up-section .share-section { animation-delay: 0.2s; }
.fade-up-section .quiz-container { animation-delay: 0.25s; }
.fade-up-section .author-box { animation-delay: 0.3s; }
.fade-up-section .you-may-like-container { animation-delay: 0.35s; }
.fade-up-section .categories-grid { animation-delay: 0.4s; }
.fade-up-section .faq-container { animation-delay: 0.45s; }
.fade-up-section .comment-form { animation-delay: 0.5s; }
.fade-up-section .comments-grid { animation-delay: 0.55s; }

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.section-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1.2rem;
    color: var(--teal-color);
    position: relative;
    display: inline-block;
}
.dark-mode .section-title {
    color: var(--teal-bright);
}
.section-title::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 0;
    width: 60px;
    height: 3px;
    background: var(--teal-color);
    border-radius: 2px;
}
.dark-mode .section-title::after {
    background: var(--teal-bright);
}

/* Section header with proper alignment */
.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.2rem;
    flex-wrap: wrap;
    gap: 1rem;
    width: 100%;
}
.section-header .section-title {
    margin-bottom: 0;
    flex: 0 1 auto;
}
.section-header .view-all-btn {
    margin-left: auto;
    white-space: nowrap;
    flex: 0 0 auto;
}
.delete-all-btn {
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
    border: 1px solid #ef4444;
    padding: 0.4rem 1rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: all 0.3s ease;
}
.dark-mode .delete-all-btn {
    background: rgba(239, 68, 68, 0.2);
    color: #f87171;
    border-color: #f87171;
}
.delete-all-btn:hover {
    background: #ef4444;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
}

/* Share Section - Centered */
.share-section {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
    gap: 1.5rem;
    padding: 1rem 0;
}
.share-label {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-secondary);
}
.dark-mode .share-label {
    color: var(--teal-bright);
}
.share-icons {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
    gap: 1rem;
}

.share-icon-btn {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: var(--primary-light);
    color: var(--teal-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.4rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid transparent;
    cursor: pointer;
}
.dark-mode .share-icon-btn {
    background: rgba(18, 171, 176, 0.15);
    color: var(--teal-bright);
}
.share-icon-btn:hover {
    transform: translateY(-3px) scale(1.1);
    background: var(--teal-color);
    color: white;
    border-color: var(--teal-color);
    box-shadow: 0 5px 15px rgba(14, 123, 127, 0.3);
}
.dark-mode .share-icon-btn:hover {
    background: var(--teal-bright);
    color: white;
}

/* Mini Quiz - 2 columns on desktop */
.quiz-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
}
@media (max-width: 768px) {
    .quiz-container {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
}
.quiz-item {
    background: rgba(14, 123, 127, 0.05);
    border-radius: 12px;
    padding: 1.2rem;
    border: 1px solid transparent;
    transition: all 0.3s ease;
}
.dark-mode .quiz-item {
    background: rgba(18, 171, 176, 0.1);
}
.quiz-item:hover {
    border-color: var(--teal-color);
    box-shadow: 0 4px 12px rgba(14, 123, 127, 0.1);
}
.dark-mode .quiz-item:hover {
    border-color: var(--teal-bright);
    box-shadow: 0 4px 12px rgba(18, 171, 176, 0.2);
}
.quiz-question {
    font-weight: 1000;
    margin-bottom: 1rem;
    color: var(--text-primary);
}
.dark-mode .quiz-question {
    color: #fff;
}
.quiz-options {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}
.quiz-option {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    color: var(--text-primary);
}
.dark-mode .quiz-option {
    color: #fff;
}
.quiz-option:hover {
    background: rgba(14, 123, 127, 0.1);
}
.dark-mode .quiz-option:hover {
    background: rgba(18, 171, 176, 0.15);
}
.quiz-option input[type="radio"] {
    accent-color: var(--teal-color);
    width: 18px;
    height: 18px;
}
.dark-mode .quiz-option input[type="radio"] {
    accent-color: var(--teal-bright);
}
.quiz-feedback {
    margin-top: 0.8rem;
    padding: 0.5rem;
    border-radius: 6px;
    font-size: 0.9rem;
    font-weight: 500;
    animation: slideIn 0.3s ease;
}
.quiz-feedback.correct {
    background: rgba(34, 197, 94, 0.1);
    color: #22c55e;
}
.quiz-feedback.incorrect {
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
}
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(-10px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* Author Box */
.author-box {
    display: flex;
    gap: 1.5rem;
    align-items: flex-start;
}
@media (max-width: 640px) {
    .author-box {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }
}
.author-image {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid var(--teal-color);
    display: flex;
    align-items: center;
    justify-content: center;
    background: #0E7B7F;
    color: white;
    font-size: 3rem;
}
.dark-mode .author-image {
    border-color: var(--teal-bright);
}
.author-info {
    flex: 1;
}
.author-name {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--teal-color);
    margin-bottom: 0.3rem;
}
.dark-mode .author-name {
    color: var(--teal-bright);
}
.author-bio {
    color: var(--text-secondary);
    margin-bottom: 0.8rem;
    font-size: 0.95rem;
}
.dark-mode .author-bio {
    color: #b0c4de;
}
.author-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 0.8rem;
}
.author-tag {
    background: var(--primary-light);
    color: var(--teal-color);
    padding: 0.2rem 0.8rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 500;
}
.dark-mode .author-tag {
    background: rgba(18, 171, 176, 0.15);
    color: var(--teal-bright);
}
.author-link {
    color: white !important;
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    padding: 0.5rem 1rem;
    border-radius: 25px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(14, 123, 127, 0.3);
}
.dark-mode .author-link {
    color: white !important;
    background: linear-gradient(135deg, var(--teal-bright), var(--primary-dark));
    box-shadow: 0 2px 8px rgba(18, 171, 176, 0.3);
}
.author-link:hover {
    text-decoration: none;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(14, 123, 127, 0.4);
    background: linear-gradient(135deg, var(--primary-dark), var(--teal-light));
}
.dark-mode .author-link:hover {
    box-shadow: 0 4px 12px rgba(18, 171, 176, 0.4);
    background: linear-gradient(135deg, var(--primary-dark), var(--teal-bright));
}

/* You May Like - List Cards with Teal Border */
.you-may-like-container {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}
.list-card {
    display: flex;
    gap: 0.5rem;
    padding: 0.3rem;
    background: rgba(14, 123, 127, 0.05);
    border-radius: 12px;
    transition: all 0.3s ease;
    position: relative;
}
.dark-mode .list-card {
    background: rgba(18, 171, 176, 0.1);
}
.list-card:hover {
    transform: translateX(5px);
    background: var(--teal-color);
}
.dark-mode .list-card:hover {
    background: var(--teal-bright);
}
.list-card:hover .list-card-title,
.list-card:hover .list-card-description,
.list-card:hover .timestamp {
    color: white;
}
.list-card-image {
    width: 120px;
    height: 120px;
    border-radius: 10px;
    object-fit: cover;
    flex-shrink: 0;
}
@media (max-width: 480px) {
    .list-card-image {
        width: 120px;
        height: 120px;
    }
}
.list-card-content {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
}
.list-card-title {
    font-weight: 700;
    font-size: 1rem;
    color: var(--text-primary);
    margin-bottom: 0.3rem;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.4;
}
.dark-mode .list-card-title {
    color: #fff;
}
.list-card-description {
    font-size: 0.9rem;
    color: var(--text-secondary);
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.4;
}
.dark-mode .list-card-description {
    color: #b0c4de;
}
/* Timestamp and Read button */
.list-card-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 0.3rem;
}
.timestamp {
    font-size: 0.7rem;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    gap: 0.3rem;
}
.timestamp i {
    font-size: 0.65rem;
    color: inherit;
}
.read-btn {
    background: #0E7B7F;
    color: white;
    border: none;
    padding: 0.2rem 0.8rem;
    border-radius: 20px;
    font-size: 0.7rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    text-decoration: none;
    display: inline-block;
    z-index: 10;
    position: relative;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}
.dark-mode .read-btn {
    background: #12ABB0;
}
.read-btn:hover {
    background: var(--teal-dark);
    transform: scale(1.05);
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
}
.list-card:hover .read-btn {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}
.dark-mode .list-card:hover .read-btn {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

/* ===== EXPLORE CATEGORIES — FIXED ===== */
.categories-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
}
@media (max-width: 640px) {
    .categories-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

.category-card {
    background: rgba(14, 123, 127, 0.05);
    border-radius: 10px;
    padding: 1.2rem;
    text-align: center;
    transition: all 0.3s ease;
    cursor: pointer;
    border: 1px solid var(--teal-color);
    text-decoration: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}
.dark-mode .category-card {
    background: rgba(18, 171, 176, 0.1);
}

.category-card:hover {
    transform: translateY(-3px);
    border-color: var(--teal-color);
    background: var(--teal-color);
}
.dark-mode .category-card:hover {
    border-color: var(--teal-bright);
    background: var(--teal-bright);
}

.category-card:hover .category-icon svg,
.category-card:hover .category-name {
    color: white;
}

.category-icon {
    margin-bottom: 0.5rem;
    display: flex;
    justify-content: center;
    align-items: center;
}

.category-icon svg {
    width: 32px;
    height: 32px;
    color: var(--teal-color);
    display: block;
}

.dark-mode .category-icon svg {
    color: var(--teal-bright);
}

.category-name {
    font-weight: 600;
    color: var(--text-primary);
    line-height: 1.3;
}
.dark-mode .category-name {
    color: #fff;
}

/* FAQ - single expand */
.faq-container {
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
}
.faq-item {
    border: 1px solid var(--teal-color);
    border-radius: 10px;
    overflow: hidden;
}
.dark-mode .faq-item {
    border-color: var(--teal-bright);
}
.faq-question {
    padding: 1rem;
    background: rgba(14, 123, 127, 0.05);
    font-weight: 600;
    color: #000;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.2s ease;
}
.dark-mode .faq-question {
    background: rgba(18, 171, 176, 0.1);
    color: #fff;
}
.faq-question:hover {
    background: rgba(14, 123, 127, 0.1);
}
.dark-mode .faq-question:hover {
    background: rgba(18, 171, 176, 0.15);
}
.faq-question i {
    transition: transform 0.3s ease;
}
.faq-question.active i {
    transform: rotate(180deg);
}
.faq-answer {
    max-height: 0;
    overflow: hidden;
    padding: 0 1rem;
    background: var(--light-card);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    color: var(--text-primary);
}
.dark-mode .faq-answer {
    background: var(--dark-card);
    color: #fff;
}
.faq-answer.show {
    max-height: 200px;
    padding: 1rem;
}

/* Comments */
.comment-form {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 1.5rem;
}
.comment-input {
    padding: 0.8rem;
    border: 1px solid var(--teal-color);
    border-radius: 8px;
    background: var(--light-card);
    color: var(--text-primary);
    font-size: 0.95rem;
    transition: all 0.2s ease;
}
.dark-mode .comment-input {
    background: #1e293b;
    border-color: var(--teal-bright);
    color: #f1f5f9;
}
.comment-input:focus {
    outline: none;
    border-color: var(--teal-color);
    box-shadow: 0 0 0 2px rgba(14, 123, 127, 0.2);
}
.dark-mode .comment-input:focus {
    border-color: var(--teal-bright);
    box-shadow: 0 0 0 2px rgba(18, 171, 176, 0.4), 0 0 15px var(--teal-bright);
}
.comment-submit {
    background: var(--teal-color);
    color: white;
    border: none;
    padding: 0.8rem;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}
.dark-mode .comment-submit {
    background: var(--teal-bright);
}
.comment-submit:hover {
    background: var(--teal-dark);
    transform: translateY(-2px);
}
.dark-mode .comment-submit:hover {
    background: #0d8a8e;
}
.comments-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}
@media (max-width: 768px) {
    .comments-grid {
        grid-template-columns: 1fr;
    }
}
.comment-item {
    background: rgba(14, 123, 127, 0.03);
    border-radius: 8px;
    padding: 1rem;
    animation: slideIn 0.3s ease;
    border: 1px solid transparent;
    position: relative;
    break-inside: avoid;
}
.dark-mode .comment-item {
    background: rgba(18, 171, 176, 0.05);
}
.comment-item:hover {
    border-color: var(--teal-color);
}
.dark-mode .comment-item:hover {
    border-color: var(--teal-bright);
}
.comment-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
}
.comment-name {
    font-weight: 600;
    color: var(--teal-color);
}
.dark-mode .comment-name {
    color: var(--teal-bright);
}
.comment-date {
    font-size: 0.75rem;
    color: var(--text-secondary);
}
.comment-text {
    color: var(--text-primary);
    font-size: 0.95rem;
    margin-bottom: 0.5rem;
}
.comment-delete {
    background: none;
    border: none;
    color: #ef4444;
    font-size: 0.8rem;
    cursor: pointer;
    padding: 0.3rem;
    border-radius: 50%;
    transition: all 0.2s ease;
    position: absolute;
    bottom: 0.5rem;
    right: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
}
.comment-delete:hover {
    background: rgba(239, 68, 68, 0.1);
}
.comment-delete i {
    margin: 0;
    font-size: 12px;
}
/* View All button */
.view-all-btn {
    background: linear-gradient(135deg, var(--teal-color), var(--teal-dark));
    color: white;
    border: none;
    padding: 0.6rem 1.5rem;
    border-radius: 25px;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-block;
    width: fit-content;
    text-decoration: none;
    box-shadow: 0 2px 8px rgba(14, 123, 127, 0.3);
}
.dark-mode .view-all-btn {
    background: linear-gradient(135deg, var(--teal-bright), var(--primary-dark));
    box-shadow: 0 2px 8px rgba(18, 171, 176, 0.3);
}
.view-all-btn:hover {
    background: linear-gradient(135deg, var(--teal-dark), var(--teal-light));
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(14, 123, 127, 0.4);
}
.dark-mode .view-all-btn:hover {
    background: linear-gradient(135deg, var(--primary-dark), var(--teal-bright));
    box-shadow: 0 4px 12px rgba(18, 171, 176, 0.4);
}
.view-all-btn i {
    margin-left: 0.5rem;
    font-size: 0.8rem;
}
.hidden-comments {
    display: none !important;
}
/* Hidden class */
.hidden {
    display: none !important;
}

/* === VIEW TRANSITION ANIMATION === */
@supports (view-transition-name: none) {
::view-transition-old(root),
::view-transition-new(root) {
animation: none;
mix-blend-mode: normal;
}
::view-transition-old(root) {
z-index: 1;
}
::view-transition-new(root) {
z-index: 9999;
}
.dark-mode::view-transition-old(root) {
z-index: 9999;
}
.dark-mode::view-transition-new(root) {
z-index: 1;
}
}

/* Image lazy loading blur effect */
img[loading="lazy"] {
    filter: blur(10px);
    transition: filter 0.5s ease-out;
}

img[loading="lazy"].loaded {
    filter: blur(0);
}

/* Ensure all images have lazy loading class */
img:not([loading]) {
    loading: lazy;
}

/* === DYNAMIC INTERNAL LINK BOX === */
.dynamic-link-box {
    background: rgba(14, 123, 127, 0.05);
    border-left: 4px solid var(--primary);
    padding: 0.3rem;
    margin-top: 0.5rem;
    margin-bottom: 1rem;
    border-radius: 8px;
    transition: all 0.3s ease;
    animation: fadeInLink 0.5s ease-out;
    display: flex;
    align-items: flex-start;
    
    /* Required for the shimmer effect to stay inside the box */
    position: relative;
    overflow: hidden; 
}

/* Shimmer Effect (Pseudo-element) */
.dynamic-link-box::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 50%;
    height: 100%;
    background: linear-gradient(
        to right,
        rgba(255, 255, 255, 0) 0%,
        rgba(14, 123, 127, 0.1) 50%,  /* Increased from 0.15 to 0.4 for better visibility */
        rgba(255, 255, 255, 0) 100%
    );
    transform: skewX(-25deg);
    animation: shimmerMove 3s infinite;  /* Slowed from 3s to 6s */
    pointer-events: none; /* Ensures clickability isn't blocked */
    z-index: 1;
}

/* Dark Mode Shimmer Adjustment */
.dark-mode .dynamic-link-box::before {
    background: linear-gradient(
        to right,
        rgba(255, 255, 255, 0) 0%,
        rgba(18, 171, 176, 0.1) 50%,
        rgba(255, 255, 255, 0) 100%
    );
}

.dark-mode .dynamic-link-box {
    background: rgba(18, 171, 176, 0.1);
    border-left-color: var(--teal-bright);
}

.dynamic-link-text {
    color: var(--primary);
    font-weight: 600;
    text-decoration: none;
    display: flex;
    align-items: flex-start;
    gap: 0.2rem;
    font-size: 1.05rem;
    line-height: 1.4;
    transition: opacity 0.2s ease;
    flex: 1;
    min-width: 0;
    position: relative; /* Ensures text stays above shimmer */
    z-index: 2;
}

.dark-mode .dynamic-link-text {
    color: var(--teal-bright);
}

.dynamic-link-text:hover {
    text-decoration: underline;
    opacity: 0.8;
}

.dynamic-link-text svg {
    flex-shrink: 0;
    width: 20px;
    height: 20px;
    margin-top: 0.1rem;
}

.link-text-span {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: 1;
}

/* Mobile: 2 lines with dots */
@media (max-width: 768px) {
    .link-text-span {
        -webkit-line-clamp: 2;
    }
}

@keyframes fadeInLink {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Shimmer Animation Keyframes */
@keyframes shimmerMove {
    0% {
        left: -100%;
    }
    20% {
        left: 200%; /* Moves quickly across */
    }
    100% {
        left: 200%; /* Waits before repeating */
    }
}
</style>
<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
<!-- BACK TO TOP BUTTON -->
<div class="back-to-top" id="backToTop" aria-label="Back to top">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <path d="M18 15l-6-6-6 6"/>
    </svg>
</div>

<!-- NEWSLETTER MODAL -->
<div class="newsletter-modal" id="newsletterModal">
    <div class="newsletter-modal-content">
        <div class="newsletter-modal-icon">🚧</div>
        <h3 class="newsletter-modal-title">Newsletter Under Development</h3>
        <p class="newsletter-modal-message">
            Our newsletter system is currently being upgraded with enhanced features.
            <br><br>
            In the meantime, you can follow us on social media for the latest updates.
        </p>
        <button class="newsletter-modal-close" id="newsletterModalClose">Got it!</button>
    </div>
</div>

<!-- SCROLL INDICATOR - AT TOP EDGE (HORIZONTAL) -->
<div class="scroll-indicator">
    <div class="scroll-progress" id="scrollProgress"></div>
</div>

<!-- THEME TOGGLE BUTTON -->
<button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
   <svg class="theme-icon sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <circle cx="12" cy="12" r="5" fill="none" stroke="currentColor" stroke-width="2"/>
    <line x1="12" y1="1" x2="12" y2="3" stroke="currentColor" stroke-width="2"/>
    <line x1="12" y1="21" x2="12" y2="23" stroke="currentColor" stroke-width="2"/>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" stroke="currentColor" stroke-width="2"/>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" stroke="currentColor" stroke-width="2"/>
    <line x1="1" y1="12" x2="3" y2="12" stroke="currentColor" stroke-width="2"/>
    <line x1="21" y1="12" x2="23" y2="12" stroke="currentColor" stroke-width="2"/>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" stroke="currentColor" stroke-width="2"/>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" stroke="currentColor" stroke-width="2"/>
</svg>
    <svg class="theme-icon moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    <span class="sr-only">Toggle theme</span>
</button>

<!-- MENU TOGGLE BUTTON - ICONS ALWAYS WHITE -->
<button class="menu-toggle" id="menuToggle" aria-label="Open menu">
    <span></span>
    <span></span>
    <span></span>
</button>

<!-- MENU CARD (with teal line on hover) - DARK MODE STYLED -->
<div class="menu-card" id="menuCard">
    <div class="menu-header">
        <h3>Menu</h3>
        <button class="menu-close" id="menuClose" aria-label="Close menu">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
        </button>
    </div>
    <ul class="menu-list">
        <li class="menu-item">
            <a href="https://techtonic-times.github.io/home/" class="menu-link">
                <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                    <polyline points="9 22 9 12 15 12 15 22"/>
                </svg>
                Home
            </a>
        </li>
        <li class="menu-item dropdown-parent">
            <button class="menu-link dropdown-toggle">
                <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <rect x="3" y="3" width="7" height="7"/>
                    <rect x="14" y="3" width="7" height="7"/>
                    <rect x="14" y="14" width="7" height="7"/>
                    <rect x="3" y="14" width="7" height="7"/>
                </svg>
                Categories
                <svg class="dropdown-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M9 18l6-6-6-6"/>
                </svg>
            </button>
            <ul class="dropdown-menu">
                <li>
                    <a href="https://techtonic-times.github.io/tech/" class="dropdown-item">
                        <span class="subcategory-name">Technology</span>
                        <svg class="subcategory-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </li>
                <li>
                    <a href="https://techtonic-times.github.io/science/" class="dropdown-item">
                        <span class="subcategory-name">Science</span>
                        <svg class="subcategory-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </li>
                <li>
                    <a href="https://techtonic-times.github.io/ai/" class="dropdown-item">
                        <span class="subcategory-name">AI & Data</span>
                        <svg class="subcategory-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </li>
                <li>
                    <a href="https://techtonic-times.github.io/cyber/" class="dropdown-item">
                        <span class="subcategory-name">Cyber World</span>
                        <svg class="subcategory-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </li>
                <li>
                    <a href="https://techtonic-times.github.io/future/" class="dropdown-item">
                        <span class="subcategory-name">Future Tech</span>
                        <svg class="subcategory-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </li>
                <li>
                    <a href="https://techtonic-times.github.io/explanations/" class="dropdown-item">
                        <span class="subcategory-name">Explanations</span>
                        <svg class="subcategory-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </li>
            </ul>
        </li>
        <li class="menu-item">
            <a href="https://techtonic-times.github.io/home/archive.html" class="menu-link">
                <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                    <line x1="16" y1="2" x2="16" y2="6"/>
                    <line x1="8" y1="2" x2="8" y2="6"/>
                    <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
                Archives
            </a>
        </li>
        <li class="menu-item">
            <a href="https://www.techtontic-times.com/submit-article" class="menu-link">
                <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2H16a2 2 0 0 0 2-2v-8"/>
                    <polyline points="14 2 14 8 20 8"/>
                    <line x1="16" y1="13" x2="8" y2="13"/>
                    <line x1="16" y1="17" x2="8" y2="17"/>
                    <polyline points="10 9 9 9 8 9"/>
                    <path d="M20 4v5h-5"/>
                </svg>
                Submit Your Article
            </a>
        </li>
        <li class="menu-item">
            <a href="https://www.techtontic-times.com/community" class="menu-link">
                <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                    <circle cx="9" cy="7" r="4"/>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
                Community
            </a>
        </li>
        <li class="menu-item">
            <a href="https://www.techtontic-times.com/about" class="menu-link">
                <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="12" y1="16" x2="12" y2="12"/>
                    <line x1="12" y1="8" x2="12.01" y2="8"/>
                </svg>
                About Us
            </a>
        </li>
        <li class="menu-item">
            <a href="https://www.techtontic-times.com/contact" class="menu-link">
                <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                    <polyline points="22,6 12,13 2,6"/>
                </svg>
                Contact Us
            </a>
        </li>
    </ul>
</div>

<!-- BACKDROP FOR MENU -->
<div class="backdrop" id="backdrop"></div>

<!-- BREADCRUMB - EXACT TOOLIVO STYLE, 5px FROM TOP -->
<nav aria-label="Breadcrumb" class="breadcrumb">
<ul>
    <li><a href="https://techtonic-times.github.io/home/"><i class="fas fa-home"></i> Home</a></li>
    <li><a href="https://techtonic-times.github.io/science/">Science</a></li>
    <li aria-current="page">Nuclear Science & Environment</li>
</ul>
</nav>

<!-- HEADER WITH LOGO - BIGGER, 2-ROW STYLE -->
<header>
    <div class="logo-container">
        <a href="https://techtonic-times.github.io/home/">
            <img 
                src="https://techtonic-times.github.io/home/techtonic-logo.webp" 
                alt="TechTonic Times Logo" 
                class="logo"
                loading="lazy"
                onerror="this.style.display='none'; this.nextElementSibling.style.display='block';"
                onload="this.classList.add('loaded')"
            >
            <span style="display:none; color:white; font-size:1.5rem; font-weight:bold;">TechTonic Times</span>
        </a>
        <span class="logo-tagline">Feel the Pulse of Progress</span>
    </div>
</header>

<!-- ARTICLE TAG (BADGE) - EXACT TOOLIVO STYLE WITH CLICKABLE SVG -->
<div class="article-tag">
    <a href="https://techtonic-times.github.io/category/science-research" class="article-badge" style="text-decoration: none; display: inline-flex; align-items: center; gap: 0.3rem;">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16" height="16" style="color: white;">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
        </svg>
        Science & Research
    </a>
</div>

<!-- ARTICLE MAIN TITLE (H1) - EXACT TOOLIVO STYLE -->
<div class="article-main-title">
    <h1 id="articleMainTitle">Six Ways Nuclear Science and Technology Are Protecting Our Planet</h1>
</div>

<!-- ARTICLE SECTION CARD - EXACT TOOLIVO STYLE -->
<section class="article-section fade-up-section" id="mainArticleSection">
    <div class="article-header">
        <!-- ARTICLE META - UPDATED: Date left, Author right, smaller font/padding -->
        <div class="article-meta">
            <div class="article-date">
  <i class="fas fa-calendar-alt meta-icon"></i>
<span>February 12, 2026 • 11:34 AM EST</span>

  <span class="meta-separator">•</span>

  <i class="fas fa-clock meta-icon"></i>
  <span>5 min read</span>
</div>
            <div class="article-author">
                <i class="fas fa-user meta-icon"></i>
                <span>Emma Midgley</span>
            </div>
        </div>
    </div>

    <div class="article-single-content" id="articleContent">
        <p>As global leaders, international organizations, scientists, business representatives and climate activists convene in Belém for COP30, the IAEA is showcasing how nuclear science and technology are driving solutions to environmental challenges. Nuclear science not only provides the world with reliable clean energy, but also helps scientists monitor and protect ecosystems, enhance food security and reduce pollution.</p>
        
        <!-- TOOLBAR - EXACTLY AS REQUESTED, PLACED BEFORE IMAGE -->
        <div class="toolbar-container">
            <div id="toolbar" class="toolbar-collapsed">
                <div id="iconGroup" class="toolbar-icons">
                    <button id="iconLang" class="toolbar-icon" title="Language"><i class="fas fa-language"></i></button>
                    <button id="iconTextSize" class="toolbar-icon" title="Text size"><i class="fas fa-text-height"></i></button>
                    <button id="iconLike" class="toolbar-icon" title="React"><span id="likeEmoji"><i class="far fa-heart"></i></span></button>
                    <button id="iconShare" class="toolbar-icon" title="Share"><i class="fa-solid fa-share"></i></button>
                    <button id="iconListen" class="toolbar-icon" title="Listen"><i class="fas fa-headphones-alt"></i></button>
                </div>
            </div>
        </div>

        <!-- HIDDEN TTS CONTENT AREA - Place this right after the toolbar container -->
        <div style="display: none;" id="ttsContent">
            <!-- English -->
            <div data-lang="en">
                <p>Nuclear science and technology are driving solutions to environmental challenges at COP30 in Belém. Nuclear science not only provides the world with reliable clean energy, but also helps scientists monitor and protect ecosystems, enhance food security and reduce pollution. At the IAEA Atoms4Climate Pavilion, visitors can see these innovations in action. In Brazil, electron beam technology is transforming industrial wastewater treatment. In Latin America, countries are using nuclear techniques to control pests, safeguard crops and food exports. Electron beam technology breaks down complex industrial contaminants without chemicals. A mobile unit equipped with an electron beam accelerator is being deployed in Brazil to treat industrial wastewater, improving water quality and environmental protection. Isotopic techniques help scientists track carbon storage in coastal ecosystems like mangroves and seagrass. Cosmic ray neutron sensors monitor glacier melt in the Andes, providing critical data to secure freshwater for millions of people. The Sterile Insect Technique uses radiation to sterilize insects, reducing pest populations naturally without pesticides. This protects crops and reduces reliance on chemical pesticides. Fusion energy research is gaining momentum with progress on the international ITER project. Small Modular Reactors offer flexible, cost-effective options for powering small energy grids, data centres and commercial ships. The intersection of nuclear science and environmental protection represents one of the most promising frontiers in sustainable technology. From cleaning our water to monitoring climate impacts and developing next-generation clean energy, nuclear applications are proving essential to addressing the complex environmental challenges of our time.</p>
            </div>
            <!-- Spanish -->
            <div data-lang="es">
                <p>La ciencia y la tecnología nucleares están impulsando soluciones a los desafíos ambientales en la COP30 en Belém. La ciencia nuclear no solo proporciona al mundo energía limpia confiable, sino que también ayuda a los científicos a monitorear y proteger ecosistemas, mejorar la seguridad alimentaria y reducir la contaminación. En el Pabellón Atoms4Climate del OIEA, los visitantes pueden ver estas innovaciones en acción. En Brasil, la tecnología de haz de electrones está transformando el tratamiento de aguas residuales industriales. En América Latina, los países utilizan técnicas nucleares para controlar plagas, proteger cultivos y exportaciones de alimentos. La tecnología de haz de electrones descompone contaminantes industriales complejos sin productos químicos. Una unidad móvil equipada con un acelerador de haz de electrones se está desplegando en Brasil para tratar aguas residuales industriales, mejorando la calidad del agua y la protección ambiental. Las técnicas isotópicas ayudan a los científicos a rastrear el almacenamiento de carbono en ecosistemas costeros como manglares y pastos marinos. Los sensores de neutrones de rayos cósmicos monitorean el deshielo de los glaciares en los Andes, proporcionando datos críticos para asegurar agua dulce para millones de personas. La Técnica del Insecto Estéril utiliza radiación para esterilizar insectos, reduciendo las poblaciones de plagas naturalmente sin pesticidas. Esto protege los cultivos y reduce la dependencia de pesticidas químicos. La investigación de energía de fusión está ganando impulso con el progreso en el proyecto internacional ITER. Los pequeños reactores modulares ofrecen opciones flexibles y rentables para alimentar pequeñas redes eléctricas, centros de datos y barcos comerciales. La intersección de la ciencia nuclear y la protección ambiental representa una de las fronteras más prometedoras en la tecnología sostenible. Desde la limpieza de nuestras aguas hasta el monitoreo de los impactos climáticos y el desarrollo de energía limpia de próxima generación, las aplicaciones nucleares están demostrando ser esenciales para abordar los complejos desafíos ambientales de nuestro tiempo.</p>
            </div>
            <!-- Hindi -->
            <div data-lang="hi">
                <p>परमाणु विज्ञान और प्रौद्योगिकी बेलेम में COP30 में पर्यावरणीय चुनौतियों का समाधान कर रहे हैं। परमाणु विज्ञान न केवल दुनिया को विश्वसनीय स्वच्छ ऊर्जा प्रदान करता है, बल्कि वैज्ञानिकों को पारिस्थितिक तंत्र की निगरानी और सुरक्षा, खाद्य सुरक्षा बढ़ाने और प्रदूषण कम करने में भी मदद करता है। IAEA के Atoms4Climate मंडप में, आगंतुक इन नवाचारों को क्रियाशील देख सकते हैं। ब्राजील में, इलेक्ट्रॉन बीम तकनीक औद्योगिक अपशिष्ट जल उपचार को बदल रही है। लैटिन अमेरिका में, देश कीटों को नियंत्रित करने, फसलों और खाद्य निर्यात की सुरक्षा के लिए परमाणु तकनीकों का उपयोग कर रहे हैं। इलेक्ट्रॉन बीम तकनीक रसायनों के बिना जटिल औद्योगिक संदूषकों को तोड़ती है। इलेक्ट्रॉन बीम एक्सेलेरेटर से सुसज्जित एक मोबाइल इकाई ब्राजील में औद्योगिक अपशिष्ट जल के उपचार के लिए तैनात की जा रही है, जिससे पानी की गुणवत्ता और पर्यावरण संरक्षण में सुधार हो रहा है। समस्थानिक तकनीकें वैज्ञानिकों को मैंग्रोव और समुद्री घास जैसे तटीय पारिस्थितिक तंत्रों में कार्बन भंडारण को ट्रैक करने में मदद करती हैं। कॉस्मिक रे न्यूट्रॉन सेंसर एंडीज में ग्लेशियर पिघलने की निगरानी करते हैं, जो लाखों लोगों के लिए मीठे पानी को सुरक्षित करने के लिए महत्वपूर्ण डेटा प्रदान करते हैं। बंध्य कीट तकनीक कीटों को निर्जर्म करने के लिए विकिरण का उपयोग करती है, कीटनाशकों के बिना स्वाभाविक रूप से कीट आबादी को कम करती है। यह फसलों की रक्षा करता है और रासायनिक कीटनाशकों पर निर्भरता कम करता है। अंतर्राष्ट्रीय ITER परियोजना में प्रगति के साथ फ्यूजन ऊर्जा अनुसंधान गति पकड़ रहा है। छोटे मॉड्यूलर रिएक्टर छोटे ऊर्जा ग्रिड, डेटा केंद्रों और वाणिज्यिक जहाजों को बिजली देने के लिए लचीले, लागत प्रभावी विकल्प प्रदान करते हैं। परमाणु विज्ञान और पर्यावरण संरक्षण का प्रतिच्छेदन सतत प्रौद्योगिकी में सबसे आशाजनक सीमाओं में से एक का प्रतिनिधित्व करता है। हमारे पानी की सफाई से लेकर जलवायु प्रभावों की निगरानी और अगली पीढ़ी की स्वच्छ ऊर्जा विकसित करने तक, परमाणु अनुप्रयोग हमारे समय की जटिल पर्यावरणीय चुनौतियों का समाधान करने के लिए आवश्यक साबित हो रहे हैं।</p>
            </div>
        </div>
        
        <!-- IMAGE + KEY INSIGHTS - DESKTOP SIDEBYSIDE, MOBILE STACKED -->
        <div class="image-keypoints-container">
            <div class="image-container">
                <img src="https://images.unsplash.com/photo-1581091226033-d5c48150dbaa?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                     alt="Nuclear cooling towers and green field – symbolizing nuclear science for environment" 
                     class="square-image"
                     loading="lazy"
                     onload="this.classList.add('loaded')">
            </div>
            <div class="keypoints-container">
                <h3 class="keypoints-title">Key Insights You Should never miss</h3>
                <ul class="keypoints-list">
                    <li class="keypoint-item">
                        <div class="keypoint-title">Chemical-free water detox</div>
                        <div class="keypoint-description">E-beam technology breaks down industrial pollutants without chemicals – mobile unit deployed in Brazil treats wastewater, protecting rivers and communities.</div>
                    </li>
                    <li class="keypoint-item">
                        <div class="keypoint-title">Blue carbon & climate monitoring</div>
                        <div class="keypoint-description">IAEA's isotopic techniques track carbon storage in mangroves/seagrass; cosmic ray sensors measure glacier melt in Andes to secure freshwater for millions.</div>
                    </li>
                    <li class="keypoint-item">
                        <div class="keypoint-title">Sterile insect & fusion energy</div>
                        <div class="keypoint-description">SIT eradicates pests without pesticides; ITER fusion research & SMRs accelerate clean baseload power – financing strategies at COP30.</div>
                    </li>
                </ul>
            </div>
        </div>
        
        <p>At the IAEA Atoms4Climate Pavilion, visitors can see these innovations in action. In Brazil, for example, electron beam (e-beam) technology is transforming industrial wastewater treatment. In Latin America, countries are using nuclear techniques to control pests, safeguard crops and food exports — a win for farmers, consumers and the environment.</p>
        
        <div class="highlight-box">
            <h4>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                Important point
            </h4>
            <p>Nuclear applications extend far beyond energy production, offering innovative solutions for water treatment, ecosystem monitoring, sustainable agriculture, and climate change mitigation.</p>
        </div>
        
        <h2>The Six Revolutionary Applications</h2>
        
        <p>Treating wastewater contaminated by industrial pollutants remains a major challenge for many countries. Through its support for electron beam (e-beam) technology, the IAEA is helping countries develop innovative, chemical-free solutions that break down complex contaminants and improve water quality.</p>
        <p>Supported by the IAEA and Brazil's Innovation Agency (FINEP), a mobile unit equipped with an electron beam accelerator is being deployed in Brazil to treat industrial wastewater, improving water quality and environmental protection.</p>
        
        <h2>Future Energy Solutions</h2>
        
        <p>As the world seeks new solutions for clean energy, fusion energy research is gaining momentum. At COP30, the IAEA is presenting the current state of fusion research and development, including progress on the international ITER project — the world's largest fusion experiment based in France.</p>
        
        <!-- DYNAMIC INTERNAL LINK CONTAINER -->
<div id="dynamic-link-container"></div>
        
        <p>The session provides an overview of the current state of fusion energy including developments across various international, national and private projects, and insights from the IAEA World Fusion Outlook 2025.</p>
        <h3>Financing Strategies for Low Carbon Energy Sources</h3>
        <p>Building on the outcomes of the first Global Stocktake at COP28, the IAEA supports countries in identifying pathways to accelerate the deployment of nuclear power together with renewables as well as emissions abatement and removal technologies, particularly in hard to abate sectors and low-carbon hydrogen production.</p>
        
        <div class="highlight-box">
            <h4>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                Emerging Technology
            </h4>
            <p>Accelerating deployment of small modular reactors (SMRs) is also in the spotlight at COP. SMRs offer flexible, cost-effective options for powering small energy grids, making them suitable for energy-intensive industries, data centres and commercial ships. An IAEA event will explore approaches to SMR financing, policy and regulation.</p>
        </div>
        
        <h2>Conclusion</h2>
        <p>The intersection of nuclear science and environmental protection represents one of the most promising frontiers in sustainable technology. From cleaning our water to monitoring climate impacts and developing next-generation clean energy, nuclear applications are proving essential to addressing the complex environmental challenges of our time.</p>
        <p>As demonstrated at COP30, these technologies are not futuristic concepts but practical solutions being deployed today across multiple continents. The ongoing development and scaling of these applications will be crucial to achieving global sustainability goals and building a resilient future for our planet.</p>
        
        <!-- SIX HASHTAGS - MOVED TO AFTER LAST PARAGRAPH -->
        <div class="hashtag-list">
            <span class="hashtag-item"><i class="fas fa-hashtag"></i> NuclearEnergy</span>
            <span class="hashtag-item"><i class="fas fa-hashtag"></i> CleanTech</span>
            <span class="hashtag-item"><i class="fas fa-hashtag"></i> WaterTreatment</span>
            <span class="hashtag-item"><i class="fas fa-hashtag"></i> ClimateAction</span>
            <span class="hashtag-item"><i class="fas fa-hashtag"></i> SMR</span>
            <span class="hashtag-item"><i class="fas fa-hashtag"></i> FusionEnergy</span>
        </div>
    </div>
</section>

<!-- ===== POST-ARTICLE SECTIONS ===== -->

<!-- SHARE SECTION - Centered with larger icons (EXACT COPY) -->
<div class="post-article-section fade-up-section" id="shareSection">
    <h2 class="section-title">Spread the word</h2>
    <div class="share-section">
        <div class="share-icons">
            <button class="share-icon-btn" data-platform="facebook"><i class="fab fa-facebook-f"></i></button>
            <button class="share-icon-btn" data-platform="x"><svg class="x-logo-svg" viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></button>
            <button class="share-icon-btn" data-platform="linkedin"><i class="fab fa-linkedin-in"></i></button>
            <button class="share-icon-btn" data-platform="whatsapp"><i class="fab fa-whatsapp"></i></button>
            <button class="share-icon-btn" data-platform="telegram"><i class="fab fa-telegram-plane"></i></button>
            <button class="share-icon-btn" data-platform="reddit"><i class="fab fa-reddit-alien"></i></button>
            <button class="share-icon-btn" data-platform="pinterest"><i class="fab fa-pinterest"></i></button>
            <button class="share-icon-btn" data-platform="email"><i class="fas fa-envelope"></i></button>
            <button class="share-icon-btn" data-platform="hackernews"><i class="fab fa-hacker-news"></i></button>
            <button class="share-icon-btn" id="copyLinkBtn2"><i class="fas fa-copy"></i></button>
        </div>
    </div>
</div>

<!-- MINI QUIZ - 2 Columns -->
<div class="post-article-section fade-up-section" id="quizSection">
    <h2 class="section-title">Quick Quiz & Opinion</h2>
    <div class="quiz-container" id="quizContainer">
        <!-- Quiz 1 -->
        <div class="quiz-item" id="quiz1">
            <div class="quiz-question">1. What does IAEA stand for?</div>
            <div class="quiz-options">
                <label class="quiz-option"><input type="radio" name="quiz1" value="incorrect"> International Atomic Energy Association</label>
                <label class="quiz-option"><input type="radio" name="quiz1" value="correct"> International Atomic Energy Agency</label>
                <label class="quiz-option"><input type="radio" name="quiz1" value="incorrect"> International Agency for Energy Affairs</label>
            </div>
            <div class="quiz-feedback" id="quiz1Feedback"></div>
        </div>
        <!-- Quiz 2 (Opinion) -->
        <div class="quiz-item" id="quiz2">
            <div class="quiz-question">2. Do you think nuclear technology can help fight climate change?</div>
            <div class="quiz-options">
                <label class="quiz-option"><input type="radio" name="quiz2" value="yes"> Yes, definitely</label>
                <label class="quiz-option"><input type="radio" name="quiz2" value="maybe"> Maybe, with proper regulations</label>
                <label class="quiz-option"><input type="radio" name="quiz2" value="no"> No, risks outweigh benefits</label>
            </div>
            <div class="quiz-feedback" id="quiz2Feedback"></div>
        </div>
    </div>
</div>

<!-- AUTHOR BOX with female icon placeholder -->
<div class="post-article-section fade-up-section" id="authorSection">
    <h2 class="section-title">About the Author</h2>
    <div class="author-box">
        <!-- Female icon as placeholder -->
        <div class="author-image" style="display: flex; align-items: center; justify-content: center; background: #0E7B7F; color: white; font-size: 3rem; width: 100px; height: 100px; border-radius: 50%;">
            <svg viewBox="0 0 24 24" fill="currentColor" width="48" height="48" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
        </div>
        <div class="author-info">
            <div class="author-name">Emma Midgley</div>
            <div class="author-bio">Senior science journalist specializing in nuclear technology and environmental innovation. Covering climate solutions at COP30 and beyond.</div>
            <div class="author-tags">
                <span class="author-tag">Nuclear Science</span>
                <span class="author-tag">Climate Tech</span>
                <span class="author-tag">Environment</span>
            </div>
            <a href="#" class="author-link">View all articles <i class="fas fa-arrow-right"></i></a>
        </div>
    </div>
</div>

<!-- RELATED ARTICLES -->
<div class="post-article-section fade-up-section" id="relatedSection">
    <div class="section-header">
        <h2 class="section-title">Related Articles</h2>
        <a href="https://techtonic-times.github.io/category/nuclear-science" class="view-all-btn">View All <i class="fas fa-arrow-right"></i></a>
    </div>
    <div class="you-may-like-container" id="relatedArticlesContainer"></div>
</div>

<!-- EXPLORE 6 CATEGORIES with icons -->
<div class="post-article-section fade-up-section" id="categoriesSection">
    <h2 class="section-title">Explore Topics</h2>
    <div class="categories-grid">
        <!-- Science -->
        <a href="https://techtonic-times.github.io/category/nuclear-science" class="category-card">
            <div class="category-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="48" height="48">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
                </svg>
            </div>
            <div class="category-name">Science</div>
        </a>
        <!-- Technology -->
        <a href="https://techtonic-times.github.io/category/clean-energy" class="category-card">
            <div class="category-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="48" height="48">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 2.5h8a2 2 0 012 2v15a2 2 0 01-2 2H8a2 2 0 01-2-2v-15a2 2 0 012-2z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.5 18.5h1" />
                </svg>
            </div>
            <div class="category-name">Technology</div>
        </a>
        <!-- AI & Data -->
        <a href="https://techtonic-times.github.io/category/water-treatment" class="category-card">
            <div class="category-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="48" height="48">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" />
                </svg>
            </div>
            <div class="category-name">AI & Data</div>
        </a>
        <!-- Cyber World -->
        <a href="https://techtonic-times.github.io/category/agriculture" class="category-card">
            <div class="category-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="48" height="48">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2l8 4v6c0 5.2-3.6 8.1-8 10-4.4-1.9-8-4.8-8-10V6l8-4z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v5m0 3h.01" />
                </svg>
            </div>
            <div class="category-name">Cyber World</div>
        </a>
        <!-- Future Tech -->
        <a href="https://techtonic-times.github.io/future/" class="category-card">
            <div class="category-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="48" height="48">
                    <circle cx="12" cy="12" r="3" stroke-width="2" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2v3M12 19v3M2 12h3M19 12h3" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5l2 2M17 17l2 2M5 19l2-2M17 7l2-2" />
                </svg>
            </div>
            <div class="category-name">Future Tech</div>
        </a>
        <!-- Explanations -->
        <a href="https://techtonic-times.github.io/category/innovation" class="category-card">
            <div class="category-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="48" height="48">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3a6 6 0 00-3 11v3h6v-3a6 6 0 00-3-11z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 21h6" />
                </svg>
            </div>
            <div class="category-name">Explanations</div>
        </a>
    </div>
</div>

<!-- YOU MAY LIKE -->
<div class="post-article-section fade-up-section" id="youMayLikeSection">
    <div class="section-header">
        <h2 class="section-title">You May Like</h2>
        <a href="https://techtonic-times.github.io/category/editor-picks" class="view-all-btn">View All <i class="fas fa-arrow-right"></i></a>
    </div>
    <div class="you-may-like-container" id="youMayLikeContainer"></div>
</div>

<!-- LAST WEEK'S POPULAR -->
<div class="post-article-section fade-up-section" id="popularSection">
    <div class="section-header">
        <h2 class="section-title">Last Week's Popular</h2>
        
    </div>
    <div class="you-may-like-container" id="popularContainer"></div>
</div>

<!-- FAQ - single expand -->
<div class="post-article-section fade-up-section" id="faqSection">
    <h2 class="section-title">Frequently Asked Questions</h2>
    <div class="faq-container" id="faqContainer">
        <div class="faq-item">
            <div class="faq-question">Is nuclear technology safe for the environment? <i class="fas fa-chevron-down"></i></div>
            <div class="faq-answer">Yes, when properly regulated. Nuclear technology offers clean energy and innovative solutions for environmental monitoring and protection.</div>
        </div>
        <div class="faq-item">
            <div class="faq-question">How does e-beam wastewater treatment work? <i class="fas fa-chevron-down"></i></div>
            <div class="faq-answer">Electron beams break down harmful pollutants in water without chemicals, creating a safe and efficient treatment process.</div>
        </div>
        <div class="faq-item">
            <div class="faq-question">What is blue carbon? <i class="fas fa-chevron-down"></i></div>
            <div class="faq-answer">Carbon stored in coastal ecosystems like mangroves and seagrass. Nuclear techniques help track and measure this storage.</div>
        </div>
        <div class="faq-item">
            <div class="faq-question">Can nuclear energy replace fossil fuels? <i class="fas fa-chevron-down"></i></div>
            <div class="faq-answer">Nuclear power provides reliable, carbon-free baseload electricity and complements renewable energy sources.</div>
        </div>
        <div class="faq-item">
            <div class="faq-question">What is the sterile insect technique? <i class="fas fa-chevron-down"></i></div>
            <div class="faq-answer">Using radiation to sterilize insects, reducing pest populations naturally without pesticides.</div>
        </div>
    </div>
</div>

<!-- COMMENTS (LocalStorage) -->
<div class="post-article-section fade-up-section" id="commentsSection">
    <div class="section-header">
        <h2 class="section-title">Leave a Note</h2>
        <button class="delete-all-btn hidden" id="deleteAllComments"><i class="fas fa-trash"></i> Delete All</button>
    </div>
    <div class="comment-form">
        <input type="text" id="commentName" class="comment-input" placeholder="Your name" maxlength="50">
        <textarea id="commentText" class="comment-input" rows="3" placeholder="Your thoughts..." maxlength="500"></textarea>
        <button class="comment-submit" id="submitComment">Save Comment</button>
    </div>
    <div class="comments-grid" id="commentsList"></div>
    <button class="view-all-btn hidden" id="viewAllComments">View All Comments <i class="fas fa-chevron-down"></i></button>
</div>

<!-- FOOTER SECTION - FULL WIDTH, NO BORDERS -->
<div class="footer-container">
    <div class="footer-top-row">
        <div class="footer-card">
            <div class="mb-3 px-4">
                <span class="feature-badge text-xs font-medium px-3 py-1 rounded-full text-[#12ABB0] inline-flex items-center gap-1 mb-3">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"/>
                    </svg>
                    FOLLOW US
                </span>
            </div>
            <h3 class="text-white font-bold text-lg mb-4 px-4">
                Join Our Science & Tech Community
            </h3>
            <div class="grid grid-cols-5 gap-3 mb-5 px-4">
                <a href="https://facebook.com" class="social-icon facebook-bg group" aria-label="Facebook" title="Facebook">
                    <svg width="28px" height="28px" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg">
                        <path fill="white" d="M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z"/>
                    </svg>
                </a>
                <a href="https://twitter.com" class="social-icon twitter-bg group" aria-label="X (Twitter)" title="X (Twitter)">
                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                    </svg>
                </a>
                <a href="https://instagram.com" class="social-icon instagram-bg group" aria-label="Instagram" title="Instagram">
                    <svg width="24px" height="24px" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg">
                        <path fill="white" d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.074-4.947c-.061-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.45-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/>
                    </svg>
                </a>
                <a href="https://linkedin.com" class="social-icon linkedin-bg group" aria-label="LinkedIn" title="LinkedIn">
                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                    </svg>
                </a>
                <a href="https://youtube.com" class="social-icon youtube-bg group" aria-label="YouTube" title="YouTube">
                    <svg class="w-7 h-7 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M23.498 6.186a3.016 3.016 0 00-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505a3.017 3.017 0 00-2.122 2.136C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 002.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 002.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                    </svg>
                </a>
            </div>
            <div class="mt-5 space-y-2 px-4">
                <div class="flex items-center gap-2 text-sm">
                    <svg class="w-4 h-4 text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    <span class="text-gray-300">Daily tech news & updates</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                    <svg class="w-4 h-4 text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    <span class="text-gray-300">Exclusive behind-the-scenes content</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                    <svg class="w-4 h-4 text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    <span class="text-gray-300">Live Q&A sessions with tech experts</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                    <svg class="w-4 h-4 text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    <span class="text-gray-300">Community discussions & tech debates</span>
                </div>
            </div>
            <p class="text-sm text-gray-300 mt-4 px-4">
                Connect with us for daily tech updates and discussions
            </p>
        </div>
        <div class="footer-card">
            <div class="mb-2 px-4">
                <span class="feature-badge text-xs font-medium px-3 py-1 rounded-full text-[#12ABB0] inline-flex items-center gap-1 mb-3">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" />
                        <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
                    </svg>
                    NEWSLETTER
                </span>
            </div>
            <h3 class="text-white font-bold text-xl mb-3 px-4">
                Stay Ahead in Tech
            </h3>
            <p class="text-gray-300 mb-4 text-sm px-4">
                Get the latest tech news delivered directly to your inbox
            </p>
            <form class="space-y-4 px-4" id="newsletterForm">
                <div class="flex flex-col gap-3">
                    <input
                        type="email"
                        placeholder="your.email@example.com"
                        required
                        class="newsletter-input flex-grow px-4 py-3 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#12ABB0]"
                    >
                    <button
                        type="submit"
                        class="newsletter-btn px-6 py-3 rounded-lg font-medium text-white"
                    >
                        Subscribe
                    </button>
                </div>
            </form>
            <div class="mt-5 space-y-2 px-4">
                <div class="flex items-center gap-2 text-sm">
                    <svg class="w-4 h-4 text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    <span class="text-gray-300">Daily tech news digest</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                    <svg class="w-4 h-4 text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    <span class="text-gray-300">Exclusive analysis & insights</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                    <svg class="w-4 h-4 text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    <span class="text-gray-300">Weekly roundup of top stories</span>
                </div>
            </div>
            <p class="text-xs text-gray-500 mt-4 px-4">
                We respect your privacy. No spam. Unsubscribe anytime.
            </p>
        </div>
    </div>
    <div class="footer-card quick-links-card">
        <h4 class="text-white font-medium mb-4 px-4">Quick Links</h4>
        <div class="quick-links-grid px-4">
            <div>
                <h5 class="text-sm font-semibold text-[#12ABB0] mb-2 flex items-center gap-1">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    Information
                </h5>
                <ul class="space-y-2">
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>
                        <span class="text-gray-300">About Us</span>
                    </a></li>
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                        </svg>
                        <span class="text-gray-300">Categories</span>
                    </a></li>
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/>
                        </svg>
                        <span class="text-gray-300">Archive</span>
                    </a></li>
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <span class="text-gray-300">FAQs</span>
                    </a></li>
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                        </svg>
                        <span class="text-gray-300">Contact Us</span>
                    </a></li>
                </ul>
            </div>
            <div>
                <h5 class="text-sm font-semibold text-[#12ABB0] mb-2 flex items-center gap-1">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                    </svg>
                    Legal
                </h5>
                <ul class="space-y-2">
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                        </svg>
                        <span class="text-gray-300">Privacy Policy</span>
                    </a></li>
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        <span class="text-gray-300">T & C</span>
                    </a></li>
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.346 16.5c-.77.833.192 2.5 1.732 2.5z"/>
                        </svg>
                        <span class="text-gray-300">Disclaimer</span>
                    </a></li>
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v14a2 2 0 002 2H16a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                        </svg>
                        <span class="text-gray-300">Write for Us</span>
                    </a></li>
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"/>
                        </svg>
                        <span class="text-gray-300">Advertise with Us</span>
                    </a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- BOTTOM FOOTER -->
<footer class="bg-[#0a0e1a] text-gray-400 py-6 text-center" style="background-color: #0a0e1a !important;">
    <div class="container-max-width" style="max-width: 1400px; margin: 0 auto;">
        <div class="mb-3">
            <a href="#" class="text-xl font-bold tracking-tight text-white inline-block">
                <span class="gradient-text">TechTonic</span><span class="text-white"> Times</span>
            </a>
        </div>
        <p class="text-sm">&copy; 2026 TechTonic Times. All rights reserved. |
            <a href="#" class="hover:text-[#12ABB0]">Privacy Policy</a> |
            <a href="#" class="hover:text-[#12ABB0]">Terms of Service</a>
        </p>
    </div>
</footer>

<!-- FONT AWESOME FOR ICONS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
<script>
// ====== TIMESTAMP FUNCTION (clean + consistent) ======
function formatTimestamp(articleTime) {
    const now = new Date();
    const diffMs = now - articleTime;
    if (diffMs <= 0) return "Just Now";
    const seconds = Math.floor(diffMs / 1000);
    if (seconds < 60) return "Just Now";
    const minutes = Math.floor(seconds / 60);
    if (minutes < 60)
        return `${minutes} ${minutes === 1 ? "minute" : "minutes"} ago`;
    const hours = Math.floor(minutes / 60);
    if (hours < 24)
        return `${hours} ${hours === 1 ? "hour" : "hours"} ago`;
    const days = Math.floor(hours / 24);
    if (days < 7)
        return `${days} ${days === 1 ? "day" : "days"} ago`;
    if (days < 28) {
        const weeks = Math.floor(days / 7);
        return `${weeks} ${weeks === 1 ? "week" : "weeks"} ago`;
    }
    if (days >= 365) {
        const day = String(articleTime.getDate()).padStart(2, "0");
        const month = articleTime.toLocaleString("en-US", { month: "short" });
        const year = articleTime.getFullYear();
        return `${day} ${month}, ${year}`;
    }
    const months = Math.min(11, Math.floor(days / 30));
    return `${months} ${months === 1 ? "month" : "months"} ago`;
}

// ====== ARTICLE DATA WITH PUBLICATION DATES ======

const youMayLikeArticles = [
    {
        title: "Fusion Energy: The Clean Power Breakthrough We've Been Waiting For",
        description: "Recent advances in nuclear fusion technology bring us closer to unlimited clean energy. Scientists achieve net energy gain in historic experiment.",
        image: "https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
        link: "https://techtonic-times.github.io/fusion-energy-breakthrough",
        date: new Date('2026-02-14T14:30:00')
    },
    {
        title: "How Cosmic Rays Help Scientists Track Glacier Melt in Real-Time",
        description: "Innovative muon detectors are revolutionizing how we monitor climate change impact on polar ice caps and mountain glaciers.",
        image: "https://images.unsplash.com/photo-1621451537084-48218bbdc1d8?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
        link: "https://techtonic-times.github.io/cosmic-ray-glacier-monitoring",
        date: new Date('2025-11-13T10:15:00')
    },
    {
        title: "Sterile Insect Technique: The Nuclear Solution to Crop Protection",
        description: "How radiation is being used to combat agricultural pests without harmful pesticides, protecting both crops and ecosystems.",
        image: "https://images.unsplash.com/photo-1532187863486-abf9dbad1b5a?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
        link: "https://techtonic-times.github.io/sterile-insect-technique",
        date: new Date('2025-11-12T08:00:00')
    }
];

// Related articles (3)
const relatedArticles = [
    {
        title: "Small Modular Reactors: The Future of Clean Energy?",
        description: "How SMRs are reshaping nuclear power with flexibility and safety, offering carbon-free electricity for remote communities.",
        image: "https://images.unsplash.com/photo-1558449028-b53a39d100fc?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
        link: "https://techtonic-times.github.io/smr-future",
        date: new Date('2026-02-10T11:20:00')
    },
    {
        title: "Nuclear Techniques Unlock Ocean's Carbon Storage Secrets",
        description: "Isotopic tracing reveals how much carbon mangroves and seagrass meadows actually lock away – vital for climate models.",
        image: "https://images.unsplash.com/photo-1621451537084-48218bbdc1d8?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
        link: "https://techtonic-times.github.io/ocean-carbon",
        date: new Date('2026-02-08T09:45:00')
    },
    {
        title: "From Nuclear Waste to Clean Fuel: New Recycling Method",
        description: "Advanced reprocessing techniques could turn nuclear waste into valuable energy sources, reducing long-term storage needs.",
        image: "https://images.unsplash.com/photo-1581091226033-d5c48150dbaa?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
        link: "https://techtonic-times.github.io/waste-recycle",
        date: new Date('2026-02-05T13:15:00')
    }
];

// Last week's popular (3)
const popularArticles = [
    {
        title: "Fusion Ignition Achieved: What It Means for Clean Power",
        description: "Scientists repeat ignition experiments, bringing commercial fusion one step closer. Experts weigh in on timelines.",
        image: "https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
        link: "https://techtonic-times.github.io/fusion-ignition",
        date: new Date('2026-02-01T10:00:00')
    },
    {
        title: "How Nuclear Science Is Saving the World's Chocolate Supply",
        description: "Sterile insect technique battles cocoa pests in West Africa, protecting crops and farmers' livelihoods without chemicals.",
        image: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhdjwrQgBZTwtEXOjT874wYilASg9bFbW3xscjOX-6gpB3vDcuI0PcD-EBUmHkDflaposqV5BF8xEGK3aGQl7M0e9WA9fGv9uIM5XYcTW36jqh061ulEoTPd7HPWkwGKqkKbb3EgbwY1OP15F3tjOlj4nvnvU6sC3kIwQYeHsQtSarEcVg/s1600/pexels-vedih-akbas-99816515-12543917.jpg",
        link: "https://techtonic-times.github.io/chocolate-supply",
        date: new Date('2026-01-28T14:30:00')
    },
    {
        title: "E‑beam Treatment Cleans Pharmaceuticals from Water",
        description: "New study shows electron beams effectively break down antibiotics and painkillers in wastewater, preventing resistance.",
        image: "https://images.unsplash.com/photo-1581091226033-d5c48150dbaa?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
        link: "https://techtonic-times.github.io/ebeam-pharma",
        date: new Date('2026-01-26T08:20:00')
    }
];

// ====== UPDATE ALL TIMESTAMPS ======
function updateAllTimestamps() {
    const mainDateSpan = document.getElementById('mainArticleDate');
    if (mainDateSpan) {
        mainDateSpan.textContent = formatTimestamp(mainArticleDate);
    }
}

// ---------- THEME WITH ANIMATION ----------
const themeToggle = document.getElementById('themeToggle');
const body = document.body;
const savedTheme = localStorage.getItem('theme');
const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
const isDark = savedTheme === 'dark' || (!savedTheme && systemPrefersDark);

function applyTheme(dark) {
    if (dark) body.classList.add('dark-mode');
    else body.classList.remove('dark-mode');
    localStorage.setItem('theme', dark ? 'dark' : 'light');
}

applyTheme(isDark);

// ====== DARK MODE FUNCTIONALITY WITH VIEW TRANSITION ======
async function toggleTheme() {
if (!document.startViewTransition) {
body.classList.toggle('dark-mode');
localStorage.setItem('theme', body.classList.contains('dark-mode') ? 'dark' : 'light');
return;
}
await document.startViewTransition(() => {
body.classList.toggle('dark-mode');
localStorage.setItem('theme', body.classList.contains('dark-mode') ? 'dark' : 'light');
}).ready;
const { top, left, width, height } = themeToggle.getBoundingClientRect();
const x = left + width / 2;
const y = top + height / 2;
const maxRadius = Math.hypot(
Math.max(left, innerWidth - left),
Math.max(top, innerHeight - top)
);
document.documentElement.animate({
clipPath: [
`circle(0px at ${x}px ${y}px)`,
`circle(${maxRadius}px at ${x}px ${y}px)`
]
}, {
duration: 1000,
easing: 'ease-in-out',
pseudoElement: '::view-transition-new(root)'
});
}
// Add event listener
themeToggle.addEventListener('click', toggleTheme);
// ---------- SCROLL ----------
// ====== SCROLL INDICATOR WITH FADE ON SCROLL ======
let scrollTimeout;
const scrollIndicator = document.querySelector('.scroll-indicator');
const progressEl = document.getElementById('scrollProgress');

function updateScrollIndicator() {
    // Calculate scroll progress
    const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
    const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    const scrolled = (winScroll / height) * 100;
    
    // Update progress bar width
    if (progressEl) progressEl.style.width = scrolled + '%';
    
    // Show indicator when scrolling
    if (scrollIndicator) {
        scrollIndicator.classList.add('visible');
        
        // Clear existing timeout
        clearTimeout(scrollTimeout);
        
        // Set new timeout to hide after 400ms of no scrolling
        scrollTimeout = setTimeout(() => {
            scrollIndicator.classList.remove('visible');
        }, 300);
    }
}

// Throttle the scroll event for better performance
let isScrolling = false;
window.addEventListener('scroll', () => {
    if (!isScrolling) {
        window.requestAnimationFrame(() => {
            updateScrollIndicator();
            isScrolling = false;
        });
        isScrolling = true;
    }
});

// Also update on load and ensure it's visible briefly
window.addEventListener('load', () => {
    updateScrollIndicator();
    // Show indicator briefly on load, then fade out after 1 second
    if (scrollIndicator) {
        scrollIndicator.classList.add('visible');
        setTimeout(() => {
            scrollIndicator.classList.remove('visible');
        }, 1000);
    }
});

// Initial call
updateScrollIndicator();
// ---------- SECTION REVEAL ON SCROLL ----------
function checkVisibility() {
    const sections = document.querySelectorAll('.fade-up-section');
    const windowHeight = window.innerHeight;
    sections.forEach(section => {
        const rect = section.getBoundingClientRect();
        const isVisible = rect.top < windowHeight - 100 && rect.bottom > 50;
        if (isVisible) {
            section.classList.add('visible');
        }
    });
}

// Initial check
window.addEventListener('load', checkVisibility);
window.addEventListener('scroll', checkVisibility);
window.addEventListener('resize', checkVisibility);
setTimeout(checkVisibility, 100); // Double check after content loads

// ---------- MENU FUNCTIONALITY ----------
const menuToggle = document.getElementById('menuToggle');
const menuCard = document.getElementById('menuCard');
const menuClose = document.getElementById('menuClose');
const backdrop = document.getElementById('backdrop');

function openMenu() {
    menuCard.classList.add('open');
    backdrop.classList.add('visible');
    document.body.style.overflow = 'hidden';
    menuToggle.style.opacity = '0';
    menuToggle.style.visibility = 'hidden';
    menuToggle.style.transform = 'scale(0.8)';
}

function closeMenu() {
    menuCard.classList.remove('open');
    backdrop.classList.remove('visible');
    document.body.style.overflow = '';
    menuToggle.style.opacity = '1';
    menuToggle.style.visibility = 'visible';
    menuToggle.style.transform = 'scale(1)';
    const dropdownParent = document.querySelector('.dropdown-parent');
    if (dropdownParent) {
        dropdownParent.classList.remove('active');
    }
}

if (menuToggle) {
    menuToggle.addEventListener('click', (e) => {
        e.stopPropagation();
        if (menuCard.classList.contains('open')) {
            closeMenu();
        } else {
            openMenu();
        }
    });
}

if (menuClose) {
    menuClose.addEventListener('click', closeMenu);
}

if (backdrop) {
    backdrop.addEventListener('click', closeMenu);
}

document.querySelectorAll('.menu-link:not(.dropdown-toggle)').forEach(link => {
    link.addEventListener('click', closeMenu);
});

// Dropdown functionality
const dropdownToggle = document.querySelector('.dropdown-toggle');
const dropdownParent = document.querySelector('.dropdown-parent');
if (dropdownToggle) {
    dropdownToggle.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        dropdownParent.classList.toggle('active');
        return false;
    });
}

document.querySelectorAll('.dropdown-item').forEach(item => {
    item.addEventListener('click', function(e) {
        e.stopPropagation();
        if (dropdownParent) {
            dropdownParent.classList.remove('active');
        }
    });
});

document.addEventListener('click', function(e) {
    if (dropdownParent && !dropdownParent.contains(e.target) && dropdownParent.classList.contains('active')) {
        dropdownParent.classList.remove('active');
    }
    if (menuCard && menuToggle && !menuCard.contains(e.target) &&
        !menuToggle.contains(e.target) &&
        e.target !== menuToggle &&
        menuCard.classList.contains('open')) {
        closeMenu();
    }
});

// ---------- NEWSLETTER MODAL ----------
const newsletterForm = document.getElementById('newsletterForm');
const newsletterModal = document.getElementById('newsletterModal');
const newsletterModalClose = document.getElementById('newsletterModalClose');

if (newsletterForm) {
    newsletterForm.addEventListener('submit', function(e) {
        e.preventDefault();
        if (newsletterModal) {
            newsletterModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        this.reset();
        return false;
    });
}

if (newsletterModalClose) {
    newsletterModalClose.addEventListener('click', function() {
        newsletterModal.classList.remove('active');
        document.body.style.overflow = '';
    });
}

if (newsletterModal) {
    newsletterModal.addEventListener('click', function(e) {
        if (e.target === newsletterModal) {
            newsletterModal.classList.remove('active');
            document.body.style.overflow = '';
        }
    });
}

// ---------- TOOLBAR ----------
const toolbar = document.getElementById('toolbar');
let currentActiveIcon = null;

// Reaction state
let selectedReactionEmoji = localStorage.getItem('selectedReaction') || '❤️';

function updateReactionIcon(emoji) {
    const likeSpan = document.getElementById('likeEmoji');
    if (likeSpan) {
        if (emoji === '👍') likeSpan.innerHTML = '<i class="fa-regular fa-thumbs-up"></i>';
        else if (emoji === '❤️') likeSpan.innerHTML = '<i class="fas fa-heart"></i>';
        else if (emoji === '😮') likeSpan.innerHTML = '<i class="fa-regular fa-face-surprise"></i>';
        else if (emoji === '😢') likeSpan.innerHTML = '<i class="fa-regular fa-face-sad-tear"></i>';
        else if (emoji === '😠') likeSpan.innerHTML = '<i class="fa-regular fa-face-angry"></i>';
    }
    localStorage.setItem('selectedReaction', emoji);
}

updateReactionIcon(selectedReactionEmoji);

// Language support – English, Spanish, Hindi only
let currentLang = 'en';
const translations = {
    en: {
        title: 'Six Ways Nuclear Science and Technology Are Protecting Our Planet',
        // All paragraphs
        p1: 'As global leaders, international organizations, scientists, business representatives and climate activists convene in Belém for COP30, the IAEA is showcasing how nuclear science and technology are driving solutions to environmental challenges. Nuclear science not only provides the world with reliable clean energy, but also helps scientists monitor and protect ecosystems, enhance food security and reduce pollution.',
        p2: 'At the IAEA Atoms4Climate Pavilion, visitors can see these innovations in action. In Brazil, for example, electron beam (e-beam) technology is transforming industrial wastewater treatment. In Latin America, countries are using nuclear techniques to control pests, safeguard crops and food exports.',
        p3: 'Treating wastewater contaminated by industrial pollutants remains a major challenge for many countries. Through its support for electron beam (e-beam) technology, the IAEA is helping countries develop innovative, chemical-free solutions that break down complex contaminants and improve water quality.',
        p4: 'Supported by the IAEA and Brazil\'s Innovation Agency (FINEP), a mobile unit equipped with an electron beam accelerator is being deployed in Brazil to treat industrial wastewater, improving water quality and environmental protection.',
        p5: 'As the world seeks new solutions for clean energy, fusion energy research is gaining momentum. At COP30, the IAEA is presenting the current state of fusion research and development, including progress on the international ITER project — the world\'s largest fusion experiment based in France.',
        p6: 'The session provides an overview of the current state of fusion energy including developments across various international, national and private projects, and insights from the IAEA World Fusion Outlook 2025.',
        p7: 'Building on the outcomes of the first Global Stocktake at COP28, the IAEA supports countries in identifying pathways to accelerate the deployment of nuclear power together with renewables as well as emissions abatement and removal technologies, particularly in hard to abate sectors and low-carbon hydrogen production.',
        p8: 'The intersection of nuclear science and environmental protection represents one of the most promising frontiers in sustainable technology. From cleaning our water to monitoring climate impacts and developing next-generation clean energy, nuclear applications are proving essential to addressing the complex environmental challenges of our time.',
        p9: 'As demonstrated at COP30, these technologies are not futuristic concepts but practical solutions being deployed today across multiple continents. The ongoing development and scaling of these applications will be crucial to achieving global sustainability goals and building a resilient future for our planet.',
        // ALL Headings (H2)
        h2_1: 'The Six Revolutionary Applications',
        h2_2: 'Future Energy Solutions',
        h2_3: 'Conclusion',
        // H3 Headings (FIXED - Added h3_2)
        h3_1: 'Key Insights',
        h3_2: 'Financing Strategies for Low Carbon Energy Sources',
        // Key Insights
        key_title1: 'Chemical-free water detox',
        key_desc1: 'E-beam technology breaks down industrial pollutants without chemicals – mobile unit deployed in Brazil treats wastewater, protecting rivers and communities.',
        key_title2: 'Blue carbon & climate monitoring',
        key_desc2: 'IAEA\'s isotopic techniques track carbon storage in mangroves/seagrass; cosmic ray sensors measure glacier melt in Andes to secure freshwater for millions.',
        key_title3: 'Sterile insect & fusion energy',
        key_desc3: 'SIT eradicates pests without pesticides; ITER fusion research & SMRs accelerate clean baseload power – financing strategies at COP30.',
        // Highlight boxes
        highlight1_title: 'Important point',
        highlight1_text: 'Nuclear applications extend far beyond energy production, offering innovative solutions for water treatment, ecosystem monitoring, sustainable agriculture, and climate change mitigation.',
        highlight2_title: 'Emerging Technology',
        highlight2_text: 'Accelerating deployment of small modular reactors (SMRs) is also in the spotlight at COP. SMRs offer flexible, cost-effective options for powering small energy grids, making them suitable for energy-intensive industries, data centres and commercial ships. An IAEA event will explore approaches to SMR financing, policy and regulation.'
    },
    es: {
        title: 'Seis formas en que la ciencia y la tecnología nucleares protegen nuestro planeta',
        // All paragraphs
        p1: 'Mientras líderes mundiales, organizaciones internacionales, científicos, representantes empresariales y activistas climáticos se reúnen en Belém para la COP30, el OIEA muestra cómo la ciencia y la tecnología nucleares impulsan soluciones a los desafíos ambientales. La ciencia nuclear no solo proporciona al mundo energía limpia confiable, sino que también ayuda a los científicos a monitorear y proteger ecosistemas, mejorar la seguridad alimentaria y reducir la contaminación.',
        p2: 'En el Pabellón Atoms4Climate del OIEA, los visitantes pueden ver estas innovaciones en acción. En Brasil, por ejemplo, la tecnología de haz de electrones está transformando el tratamiento de aguas residuales industriales. En América Latina, los países utilizan técnicas nucleares para controlar plagas, proteger cultivos y exportaciones de alimentos.',
        p3: 'El tratamiento de aguas residuales contaminadas por contaminantes industriales sigue siendo un desafío importante para muchos países. A través de su apoyo a la tecnología de haz de electrones, el OIEA ayuda a los países a desarrollar soluciones innovadoras y sin químicos que descomponen contaminantes complejos y mejoran la calidad del agua.',
        p4: 'Con el apoyo del OIEA y la Agencia de Innovación de Brasil (FINEP), se está desplegando una unidad móvil equipada con un acelerador de haz de electrones en Brasil para tratar aguas residuales industriales, mejorando la calidad del agua y la protección ambiental.',
        p5: 'A medida que el mundo busca nuevas soluciones para la energía limpia, la investigación sobre energía de fusión está ganando impulso. En la COP30, el OIEA presenta el estado actual de la investigación y el desarrollo de la fusión, incluido el progreso del proyecto internacional ITER, el experimento de fusión más grande del mundo con sede en Francia.',
        p6: 'La sesión proporciona una visión general del estado actual de la energía de fusión, incluidos los desarrollos en varios proyectos internacionales, nacionales y privados, y las perspectivas del World Fusion Outlook 2025 del OIEA.',
        p7: 'Basándose en los resultados del primer Balance Global en la COP28, el OIEA apoya a los países en la identificación de vías para acelerar el despliegue de la energía nuclear junto con las energías renovables, así como las tecnologías de reducción y eliminación de emisiones, particularmente en sectores difíciles de reducir y la producción de hidrógeno bajo en carbono.',
        p8: 'La intersección de la ciencia nuclear y la protección ambiental representa una de las fronteras más prometedoras en la tecnología sostenible. Desde la limpieza de nuestras aguas hasta el monitoreo de los impactos climáticos y el desarrollo de energía limpia de próxima generación, las aplicaciones nucleares están demostrando ser esenciales para abordar los complejos desafíos ambientales de nuestro tiempo.',
        p9: 'Como se demostró en la COP30, estas tecnologías no son conceptos futuristas sino soluciones prácticas que se están implementando hoy en múltiples continentes. El desarrollo continuo y la ampliación de estas aplicaciones serán cruciales para lograr los objetivos de sostenibilidad global y construir un futuro resiliente para nuestro planeta.',
        // ALL Headings (H2)
        h2_1: 'Las Seis Aplicaciones Revolucionarias',
        h2_2: 'Soluciones Energéticas del Futuro',
        h2_3: 'Conclusión',
        // H3 Headings (FIXED - Added h3_2)
        h3_1: 'Ideas clave',
        h3_2: 'Estrategias de Financiación para Fuentes de Energía Bajas en Carbono',
        // Key Insights
        key_title1: 'Desintoxicación del agua sin químicos',
        key_desc1: 'La tecnología de haz de electrones descompone los contaminantes industriales sin químicos: una unidad móvil desplegada en Brasil trata aguas residuales, protegiendo ríos y comunidades.',
        key_title2: 'Carbono azul y monitoreo climático',
        key_desc2: 'Las técnicas isotópicas del OIEA rastrean el almacenamiento de carbono en manglares/pastos marinos; los sensores de neutrones de rayos cósmicos miden el deshielo de los glaciares en los Andes para asegurar agua dulce para millones.',
        key_title3: 'Insecto estéril y energía de fusión',
        key_desc3: 'La TIE erradica plagas sin pesticidas; la investigación de fusión del ITER y los SMR aceleran la energía de carga base limpia: estrategias de financiación en la COP30.',
        // Highlight boxes
        highlight1_title: 'Punto importante',
        highlight1_text: 'Las aplicaciones nucleares se extienden mucho más allá de la producción de energía, ofreciendo soluciones innovadoras para el tratamiento de agua, monitoreo de ecosistemas, agricultura sostenible y mitigación del cambio climático.',
        highlight2_title: 'Tecnología emergente',
        highlight2_text: 'La aceleración del despliegue de pequeños reactores modulares también está en el centro de atención en la COP. Los SMR ofrecen opciones flexibles y rentables para alimentar pequeñas redes eléctricas, lo que los hace adecuados para industrias de uso intensivo de energía, centros de datos y barcos comerciales. Un evento del OIEA explorará enfoques para la financiación, políticas y regulación de los SMR.'
    },
    hi: {
        title: 'परमाणु विज्ञान और प्रौद्योगिकी हमारे ग्रह की रक्षा के छह तरीके',
        // All paragraphs
        p1: 'जैसे ही वैश्विक नेता, अंतर्राष्ट्रीय संगठन, वैज्ञानिक, व्यापार प्रतिनिधि और जलवायु कार्यकर्ता बेलेम में COP30 के लिए एकत्र होते हैं, IAEA दिखा रहा है कि कैसे परमाणु विज्ञान और प्रौद्योगिकी पर्यावरणीय चुनौतियों का समाधान कर रहे हैं। परमाणु विज्ञान न केवल दुनिया को विश्वसनीय स्वच्छ ऊर्जा प्रदान करता है, बल्कि वैज्ञानिकों को पारिस्थितिक तंत्र की निगरानी और सुरक्षा, खाद्य सुरक्षा बढ़ाने और प्रदूषण कम करने में भी मदद करता है।',
        p2: 'IAEA के Atoms4Climate मंडप में, आगंतुक इन नवाचारों को क्रियाशील देख सकते हैं। ब्राजील में, उदाहरण के लिए, इलेक्ट्रॉन बीम तकनीक औद्योगिक अपशिष्ट जल उपचार को बदल रही है। लैटिन अमेरिका में, देश कीटों को नियंत्रित करने, फसलों और खाद्य निर्यात की सुरक्षा के लिए परमाणु तकनीकों का उपयोग कर रहे हैं।',
        p3: 'औद्योगिक प्रदूषकों से दूषित अपशिष्ट जल का उपचार कई देशों के लिए एक बड़ी चुनौती बनी हुई है। इलेक्ट्रॉन बीम तकनीक के लिए अपने समर्थन के माध्यम से, IAEA देशों को नवीन, रासायनिक मुक्त समाधान विकसित करने में मदद कर रहा है जो जटिल संदूषकों को तोड़ते हैं और पानी की गुणवत्ता में सुधार करते हैं।',
        p4: 'IAEA और ब्राजील की नवाचार एजेंसी (FINEP) के समर्थन से, इलेक्ट्रॉन बीम त्वरक से सुसज्जित एक मोबाइल इकाई ब्राजील में औद्योगिक अपशिष्ट जल के उपचार के लिए तैनात की जा रही है, जिससे पानी की गुणवत्ता और पर्यावरण संरक्षण में सुधार हो रहा है।',
        p5: 'जैसे-जैसे दुनिया स्वच्छ ऊर्जा के लिए नए समाधान तलाश रही है, फ्यूजन ऊर्जा अनुसंधान गति पकड़ रहा है। COP30 में, IAEA फ्यूजन अनुसंधान और विकास की वर्तमान स्थिति प्रस्तुत कर रहा है, जिसमें अंतर्राष्ट्रीय ITER परियोजना की प्रगति भी शामिल है - जो फ्रांस में स्थित दुनिया का सबसे बड़ा फ्यूजन प्रयोग है।',
        p6: 'सत्र फ्यूजन ऊर्जा की वर्तमान स्थिति का एक सिंहावलोकन प्रदान करता है जिसमें विभिन्न अंतर्राष्ट्रीय, राष्ट्रीय और निजी परियोजनाओं में विकास और IAEA विश्व फ्यूजन आउटलुक 2025 की अंतर्दृष्टि शामिल है।',
        p7: 'COP28 में पहले ग्लोबल स्टॉकटेक के परिणामों पर निर्माण करते हुए, IAEA देशों को नवीकरणीय ऊर्जा के साथ-साथ उत्सर्जन में कमी और हटाने की प्रौद्योगिकियों, विशेष रूप से कम करने में मुश्किल क्षेत्रों और कम कार्बन हाइड्रोजन उत्पादन में परमाणु ऊर्जा की तैनाती में तेजी लाने के मार्गों की पहचान करने में सहायता करता है।',
        p8: 'परमाणु विज्ञान और पर्यावरण संरक्षण का प्रतिच्छेदन सतत प्रौद्योगिकी में सबसे आशाजनक सीमाओं में से एक का प्रतिनिधित्व करता है। हमारे पानी की सफाई से लेकर जलवायु प्रभावों की निगरानी और अगली पीढ़ी की स्वच्छ ऊर्जा विकसित करने तक, परमाणु अनुप्रयोग हमारे समय की जटिल पर्यावरणीय चुनौतियों का समाधान करने के लिए आवश्यक साबित हो रहे हैं।',
        p9: 'जैसा कि COP30 में प्रदर्शित किया गया, ये प्रौद्योगिकियां भविष्यवादी अवधारणाएं नहीं हैं बल्कि व्यावहारिक समाधान हैं जिन्हें आज कई महाद्वीपों में लागू किया जा रहा है। इन अनुप्रयोगों का निरंतर विकास और विस्तार वैश्विक स्थिरता लक्ष्यों को प्राप्त करने और हमारे ग्रह के लिए एक लचीला भविष्य बनाने के लिए महत्वपूर्ण होगा।',
        // ALL Headings (H2)
        h2_1: 'छह क्रांतिकारी अनुप्रयोग',
        h2_2: 'भविष्य के ऊर्जा समाधान',
        h2_3: 'निष्कर्ष',
        // H3 Headings (FIXED - Added h3_2)
        h3_1: 'मुख्य अंतर्दृष्टियाँ',
        h3_2: 'कम कार्बन ऊर्जा स्रोतों के लिए वित्तपोषण रणनीतियाँ',
        // Key Insights
        key_title1: 'रसायन मुक्त जल विषहरण',
        key_desc1: 'ई-बीम तकनीक रसायनों के बिना औद्योगिक प्रदूषकों को तोड़ती है - ब्राजील में तैनात मोबाइल इकाई अपशिष्ट जल का उपचार करती है, नदियों और समुदायों की रक्षा करती है।',
        key_title2: 'ब्लू कार्बन और जलवायु निगरानी',
        key_desc2: 'IAEA की समस्थानिक तकनीकें मैंग्रोव/समुद्री घास में कार्बन भंडारण को ट्रैक करती हैं; कॉस्मिक रे न्यूट्रॉन सेंसर एंडीज में ग्लेशियर पिघलने को मापते हैं ताकि लाखों लोगों के लिए मीठे पानी को सुरक्षित किया जा सके।',
        key_title3: 'बंध्य कीट और फ्यूजन ऊर्जा',
        key_desc3: 'एसआईटी कीटनाशकों के बिना कीटों को मिटाती है; आईटीईआर फ्यूजन अनुसंधान और एसएमआर स्वच्छ बेसलोड बिजली में तेजी लाते हैं - सीओपी30 में वित्तपोषण रणनीतियाँ।',
        // Highlight boxes
        highlight1_title: 'महत्वपूर्ण बिंदु',
        highlight1_text: 'परमाणु अनुप्रयोग ऊर्जा उत्पादन से कहीं आगे तक फैले हुए हैं, जो जल उपचार, पारिस्थितिकी तंत्र की निगरानी, टिकाऊ कृषि और जलवायु परिवर्तन शमन के लिए नवीन समाधान प्रदान करते हैं।',
        highlight2_title: 'उभरती हुई तकनीक',
        highlight2_text: 'छोटे मॉड्यूलर रिएक्टरों की तैनाती में तेजी लाना भी COP में सुर्खियों में है। SMR छोटे ऊर्जा ग्रिडों को बिजली देने के लिए लचीले, लागत प्रभावी विकल्प प्रदान करते हैं, जो उन्हें ऊर्जा-गहन उद्योगों, डेटा केंद्रों और वाणिज्यिक जहाजों के लिए उपयुक्त बनाते हैं। एक IAEA कार्यक्रम SMR वित्तपोषण, नीति और विनियमन के दृष्टिकोणों का पता लगाएगा।'
    }
};
function applyLanguage(lang) {
    const t = translations[lang] || translations.en;
    
    // Update title
    const titleEl = document.getElementById('articleMainTitle');
    if (titleEl) titleEl.innerText = t.title;
    
    // Update all paragraphs - Use > p for direct children only (excludes nested p in highlight boxes)
    const paras = document.querySelectorAll('#articleContent > p');
    const translations_p = [t.p1, t.p2, t.p3, t.p4, t.p5, t.p6, t.p7, t.p8, t.p9];
    
    paras.forEach((p, index) => {
        if (translations_p[index]) {
            p.innerText = translations_p[index];
        }
    });
    
    // Update ALL H2 headings - Use > h2 for direct children only
    const h2Elements = document.querySelectorAll('#articleContent > h2');
    const h2Translations = [t.h2_1, t.h2_2, t.h2_3];
    h2Elements.forEach((h2, index) => {
        if (h2Translations[index]) {
            h2.innerText = h2Translations[index];
        }
    });
    
    // Update ALL H3 headings - Use > h3 for direct children only (excludes .keypoints-title)
    const h3Elements = document.querySelectorAll('#articleContent > h3');
    const h3Translations = [t.h3_1, t.h3_2];
    h3Elements.forEach((h3, index) => {
        if (h3Translations[index]) {
            h3.innerText = h3Translations[index];
        }
    });
    
    // Update key insights
    const keyTitles = document.querySelectorAll('.keypoint-title');
    const keyDescs = document.querySelectorAll('.keypoint-description');
    const keyTitlesTrans = [t.key_title1, t.key_title2, t.key_title3];
    const keyDescsTrans = [t.key_desc1, t.key_desc2, t.key_desc3];
    
    keyTitles.forEach((kt, index) => {
        if (keyTitlesTrans[index]) kt.innerText = keyTitlesTrans[index];
    });
    keyDescs.forEach((kd, index) => {
        if (keyDescsTrans[index]) kd.innerText = keyDescsTrans[index];
    });
    
    // Update highlight boxes - properly preserves SVG icons
    const highlightBoxes = document.querySelectorAll('.highlight-box');
    const highlightTitlesTrans = [t.highlight1_title, t.highlight2_title];
    const highlightTextsTrans = [t.highlight1_text, t.highlight2_text];
    
    highlightBoxes.forEach((box, boxIndex) => {
        const title = box.querySelector('h4');
        const text = box.querySelector('p');
        
        if (title && highlightTitlesTrans[boxIndex]) {
            const existingSvg = title.querySelector('svg');
            if (existingSvg) {
                title.innerHTML = existingSvg.outerHTML + ' ' + highlightTitlesTrans[boxIndex];
            } else {
                title.innerText = highlightTitlesTrans[boxIndex];
            }
        }
        
        if (text && highlightTextsTrans[boxIndex]) {
            text.innerText = highlightTextsTrans[boxIndex];
        }
    });
    
    currentLang = lang;
}

applyLanguage(currentLang);

// Updated getArticleText function to use hidden TTS content
function getArticleText() {
    const langContent = document.querySelector(`#ttsContent div[data-lang="${currentLang}"] p`);
    
    if (langContent) {
        return langContent.innerText; // Use hidden TTS content for clean speech
    }
    
    // Fallback to title + first paragraph if hidden content not found
    const title = document.querySelector('.article-main-title h1')?.innerText || '';
    const firstPara = document.querySelector('#articleContent p')?.innerText || '';
    return title + '. ' + firstPara;
}

// Text size
let currentFontSize = 16;
function setTextSize(px) {
    const content = document.getElementById('articleContent');
    content.style.fontSize = px + 'px';
    document.querySelectorAll('.article-single-content p').forEach(p => p.style.fontSize = px + 'px');
    const label = document.getElementById('pxValue');
    if (label) label.innerText = px + 'px';
}

// Share functions
function shareAction(platform) {
    const url = encodeURIComponent(window.location.href);
    const title = encodeURIComponent('Six Ways Nuclear Science Protects Our Planet');
    let shareUrl = '';
    if (platform === 'facebook') shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
    else if (platform === 'instagram') { window.open('https://www.instagram.com/', '_blank'); return; }
    else if (platform === 'x') shareUrl = `https://twitter.com/intent/tweet?text=${title}&url=${url}`;
    else if (platform === 'linkedin') shareUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${url}`;
    else if (platform === 'reddit') shareUrl = `https://www.reddit.com/submit?url=${url}&title=${title}`;
    else if (platform === 'whatsapp') shareUrl = `https://wa.me/?text=${title}%20${url}`;
    else if (platform === 'telegram') shareUrl = `https://t.me/share/url?url=${url}&text=${title}`;
    else if (platform === 'pinterest') shareUrl = `https://pinterest.com/pin/create/button/?url=${url}&description=${title}`;
    else if (platform === 'email') shareUrl = `mailto:?subject=${title}&body=${url}`;
    else if (platform === 'hackernews') shareUrl = `https://news.ycombinator.com/submitlink?u=${url}&t=${title}`;
    if (shareUrl) window.open(shareUrl, '_blank');
}

function copyLink() {
    navigator.clipboard.writeText(window.location.href);
    const copyBtn1 = document.getElementById('copyLinkBtn');
    const copyBtn2 = document.getElementById('copyLinkBtn2');
    if (copyBtn1) { copyBtn1.innerHTML = '<i class="fas fa-check"></i>'; setTimeout(() => { copyBtn1.innerHTML = '<i class="fas fa-copy"></i>'; }, 2000); }
    if (copyBtn2) { copyBtn2.innerHTML = '<i class="fas fa-check"></i>'; setTimeout(() => { copyBtn2.innerHTML = '<i class="fas fa-copy"></i>'; }, 2000); }
}

// ---------- TTS (Text-to-Speech) with Reset Functionality ----------
let speechRate = 1.0;
let currentUtterance = null;
let progressInterval = null;
let isPlaying = false;
let ttsInitializing = false;
let availableVoices = [];

// Load voices when available
if (window.speechSynthesis) {
    window.speechSynthesis.onvoiceschanged = function() {
        availableVoices = window.speechSynthesis.getVoices();
    };
    // Initial load
    setTimeout(() => {
        availableVoices = window.speechSynthesis.getVoices();
    }, 100);
}

function getLangCode() {
    const map = {
        en: 'en-US',
        es: 'es-ES',
        hi: 'hi-IN'
    };
    return map[currentLang] || 'en-US';
}

function stopVisualizerAndProgress() {
    const vis = document.querySelector('.visualizer');
    if (vis) vis.classList.remove('animating');
    clearInterval(progressInterval);
    document.querySelector('.progress-fill').style.width = '0%';
    isPlaying = false;
}

function resetSpeech() {
    if (window.speechSynthesis) window.speechSynthesis.cancel();
    stopVisualizerAndProgress();
}

// SIMPLIFIED TOGGLE - WORKS LIKE RESET BUTTON
function toggleListen() {
    if (!window.speechSynthesis) return;
    // If currently speaking, stop and reset to beginning
    if (window.speechSynthesis.speaking) {
        window.speechSynthesis.cancel();
        stopVisualizerAndProgress();
        const listenBtn = document.getElementById('listenIconBtn');
        if (listenBtn) listenBtn.innerHTML = '<i class="fas fa-play"></i>';
        isPlaying = false;
    }
    // If not speaking, start from beginning
    else {
        startSpeech(true);
    }
}

function startSpeech(showLoading = true) {
    if (!window.speechSynthesis) { alert('TTS not supported'); return; }
    // Always cancel any ongoing speech first
    window.speechSynthesis.cancel();
    stopVisualizerAndProgress();
    const text = getArticleText();
    currentUtterance = new SpeechSynthesisUtterance(text);
    currentUtterance.rate = speechRate;
    currentUtterance.lang = getLangCode();
    currentUtterance.pitch = 1;
    currentUtterance.volume = 1;
    // Try to find a good voice for the selected language
    const langPrefix = getLangCode().split('-')[0];
    const voices = availableVoices.filter(v => v.lang.startsWith(langPrefix));
    if (voices.length > 0) {
        // Prefer Google voices (usually better quality)
        const googleVoice = voices.find(v => v.name.includes('Google'));
        currentUtterance.voice = googleVoice || voices[0];
    }
    const listenBtn = document.getElementById('listenIconBtn');
    if (showLoading && listenBtn) {
        listenBtn.innerHTML = '<span class="spinner"></span>';
        ttsInitializing = true;
    }
    const totalWords = text.split(/\s+/).length;
    const wordDuration = 60000 / (150 * speechRate);
    const totalDuration = totalWords * wordDuration;
    currentUtterance.onstart = () => {
        isPlaying = true;
        ttsInitializing = false;
        if (listenBtn) listenBtn.innerHTML = '<i class="fas fa-pause"></i>'; // Change to pause icon when playing
        const vis = document.querySelector('.visualizer');
        if (vis) vis.classList.add('animating');
        const startTime = Date.now();
        if (progressInterval) clearInterval(progressInterval);
        progressInterval = setInterval(() => {
            if (!window.speechSynthesis.speaking) {
                clearInterval(progressInterval);
                document.querySelector('.progress-fill').style.width = '0%';
                return;
            }
            const elapsed = Date.now() - startTime;
            let percent = Math.min(100, (elapsed / totalDuration) * 100);
            document.querySelector('.progress-fill').style.width = percent + '%';
        }, 100);
    };
    currentUtterance.onend = () => {
        stopVisualizerAndProgress();
        if (listenBtn) listenBtn.innerHTML = '<i class="fas fa-play"></i>'; // Reset to play icon when done
    };
    currentUtterance.onerror = (event) => {
        console.error('TTS Error:', event);
        stopVisualizerAndProgress();
        ttsInitializing = false;
        if (listenBtn) listenBtn.innerHTML = '<i class="fas fa-play"></i>';
    };
    window.speechSynthesis.speak(currentUtterance);
}

function setSpeed(rate) {
    speechRate = rate;
    document.querySelectorAll('.speed-btn').forEach(btn => {
        btn.classList.remove('active');
        if (parseFloat(btn.dataset.rate) === rate) btn.classList.add('active');
    });
    if (window.speechSynthesis.speaking) {
        window.speechSynthesis.cancel();
        stopVisualizerAndProgress();
        setTimeout(() => { startSpeech(false); }, 50);
    }
}

// Settings panel builder
function getSettingsPanel(iconType) {
    const panel = document.createElement('div'); panel.className = 'settings-panel';
    if (iconType === 'lang') {
        panel.innerHTML = `<div class="settings-item"><i class="fas fa-language"></i><span>Language:</span><select id="langSelect"><option value="en">English(Original)</option><option value="es">Español</option><option value="hi">हिन्दी</option></select></div>`;
    } else if (iconType === 'text') {
        panel.innerHTML = `<div class="settings-item"><i class="fas fa-text-height"></i><span>Size:</span><div class="text-size-slider"><input type="range" id="textSizeSlider" min="12" max="24" value="16" step="1"><span id="pxValue">16px</span></div></div>`;
    } else if (iconType === 'like') {
        panel.innerHTML = `<div class="settings-item"><span>React:</span><div class="reaction-grid"><button class="reaction-icon" data-emoji="👍"><i class="fa-regular fa-thumbs-up fa-2x"></i></button><button class="reaction-icon" data-emoji="❤️"><i class="fas fa-heart fa-2x"></i></button><button class="reaction-icon" data-emoji="😮"><i class="fa-regular fa-face-surprise fa-2x"></i></button><button class="reaction-icon" data-emoji="😢"><i class="fa-regular fa-face-sad-tear fa-2x"></i></button><button class="reaction-icon" data-emoji="😠"><i class="fa-regular fa-face-angry fa-2x"></i></button></div></div>`;
    } else if (iconType === 'share') {
        panel.innerHTML = `<div class="share-grid"><button class="social-icon" data-platform="facebook"><i class="fab fa-facebook-f"></i></button><button class="social-icon" data-platform="x"><svg class="x-logo-svg" viewBox="0 0 24 24" width="18" height="18" fill="white"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></button><button class="social-icon" data-platform="telegram"><i class="fab fa-telegram-plane"></i></button><button class="social-icon" data-platform="reddit"><i class="fab fa-reddit-alien"></i></button><button class="social-icon" data-platform="email"><i class="fas fa-envelope"></i></button><button class="copy-btn" id="copyLinkBtn"><i class="fas fa-copy"></i></button></div>`;
    } else if (iconType === 'listen') {
        panel.innerHTML = `<div class="listen-controls"><div class="listen-controls-left"><div class="visualizer"><span></span><span></span><span></span><span></span><span></span></div><div class="speed-buttons"><button class="speed-btn" data-rate="0.5">0.5</button><button class="speed-btn active" data-rate="1">1</button><button class="speed-btn" data-rate="1.5">1.5</button><button class="speed-btn" data-rate="2">2</button></div></div><div class="listen-controls-right"><div class="progress-container"><div class="progress-bar"><div class="progress-fill" style="width:0%"></div></div></div><button class="listen-icon-btn" id="listenIconBtn"><i class="fas fa-play"></i></button></div></div>`;
    }
    return panel;
}

function expandToolbar(iconType) {
    currentActiveIcon = iconType;
    document.querySelectorAll('.toolbar-icon').forEach(icon => icon.classList.add('hidden-icon'));
    toolbar.classList.remove('toolbar-collapsed'); toolbar.classList.add('toolbar-expanded');
    toolbar.innerHTML = '';
    const settingsPanel = getSettingsPanel(iconType);
    const crossBtn = document.createElement('button'); crossBtn.className = 'cross-button'; crossBtn.innerHTML = '<i class="fas fa-times"></i>';
    crossBtn.addEventListener('click', () => {
        if (iconType === 'listen') {
            speechRate = 1.0;
            resetSpeech();
        }
        collapseToolbar();
    });
    toolbar.appendChild(settingsPanel); toolbar.appendChild(crossBtn);
    attachSettingsFunctionality(iconType);
}

function collapseToolbar() {
    currentActiveIcon = null;
    toolbar.classList.remove('toolbar-expanded'); toolbar.classList.add('toolbar-collapsed');
    toolbar.innerHTML = `<div id="iconGroup" class="toolbar-icons"><button id="iconLang" class="toolbar-icon" title="Language"><i class="fas fa-language"></i></button><button id="iconTextSize" class="toolbar-icon" title="Text size"><i class="fas fa-text-height"></i></button><button id="iconLike" class="toolbar-icon" title="React"><span id="likeEmoji">${document.getElementById('likeEmoji')?.innerHTML || '<i class="fas fa-heart"></i>'}</span></button><button id="iconShare" class="toolbar-icon" title="Share"><i class="fa-solid fa-share"></i></button><button id="iconListen" class="toolbar-icon" title="Listen"><i class="fas fa-headphones-alt"></i></button></div>`;
    attachIconListeners();
    updateReactionIcon(selectedReactionEmoji);
}

function attachSettingsFunctionality(iconType) {
    if (iconType === 'lang') {
        const select = document.getElementById('langSelect');
        if (select) {
            select.value = currentLang;
            select.addEventListener('change', e => {
                applyLanguage(e.target.value);
                if (window.speechSynthesis) {
                    window.speechSynthesis.cancel();
                    resetSpeech();
                }
            });
        }
    } else if (iconType === 'text') {
        const slider = document.getElementById('textSizeSlider');
        if (slider) { slider.value = currentFontSize; setTextSize(currentFontSize); slider.addEventListener('input', e => { currentFontSize = e.target.value; setTextSize(currentFontSize); }); }
    } else if (iconType === 'like') {
        document.querySelectorAll('.reaction-icon').forEach(btn => {
            btn.addEventListener('click', e => { selectedReactionEmoji = e.currentTarget.dataset.emoji; updateReactionIcon(selectedReactionEmoji); setTimeout(collapseToolbar, 150); });
        });
    } else if (iconType === 'share') {
        document.querySelectorAll('.social-icon').forEach(btn => btn.addEventListener('click', e => { shareAction(e.currentTarget.dataset.platform); }));
        document.getElementById('copyLinkBtn')?.addEventListener('click', copyLink);
    } else if (iconType === 'listen') {
        document.querySelectorAll('.speed-btn').forEach(btn => btn.addEventListener('click', e => setSpeed(parseFloat(e.target.dataset.rate))));
        document.getElementById('listenIconBtn')?.addEventListener('click', toggleListen);
        document.querySelectorAll('.speed-btn').forEach(btn => { if (parseFloat(btn.dataset.rate) === speechRate) btn.classList.add('active'); else btn.classList.remove('active'); });
    }
}

function attachIconListeners() {
    document.getElementById('iconLang')?.addEventListener('click', () => expandToolbar('lang'));
    document.getElementById('iconTextSize')?.addEventListener('click', () => expandToolbar('text'));
    document.getElementById('iconLike')?.addEventListener('click', () => expandToolbar('like'));
    document.getElementById('iconShare')?.addEventListener('click', () => expandToolbar('share'));
    document.getElementById('iconListen')?.addEventListener('click', () => expandToolbar('listen'));
}

attachIconListeners();

// ---------- POST-ARTICLE FUNCTIONALITY ----------
// Share buttons (second set)
document.querySelectorAll('.share-section .share-icon-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
        const platform = e.currentTarget.dataset.platform;
        if (platform) shareAction(platform);
    });
});

document.getElementById('copyLinkBtn2')?.addEventListener('click', copyLink);

// Mini Quiz with localStorage
const quiz1Radios = document.querySelectorAll('input[name="quiz1"]');
const quiz2Radios = document.querySelectorAll('input[name="quiz2"]');
const quiz1Feedback = document.getElementById('quiz1Feedback');
const quiz2Feedback = document.getElementById('quiz2Feedback');

// Load saved quiz answers
const savedQuiz1 = localStorage.getItem('quiz1');
const savedQuiz2 = localStorage.getItem('quiz2');

if (savedQuiz1) {
    quiz1Radios.forEach(radio => {
        if (radio.value === savedQuiz1) {
            radio.checked = true;
            if (savedQuiz1 === 'correct') {
                quiz1Feedback.textContent = '✓ Correct! IAEA stands for International Atomic Energy Agency.';
                quiz1Feedback.className = 'quiz-feedback correct';
            } else {
                quiz1Feedback.textContent = '✗ Not quite. The correct answer is International Atomic Energy Agency.';
                quiz1Feedback.className = 'quiz-feedback incorrect';
            }
        }
    });
}

if (savedQuiz2) {
    quiz2Radios.forEach(radio => {
        if (radio.value === savedQuiz2) {
            radio.checked = true;
            quiz2Feedback.textContent = '✓ Thanks for sharing your perspective!';
            quiz2Feedback.className = 'quiz-feedback correct';
        }
    });
}

quiz1Radios.forEach(radio => {
    radio.addEventListener('change', (e) => {
        const value = e.target.value;
        localStorage.setItem('quiz1', value);
        if (value === 'correct') {
            quiz1Feedback.textContent = '✓ Correct! IAEA stands for International Atomic Energy Agency.';
            quiz1Feedback.className = 'quiz-feedback correct';
        } else {
            quiz1Feedback.textContent = '✗ Not quite. The correct answer is International Atomic Energy Agency.';
            quiz1Feedback.className = 'quiz-feedback incorrect';
        }
    });
});

quiz2Radios.forEach(radio => {
    radio.addEventListener('change', (e) => {
        const value = e.target.value;
        localStorage.setItem('quiz2', value);
        quiz2Feedback.textContent = '✓ Thanks for sharing your perspective!';
        quiz2Feedback.className = 'quiz-feedback correct';
    });
});

// FAQ Accordion - single expand
const faqItems = document.querySelectorAll('.faq-item');
faqItems.forEach(item => {
    const question = item.querySelector('.faq-question');
    question.addEventListener('click', () => {
        const isActive = question.classList.contains('active');
        faqItems.forEach(i => {
            i.querySelector('.faq-question').classList.remove('active');
            i.querySelector('.faq-answer').classList.remove('show');
        });
        if (!isActive) {
            question.classList.add('active');
            item.querySelector('.faq-answer').classList.add('show');
        }
    });
});

// ====== RENDER YOU MAY LIKE ======
function renderYouMayLike() {
    const container = document.getElementById('youMayLikeContainer');
    if (!container) return;
    container.innerHTML = '';
    youMayLikeArticles.forEach(article => {
        const card = document.createElement('div');
        card.className = 'list-card';
        card.innerHTML = `
            <img src="${article.image}" alt="${article.title}" class="list-card-image" loading="lazy" onload="this.classList.add('loaded')">
            <div class="list-card-content">
                <div class="list-card-title">${article.title}</div>
                <div class="list-card-description">${article.description}</div>
                <div class="list-card-footer">
                    <span class="timestamp"><i class="fa-solid fa-earth-americas"></i> ${formatTimestamp(article.date)}</span>
                    <a href="${article.link}" class="read-btn" target="_blank" rel="noopener noreferrer">Read Now</a>
                </div>
            </div>
        `;
        container.appendChild(card);
    });
}

// Render related & popular
function renderRelated() {
    const container = document.getElementById('relatedArticlesContainer');
    if (!container) return;
    container.innerHTML = '';
    relatedArticles.forEach(article => {
        const card = document.createElement('div');
        card.className = 'list-card';
        card.innerHTML = `
            <img src="${article.image}" alt="${article.title}" class="list-card-image" loading="lazy" onload="this.classList.add('loaded')">
            <div class="list-card-content">
                <div class="list-card-title">${article.title}</div>
                <div class="list-card-description">${article.description}</div>
                <div class="list-card-footer">
                    <span class="timestamp"><i class="fa-solid fa-earth-americas"></i> ${formatTimestamp(article.date)}</span>
                    <a href="${article.link}" class="read-btn" target="_blank" rel="noopener noreferrer">Read Now</a>
                </div>
            </div>
        `;
        container.appendChild(card);
    });
}

function renderPopular() {
    const container = document.getElementById('popularContainer');
    if (!container) return;
    container.innerHTML = '';
    popularArticles.forEach(article => {
        const card = document.createElement('div');
        card.className = 'list-card';
        card.innerHTML = `
            <img src="${article.image}" alt="${article.title}" class="list-card-image" loading="lazy" onload="this.classList.add('loaded')">
            <div class="list-card-content">
                <div class="list-card-title">${article.title}</div>
                <div class="list-card-description">${article.description}</div>
                <div class="list-card-footer">
                    <span class="timestamp"><i class="fa-solid fa-earth-americas"></i> ${formatTimestamp(article.date)}</span>
                    <a href="${article.link}" class="read-btn" target="_blank" rel="noopener noreferrer">Read Now</a>
                </div>
            </div>
        `;
        container.appendChild(card);
    });
}

renderYouMayLike();
renderRelated();
renderPopular();

// ====== COMMENTS with Dynamic Timestamps, Newest First, 2 Columns, View All every 10, Delete All visible when >=2 ======
const commentName = document.getElementById('commentName');
const commentText = document.getElementById('commentText');
const submitComment = document.getElementById('submitComment');
const commentsList = document.getElementById('commentsList');
const viewAllBtn = document.getElementById('viewAllComments');
const deleteAllBtn = document.getElementById('deleteAllComments');
let showingAll = false;
let commentUpdateInterval;

function loadComments() {
    const comments = JSON.parse(localStorage.getItem('comments') || '[]');
    // Sort comments by timestamp (newest first)
    comments.sort((a, b) => b.timestamp - a.timestamp);
    commentsList.innerHTML = '';
    if (comments.length === 0) {
        commentsList.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 2rem;">No comments yet by you. Share your thoughts right now✍️</p>';
        viewAllBtn.classList.add('hidden');
        deleteAllBtn.classList.add('hidden');
        return;
    }
    // Show delete all only if >=2 comments
    if (comments.length >= 2) {
        deleteAllBtn.classList.remove('hidden');
    } else {
        deleteAllBtn.classList.add('hidden');
    }
    // Determine how many comments to show
    const displayCount = showingAll ? comments.length : Math.min(6, comments.length);
    const displayComments = comments.slice(0, displayCount);
    // Create a document fragment for better performance
    displayComments.forEach((comment, index) => {
        const commentEl = document.createElement('div');
        commentEl.className = 'comment-item';
        commentEl.dataset.timestamp = comment.timestamp;
        const commentDate = new Date(parseInt(comment.timestamp));
        commentEl.innerHTML = `
            <div class="comment-header">
                <span class="comment-name">${escapeHtml(comment.name)}</span>
                <span class="comment-date">${formatTimestamp(commentDate)}</span>
            </div>
            <div class="comment-text">${escapeHtml(comment.text)}</div>
            <button class="comment-delete" data-index="${comments.findIndex(c => c.timestamp === comment.timestamp)}">
                <i class="fas fa-trash"></i>
            </button>
        `;
        commentsList.appendChild(commentEl);
    });
    // Show/hide view all button based on comment count
    if (comments.length > 5) {
        viewAllBtn.classList.remove('hidden');
        viewAllBtn.innerHTML = showingAll ? 'Show Less <i class="fas fa-chevron-up"></i>' : 'View All Comments <i class="fas fa-chevron-down"></i>';
    } else {
        viewAllBtn.classList.add('hidden');
    }
    // Add delete functionality
    document.querySelectorAll('.comment-delete').forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.stopPropagation();
            const index = e.currentTarget.dataset.index;
            const comments = JSON.parse(localStorage.getItem('comments') || '[]');
            comments.splice(index, 1);
            localStorage.setItem('comments', JSON.stringify(comments));
            loadComments();
        });
    });
}

function escapeHtml(unsafe) {
    return unsafe
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
}

submitComment.addEventListener('click', () => {
    const name = commentName.value.trim();
    const text = commentText.value.trim();
    if (!name || !text) {
        alert('Please enter both name and comment');
        return;
    }
    const comments = JSON.parse(localStorage.getItem('comments') || '[]');
    comments.push({
        name: name,
        text: text,
        timestamp: Date.now()
    });
    localStorage.setItem('comments', JSON.stringify(comments));
    commentName.value = '';
    commentText.value = '';
    // Reset to showing only latest 5 when new comment is added
    showingAll = false;
    loadComments();
});

// View All / Show Less toggle
viewAllBtn.addEventListener('click', () => {
    showingAll = !showingAll;
    loadComments();
});

// Delete All Comments
deleteAllBtn.addEventListener('click', () => {
    if (confirm('Are you sure you want to delete all comments?')) {
        localStorage.removeItem('comments');
        showingAll = false;
        loadComments();
    }
});

loadComments();

// ====== INITIAL TIMESTAMP UPDATE AND INTERVAL ======
updateAllTimestamps();

// Update timestamps every minute
commentUpdateInterval = setInterval(updateAllTimestamps, 60000);

// Cleanup interval on page unload
window.addEventListener('beforeunload', () => {
    if (commentUpdateInterval) clearInterval(commentUpdateInterval);
});

// fix for X icon color
document.querySelectorAll('.share-icon-btn[data-platform="x"] svg').forEach(svg => {
    svg.style.fill = 'currentColor';
});

// ====== FIXED: LAZY LOADING FOR IMAGES - NO BLUR ISSUES ======
function fixImageBlurriness() {
    // First, ensure all images have loading="lazy" attribute
    document.querySelectorAll('img:not([loading])').forEach(img => {
        img.setAttribute('loading', 'lazy');
    });
    // Handle ALL images with loading="lazy" attribute
    document.querySelectorAll('img[loading="lazy"]').forEach(img => {
        // Remove the loaded class first to ensure clean state
        img.classList.remove('loaded');
        // Function to mark image as loaded
        const markAsLoaded = () => {
            img.classList.add('loaded');
        };
        // If image is already loaded and complete
        if (img.complete && img.naturalHeight !== 0) {
            markAsLoaded();
        } else {
            // Wait for load event
            img.addEventListener('load', markAsLoaded);
            // Also handle error cases - remove blur even if image fails
            img.addEventListener('error', markAsLoaded);
        }
    });
}

// Run immediately
fixImageBlurriness();

// Also run after a short delay to catch any dynamically loaded images
setTimeout(fixImageBlurriness, 100);
setTimeout(fixImageBlurriness, 500);

// Run when DOM is fully loaded
document.addEventListener('DOMContentLoaded', fixImageBlurriness);

// Run when window is fully loaded
window.addEventListener('load', function() {
    fixImageBlurriness();
    // Double-check after everything is loaded
    setTimeout(fixImageBlurriness, 200);
});


const internalLinks = [
    {
        title: "Small Modular Reactors: The Future of Clean Energy?",
        url: "https://techtonic-times.github.io/smr-future"
    },
    {
        title: "Nuclear Techniques Unlock Ocean's Carbon Storage Secrets",
        url: "https://techtonic-times.github.io/ocean-carbon"
    },
    {
        title: "From Nuclear Waste to Clean Fuel: New Recycling Method",
        url: "https://techtonic-times.github.io/waste-recycle"
    },
    {
        title: "Fusion Ignition Achieved: What It Means for Clean Power",
        url: "https://techtonic-times.github.io/fusion-ignition"
    },
    {
        title: "How Nuclear Science Is Saving the World's Chocolate Supply",
        url: "https://techtonic-times.github.io/chocolate-supply"
    }
];

function renderDynamicLink() {
    const container = document.getElementById('dynamic-link-container');
    if (!container) {
        console.log('Dynamic link container not found');
        return;
    }

    // Pick a random link
    const randomIndex = Math.floor(Math.random() * internalLinks.length);
    const link = internalLinks[randomIndex];

    // Create HTML - Icon and text on same line, NO "Read Next:" prefix
    container.innerHTML = `
        <div class="dynamic-link-box">
            <a href="${link.url}" class="dynamic-link-text">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
                </svg>
                <span class="link-text-span">${link.title}</span>
            </a>
        </div>
    `;
    
    console.log('Dynamic link rendered:', link.title);
}

// Run on page load
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', renderDynamicLink);
} else {
    renderDynamicLink();
}
</script>
</body>
</html>
