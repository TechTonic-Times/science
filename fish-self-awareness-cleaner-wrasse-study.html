<!DOCTYPE html>
<html lang="en" class="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fish Mirror Test Reveals Surprising Cleaner Wrasse Intelligence</title>
<meta name="description" content="Osaka Metropolitan University study reveals labroides dimidiatus cognition rivals mammals. Fish self awareness discovery reshapes evolutionary understanding.">

<!-- === OPEN GRAPH / FACEBOOK / LINKEDIN / WHATSAPP === -->
<meta property="og:type" content="article">
<meta property="og:url" content="https://techtonic-times.github.io/science/test04.html">
<meta property="og:title" content="Fish Mirror Test Reveals Surprising Cleaner Wrasse Intelligence">
<meta property="og:description" content="Osaka Metropolitan University study reveals labroides dimidiatus cognition rivals mammals. Fish self awareness discovery reshapes evolutionary understanding.  
">
<!-- OPTIMIZED IMAGE: Your 1:1 square image -->
<meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhZIaFnu7m9cYbKvKzvZ_ZPhRShChxEC1zI8CfXi4mk625fWauS3EAmp3pl87JC8xQulA_vNrj6sQBLZNJSB-bsqmCsgFNetkhPjhf0F131kLXUUa4p7Jre532Zcc9m1l_rMCcrTYR3OTtBt-DWjy7HD1LZoMlxhU6iPdTiIs8rewzqfG4/s1600/1772344050492-019ca7ef-7601-74a0-8f6c-d311b84c9975.webp">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="1200">
<meta property="og:site_name" content="TechTonic Times">
<meta property="og:locale" content="en_US">

<!-- === TWITTER CARD === -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:url" content="https://techtonic-times.github.io/science/fish-self-awareness-cleaner-wrasse-study.html">
<meta name="twitter:title" content="Fish Mirror Test Reveals Surprising Cleaner Wrasse Intelligence">
<meta name="twitter:description" content="Osaka Metropolitan University study reveals labroides dimidiatus cognition rivals mammals. Fish self awareness discovery reshapes evolutionary understanding.  
">
<!-- Same optimized image for Twitter -->
<meta name="twitter:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhZIaFnu7m9cYbKvKzvZ_ZPhRShChxEC1zI8CfXi4mk625fWauS3EAmp3pl87JC8xQulA_vNrj6sQBLZNJSB-bsqmCsgFNetkhPjhf0F131kLXUUa4p7Jre532Zcc9m1l_rMCcrTYR3OTtBt-DWjy7HD1LZoMlxhU6iPdTiIs8rewzqfG4/s1600/1772344050492-019ca7ef-7601-74a0-8f6c-d311b84c9975.webp">
<meta name="twitter:creator" content="@TechTonicTimes">

<meta name="color-scheme" content="light dark">
<link rel="icon" type="image/png" sizes="64x64" href="https://techtonic-times.github.io/home/favicon-64.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://techtonic-times.github.io/home/favicon-180.png">
<link rel="icon" type="image/png" sizes="192x192" href="https://techtonic-times.github.io/home/favicon-192.png">
<link rel="icon" type="image/png" sizes="512x512" href="https://techtonic-times.github.io/home/favicon-512.png">
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
/* === CORE VARIABLES & DARK MODE === */
:root {
    --primary: #0E7B7F;  /* darker teal */
    --primary-light: rgba(14, 123, 127, 0.1);
    --primary-dark: #096669; /* darker teal */
    --bg-primary: #f9fafb;
    --bg-secondary: #ffffff;
    --text-primary: #111827;
    --text-secondary: #6b7280;
    --border-color: #0E7B7F;
    --card-bg: #ffffff;
    --header-bg: #ffffff;
    --footer-bg: #111827;
    --news-bar-bg: #ff0000;
    --teal-color: #0E7B7F;  /* darker teal */
    --teal-dark: #096669;   /* darker teal */
    --teal-light: #0E8E92;  /* darker teal */
    --light-card: rgba(255,255,255,0.98);
    --dark-card: #0a0e1a;
    --border-radius: 12px;
    --box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    --teal-bright: #12ABB0; /* new bright teal for dark mode accents */
}
.dark {
    --primary: #12ABB0; /* updated to bright teal */
    --primary-light: rgba(18, 171, 176, 0.15);
    --primary-dark: #0d8a8e;
    --bg-primary: #0a0f1d;
    --bg-secondary: #1e293b;
    --text-primary: #f1f5f9;
    --text-secondary: #94a3b8;
    --border-color: #07f2f2;
    --card-bg: #0f1522;
    --header-bg: #0f1522;
    --footer-bg: #0a0e1a;
    --news-bar-bg: #ff0000;
    --dark-card: #0a0e1a;
    --teal-bright: #12ABB0;
}
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Inter', sans-serif;
}
body {
    background: linear-gradient(135deg, var(--teal-color), var(--teal-dark), var(--teal-light)) !important;
    color: #1f2937 !important;
    line-height: 1.6;
    padding: 0;
    min-height: 100vh;
    margin-top: -0.7rem;
    transition: background 0.3s ease, color 0.3s ease;
}
body.dark-mode {
    background: linear-gradient(135deg, #030812, #071127, #0a1525) !important;
    color: #e6eef8 !important;
}
.mono-font {
    font-family: 'JetBrains Mono', monospace;
}
/* === BREADCRUMB - EXACT TOOLIVO STYLE, 5px from top === */
.breadcrumb {
    padding: 0.3rem 0.6rem;
    background: rgba(255, 255, 255, 0.08);
    border-radius: 0 0 8px 8px;
    margin-bottom: 0.5rem;
    margin-top: 5px;
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
}
body.dark-mode .breadcrumb {
    background: rgba(255, 255, 255, 0.04);
}
.breadcrumb ul {
    display: flex;
    flex-wrap: wrap;
    gap: 0.1rem;
    margin: 0;
    padding: 0;
    list-style: none;
    font-size: 0.5rem;
    align-items: center;
}
@media (min-width: 768px) {
    .breadcrumb ul {
        font-size: 0.7rem;
    }
}
.breadcrumb li {
    display: flex;
    align-items: center;
}
.breadcrumb li:not(:last-child)::after {
    content: ">";
    margin: 0 0.1rem;
    color: rgba(255, 255, 255, 0.8);
    font-weight: 600;
}
.breadcrumb a {
    color: rgba(255, 255, 255, 0.85);
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 0.3rem;
}
.breadcrumb a:hover {
    color: white;
}
body.dark-mode .breadcrumb a {
    color: rgba(230, 238, 248, 0.85);
}
body.dark-mode .breadcrumb a:hover {
    color: #e6eef8;
}
/* === FIXED: BREADCRUMB LAST ITEM - SINGLE LINE WITH ELLIPSIS === */
.breadcrumb li[aria-current="page"] {
    color: #e6eef8;
    font-weight: 600;
    /* Webkit properties for single-line truncation */
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 180px;
    min-width: 0;
    flex-shrink: 1;
}
body.dark-mode .breadcrumb li[aria-current="page"] {
    color: #cbd5e1;
}
/* Mobile optimization - smaller max-width */
@media (max-width: 480px) {
    .breadcrumb li[aria-current="page"] {
        max-width: 120px;
    }
}
/* Very small mobile devices */
@media (max-width: 360px) {
    .breadcrumb li[aria-current="page"] {
        max-width: 100px;
    }
}
/* Tablet optimization */
@media (min-width: 481px) and (max-width: 768px) {
    .breadcrumb li[aria-current="page"] {
        max-width: 150px;
    }
}
/* Desktop - larger max-width */
@media (min-width: 769px) {
    .breadcrumb li[aria-current="page"] {
        max-width: 250px;
    }
}
.breadcrumb i {
    font-size: 0.9em;
}
/* === HEADER WITH LOGO - BIGGER, 2-ROW STYLE === */
header {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 0.5rem;
    padding: 0.8rem 0 0.4rem 0;
}
.logo-container {
    display: flex;
    justify-content: center;
    flex-direction: column;
    align-items: center;
}
.logo {
    max-width: 320px;
    height: auto;
}
@media (max-width: 640px) {
    .logo {
        max-width: 260px;
    }
}
.logo-tagline {
    color: rgba(255,255,255,0.9);
    font-size: 0.85rem;
    letter-spacing: 2px;
    margin-top: 6px;
    font-weight: 400;
    text-transform: uppercase;
    border-top: 1px solid rgba(255,255,255,0.2);
    padding-top: 6px;
}
.dark-mode .logo-tagline {
    color: #12ABB0 !important;  /* bright teal in dark mode */
    border-top-color: rgba(18, 171, 176, 0.3);
}
/* === GLOWING TEAL SHADOW ANIMATION FOR LOGO IN DARK MODE - RUNNING === */
@keyframes tealGlow {
    0% { filter: drop-shadow(0 0 2px rgba(18, 171, 176, 0.5)); }
    50% { filter: drop-shadow(0 0 12px rgba(18, 171, 176, 0.9)) drop-shadow(0 0 6px rgba(18, 171, 176, 0.6)); }
    100% { filter: drop-shadow(0 0 2px rgba(18, 171, 176, 0.5)); }
}
.dark-mode .logo {
    animation: tealGlow 3s ease-in-out infinite;
}
/* === ARTICLE TAG (BADGE) - EXACT TOOLIVO STYLE WITH CLICKABLE SVG === */
.article-tag {
    text-align: center;
    margin: 2rem auto 0.8rem auto;
    max-width: 900px;
}
.article-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    background: rgba(255, 255, 255, 0.25);
    color: white;
    padding: 0.3rem 0.8rem;
    border-radius: 50px;
    font-size: 0.8rem;
    font-weight: 600;
    backdrop-filter: blur(5px);
    text-decoration: none;
    cursor: pointer;
    transition: all 0.3s ease;
}
.article-badge:hover {
    background: rgba(255,255,255,0.4) !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255,255,255,0.2);
}
.article-badge svg {
    transition: transform 0.3s ease;
}
.article-badge:hover svg {
    transform: rotate(5deg);
}
body.dark-mode .article-badge {
    background: rgba(255, 255, 255, 0.1);
    color: #e6eef8;
}
/* === ARTICLE MAIN TITLE (H1) - EXACT TOOLIVO STYLE === */
.article-main-title {
    text-align: center;
    margin: 0.5rem auto 1rem auto;
    max-width: 900px;
    padding: 0 1.5rem;
}
.article-main-title h1 {
    font-size: 2.8rem;
    margin-bottom: 0.5rem;
    color: white;
    line-height: 1.3;
    font-weight: 700;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}
body.dark-mode .article-main-title h1 {
    color: #e6eef8;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.4);
}
@media (max-width: 768px) {
    .article-main-title h1 {
        font-size: 2rem;
    }
}
@media (max-width: 480px) {
    .article-main-title h1 {
        font-size: 1.8rem;
    }
    .article-main-title {
        padding: 0 0.8rem;
    }
}
/* === ARTICLE SECTION CARD - EXACT TOOLIVO STYLE === */
.article-section {
    background: var(--light-card);
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    padding: 0.5rem;
    margin-bottom: 3rem;
    overflow: hidden;
    max-width: 1000px;
    margin-left: auto;
    margin-right: auto;
    margin-top: 0.5rem;
}

body.dark-mode .article-section {
    background: var(--dark-card);
}
.article-header {
    text-align: center;
    margin-bottom: 1.5rem;
}
/* === ARTICLE META - UPDATED: Date left, Author right, smaller === */
.article-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1.5rem;
    margin-bottom: 1rem;
}
.article-date {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.75rem;  /* smaller */
    color: #4b5563;
    font-weight: 500;
    background: rgba(14, 123, 127, 0.08);  /* darker teal, lighter bg */
    padding: 0.25rem 0.6rem;  /* smaller padding */
    border-radius: 4px;  /* smaller radius */
}
.article-author {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.75rem;  /* smaller */
    color: #4b5563;
    font-weight: 500;
    background: rgba(14, 123, 127, 0.08);  /* darker teal, lighter bg */
    padding: 0.25rem 0.6rem;  /* smaller padding */
    border-radius: 4px;  /* smaller radius */
}
body.dark-mode .article-date,
body.dark-mode .article-author {
    color: #cbd5e1;
    background: rgba(18, 171, 176, 0.15); /* bright teal tint in dark */
}
.meta-icon {
    font-size: 0.75rem;  /* smaller */
    color: var(--teal-color);
}
body.dark-mode .meta-icon {
    color: #12ABB0; /* bright teal */
}
.article-single-content {
    display: block;
    width: 100%;
}
@media (min-width: 768px) {
    .article-single-content {
        max-width: 980px;
        margin: 0 auto;
    }
}
.article-single-content p {
    margin-bottom: 1rem;
    font-size: 1.05rem;
    line-height: 1.6;
    color: var(--text-primary);
}
body.dark-mode .article-single-content p {
    color: #e6eef8;  /* fixed: now white in dark mode */
}
body.dark-mode .article-single-content h2,
body.dark-mode .article-single-content h3,
body.dark-mode .article-single-content h4,
body.dark-mode .article-single-content li,
body.dark-mode .article-single-content div:not(.keypoints-container) {
    color: #e6eef8;
}
@media (max-width: 768px) {
    .article-meta {
        gap: 1rem;
    }
    .article-section {
        padding: 0.8rem;
    }
}
/* === PRESERVE ORIGINAL ARTICLE CONTENT STYLES - WITH DARK MODE FIX === */
.article-content {
    font-size: 1rem;
    line-height: 1.6;
    color: var(--text-primary);
}

/* === TEAL BACKGROUND FOR ALL H2s - SLIGHT ROUNDED CORNERS WITH 0.6rem PADDING GAP === */
.article-content h2,
.article-single-content h2 {
background: linear-gradient(135deg, var(--primary), var(--primary-dark));
color: white !important;
padding: 0.85rem 1rem;
border-radius: 15px;
font-size: 1.6rem;
font-weight: 700;
line-height: 1.3;
margin-top: 2.2rem;
margin-bottom: 1.2rem;
box-shadow: 0 4px 15px rgba(14, 123, 127, 0.2);
display: block;
word-break: break-word;
transition: all 0.2s ease;
}

/* Dark mode optimization */
.dark-mode .article-content h2,
.dark-mode .article-single-content h2 {
    background: linear-gradient(135deg, #12ABB0, #0d8a8e);
    box-shadow: 0 4px 15px rgba(18, 171, 176, 0.3);
}

/* Tablet optimization */
@media (max-width: 768px) {
.article-content h2,
.article-single-content h2 {
font-size: 1.5rem;
padding: 0.75rem 1rem;
border-radius: 15px;
margin-top: 2rem;
margin-bottom: 1rem;
}
}

/* Mobile optimization */
@media (max-width: 480px) {
.article-content h2,
.article-single-content h2 {
font-size: 1.4rem;
padding: 0.65rem 0.6rem;
border-radius: 15px;
margin-top: 1.8rem;
margin-bottom: 0.9rem;
line-height: 1.4;
}
}

/* Small mobile devices */
@media (max-width: 360px) {
.article-content h2,
.article-single-content h2 {
font-size: 1.3rem;
padding: 0.6rem 0.8rem;
border-radius: 15px;
}
}

.article-content h3 {
    font-size: 1.2rem;
    font-weight: 600;
    margin-top: 1.5rem;
    margin-bottom: 1rem;
    color: var(--text-primary);
}
body.dark-mode .article-content h3 {
    color: #e6eef8;
}
.article-content p {
    margin-bottom: 1.5rem;
    color: var(--text-primary);
}
body.dark-mode .article-content p {
    color: #e6eef8;
}
.article-content ul, .article-content ol {
    margin-bottom: 1.5rem;
    padding-left: 1.5rem;
}
.article-content li {
    margin-bottom: 0.7rem;
    color: var(--text-primary);
}
body.dark-mode .article-content li {
    color: #e6eef8;
}
.article-content blockquote {
    border-left: 4px solid var(--primary);
    padding-left: 0.5rem;
    margin: 2rem 0;
    font-style: italic;
    color: var(--text-secondary);
    background: var(--primary-light);
    padding: 1.5rem;
    border-radius: 0.5rem;
}
.article-content a {
    color: var(--primary);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: all 0.2s ease;
}
.article-content a:hover {
    border-bottom-color: var(--primary);
}
.highlight-box {
    background: var(--primary-light);
    border: 1px solid var(--border-color);
    border-radius: 0.75rem;
    padding: 0.8rem;
    margin: 2rem 0;
}

.highlight-box h4 {
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 0.8rem;
    color: var(--primary);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}
body.dark-mode .highlight-box h4 {
    color: #12ABB0; /* bright teal */
}
.highlight-box h4 svg {
    width: 20px;
    height: 20px;
}
.highlight-box p {
    color: var(--text-primary);
}
body.dark-mode .highlight-box p {
    color: #e6eef8;
}
/* === FIXED CARD DARK MODE BG === */
.tech-application-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
    margin: 2.5rem 0;
}
@media (min-width: 768px) {
    .tech-application-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}
.tech-card {
    background: var(--bg-secondary);
    border-radius: 0.75rem;
    padding: 1.5rem;
    border: 1px solid var(--border-color);
    transition: all 0.3s ease;
}
body.dark-mode .tech-card {
    background: #1a1f2e !important; /* fixed dark mode background for cards */
    border-color: #2d3748;
}
.tech-card:hover {
    border-color: var(--primary);
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
}
.tech-card h4 {
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 0.8rem;
    color: var(--primary);
}
body.dark-mode .tech-card h4 {
    color: #12ABB0; /* bright teal */
}
.tech-card p {
    font-size: 0.95rem;
    color: var(--text-secondary);
    margin-bottom: 1rem;
}
body.dark-mode .tech-card p {
    color: #cbd5e1;
}
.tech-tag {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    background: transparent;
    color: var(--primary);
    border: 1px solid var(--primary);
    padding: 0.25rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 600;
    line-height: 1.2;
}
body.dark-mode .tech-tag {
    color: #12ABB0;
    border-color: #12ABB0;
}
/* === IMAGE + KEY INSIGHTS - DESKTOP SIDEBYSIDE, MOBILE STACKED === */
.square-image {
    width: 100%;
    height: auto;
    aspect-ratio: 1/1;
    border-radius: 15px;
    object-fit: cover;
    border: 1px solid rgba(14, 123, 127, 0.1);
}
.image-container {
    margin: 2rem 0;
}
/* === SLIGHT SHADOW AFTER IMAGE - FIXED === */
.square-image {
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2); /* ← Now BLACK/NEUTRAL */
transition: box-shadow 0.3s ease;
}
@media (max-width: 1023px) {
    .image-container {
        max-width: 100%;
        margin: 1.5rem 0;
        padding: 0 0.05rem;
    }
    .image-keypoints-container {
        display: block;
        margin: 1.5rem 0;
    }
    .keypoints-container {
        display: none;
    }
}
@media (min-width: 1024px) {
    .image-keypoints-container {
        display: flex;
        flex-direction: row;
        gap: 1.75rem;
        margin: 2.5rem 0;
        align-items: stretch;
    }
    .image-container, .keypoints-container {
        flex: 1;
        width: 50%;
    }
    .image-container {
        margin: 0;
    }
    .keypoints-container {
        background-color: #f8fcfd;
        border-radius: 15px;
        padding: 1.25rem;
        border-left: 3px solid var(--primary);
        box-shadow: 0 3px 10px rgba(14, 123, 127, 0.07);
        display: flex;
        flex-direction: column;
    }
    .dark-mode .keypoints-container {
  background-color: #1a1f2e;
  border-left-color: #12ABB0; /* bright teal */
  box-shadow: 0 3px 10px rgba(0,0,0,0.3);
}
    .keypoints-title {
        color: #0d3c3e;
        font-size: 1.4rem;
        font-weight: 700;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid rgba(14, 123, 127, 0.15);
        position: relative;
        display: inline-block;
    }
    .dark .keypoints-title {
        color: #f1f5f9;
    }
    .keypoints-title::after {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 100%;
        height: 2px;
        background: var(--primary);
        border-radius: 1px;
    }
    .keypoints-list {
        list-style-type: none;
        flex-grow: 1;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }
    .keypoint-item {
        margin-bottom: 1.2rem;
        padding-left: 2.25rem;
        position: relative;
        transition: transform 0.2s ease;
    }
    .keypoint-item:hover {
        transform: translateX(3px);
    }
    .keypoint-item:last-child {
        margin-bottom: 0;
        padding-bottom: 0.5rem;
    }
    .keypoint-item::before {
        content: "✓";
        position: absolute;
        left: 0;
        top: 0.15rem;
        width: 1.6rem;
        height: 1.6rem;
        background-color: var(--primary);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.1rem;
        font-weight: bold;
        flex-shrink: 0;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
  .keypoint-title {
    color: #0a2e2f;
    font-weight: 700;
    margin-bottom: 0.35rem;
    font-size: 1.1rem;
    line-height: 1.3;    
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
}
    .dark .keypoint-title {
        color: #e2e8f0;
    }
    .keypoint-description {
        color: #4a6a6c;
        font-size: 0.95rem;
        line-height: 1.5;
        opacity: 0.95;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    .dark .keypoint-description {
        color: #b9c7d9;
    }
}
/* === MENU TOGGLE BUTTON - ICON ALWAYS WHITE, SCROLL BEHAVIOR === */
.menu-toggle {
    position: absolute;
    top: 42px;
    left: 15px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    width: 40px;
    height: 40px;
    border-radius: 12px;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 5px;
    transition: top 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s, visibility 0.3s, transform 0.3s, background 0.3s;
    z-index: 1001;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(10px);
    padding: 0;
    opacity: 1;
    visibility: visible;
    transform: scale(1);
}

.menu-toggle span {
    display: block;
    height: 3px;
    width: 22px;
    border-radius: 2px;
    background: white !important;  /* ALWAYS WHITE */
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: center;
}
.dark-mode .menu-toggle span {
    background: white !important;  /* ALWAYS WHITE */
}
/* === THEME TOGGLE BUTTON - SCROLL BEHAVIOR === */
.theme-toggle {
    position: fixed;
    top: 42px;
    right: 15px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    width: 40px;
    height: 40px;
    border-radius: 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: top 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s, visibility 0.3s, transform 0.3s, background 0.3s;
    z-index: 1001;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    opacity: 1;
    visibility: visible;
    transform: scale(1);
    backdrop-filter: blur(10px);
}
.theme-toggle.scrolled {
    top: 20px !important;
}
.dark-mode .theme-toggle {
    background: rgba(30, 41, 59, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.1);
}
.theme-toggle:hover {
    transform: scale(1.05);
    background: rgba(255, 255, 255, 0.15);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}
.dark-mode .theme-toggle:hover {
    background: rgba(30, 41, 59, 0.9);
}
.theme-icon {
    position: absolute;
    width: 22px;
    height: 22px;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    stroke: currentColor;
}
.sun-icon {
    opacity: 1;
    transform: rotate(0deg);
    color: #f59e0b;
}
.moon-icon {
    opacity: 0;
    transform: rotate(-90deg);
    color: #e2e8f0;
}
.dark-mode .sun-icon {
    opacity: 0;
    transform: rotate(90deg);
}
.dark-mode .moon-icon {
    opacity: 1;
    transform: rotate(0deg);
}
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}
/* === MENU CARD - WITH TEAL LINE, DARK MODE FIXED === */
.menu-card {
    position: fixed;
    top: 20px;
    left: 10px;
    width: 280px;
    background: white;
    border-radius: 16px;
    box-shadow: 0 12px 32px rgba(0,0,0,0.2);
    transform: translateX(-105%) scale(0.95);
    transition: transform 0.4s cubic-bezier(0.22, 0.61, 0.36, 1);
    z-index: 1000;
    padding: 1.5rem;
    max-height: 70vh;
    overflow-y: auto;
    border: 1px solid #f0f0f0;
    opacity: 0;
    visibility: hidden;transition: transform 0.4s cubic-bezier(0.22, 0.61, 0.36, 1), 
                opacity 0.4s cubic-bezier(0.22, 0.61, 0.36, 1);
    /* Keep visibility visible always, use opacity for show/hide */
    visibility: visible;
}
    

.menu-card.open {
    transform: translateX(0) scale(1);
    opacity: 1;
}

/* Add this for closed state */
.menu-card:not(.open) {
    opacity: 0;
    pointer-events: none;
}
.dark-mode .menu-card {
    background: #0f1522 !important; /* dark menu card background */
    border: 1px solid #1d2c40;
    color: #e6eef8;
}
.menu-card.open {
    transform: translateX(0) scale(1);
    opacity: 1;
    visibility: visible;
}
.menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #0E7B7F;
}
.dark-mode .menu-header {
border-bottom-color: #12ABB0; /* bright teal in dark mode */
}
.menu-header h3 {
    font-size: 1.2rem;
    font-weight: 600;
    color: #111;
}
.dark-mode .menu-header h3 {
    color: #e6eef8 !important;
}
/* === TEAL COLOR LINE IN MENU (border-left) - DARK MODE FIX === */
.menu-link {
    border-left: 3px solid transparent;
    transition: border-left 0.2s ease, background 0.2s;
}
.menu-link:hover {
    border-left: 3px solid var(--primary) !important;
    background: rgba(14, 123, 127, 0.05);
}
.dark-mode .menu-link:hover {
    border-left: 3px solid #12ABB0 !important;
    background: rgba(18, 171, 176, 0.15);
}
.dropdown-item {
    border-left: 2px solid transparent;
}
.dropdown-item:hover {
    border-left: 2px solid var(--primary) !important;
}
.dark-mode .dropdown-item:hover {
    border-left: 2px solid #12ABB0 !important;
}
.menu-close {
    background: transparent;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    transition: background 0.2s;
}
.menu-close:hover {
    background: rgba(0,0,0,0.05);
}
.dark-mode .menu-close:hover {
    background: rgba(255,255,255,0.05);
}
.menu-close svg {
    width: 20px;
    height: 20px;
    stroke: #111;
    stroke-width: 2;
    fill: none;
}
.dark-mode .menu-close svg {
    stroke: #e6eef8 !important; /* white in dark mode */
}
.menu-list {
    list-style: none;
    padding: 0;
}
.menu-item {
    margin-bottom: 0.01rem;
    position: relative;
}
.menu-link {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 0.75rem 1rem 0.75rem 0.5rem;
    color: #111;
    text-decoration: none;
    font-weight: 500;
    font-size: 0.75rem;
    border-radius: 8px;
    transition: all 0.3s ease;
    width: 100%;
    text-align: left;
    background: none;
    border: none;
    cursor: pointer;
    position: relative;
}
.dark-mode .menu-link {
    color: #e6eef8 !important; /* white text in dark mode */
}
.dark-mode .menu-link:hover {
    color: #12ABB0; /* bright teal on hover */
}
.menu-link:hover {
    background: rgba(14, 123, 127, 0.1);
    transform: translateX(4px);
    color: var(--primary);
}
.menu-icon {
    width: 20px;
    height: 20px;
    opacity: 0.7;
    stroke: currentColor;
    stroke-width: 1.8;
    fill: none;
    flex-shrink: 0;
}
.dark-mode .menu-icon {
    stroke: white; /* teal icons in dark mode */
}
.dropdown-parent {
    position: relative;
}
.dropdown-toggle {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-right: 0.75rem !important;
}
.dropdown-arrow {
    width: 14px;
    height: 14px;
    stroke: currentColor;
    stroke-width: 2.5;
    fill: none;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    flex-shrink: 0;
    margin-left: auto;
}
.dropdown-parent.active .dropdown-arrow {
    transform: rotate(90deg);
}
.dropdown-menu {
    list-style: none;
    padding-left: 0;
    margin-top: 0.25rem;
    margin-left: 32px;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s cubic-bezier(0.22, 0.61, 0.36, 1);
}
.dropdown-parent.active .dropdown-menu {
    max-height: 300px;
}
.dropdown-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.6rem 0.5rem 0.6rem 0;
    color: #555;
    text-decoration: none;
    font-weight: 500;
    font-size: 0.65rem;
    border-radius: 6px;
    transition: all 0.3s ease;
    margin-bottom: 0.01rem;
    position: relative;
    min-height: 36px;
}
.dark-mode .dropdown-item {
    color: #cbd5e1 !important; /* lighter gray in dark mode */
}
.dark-mode .dropdown-item:hover {
    color: #12ABB0; /* bright teal on hover */
    background: rgba(18, 171, 176, 0.08);
}
.subcategory-arrow {
    width: 12px;
    height: 12px;
    stroke: currentColor;
    stroke-width: 2;
    fill: none;
    opacity: 0.6;
    margin-left: 8px;
    flex-shrink: 0;
}
.dark-mode .subcategory-arrow {
    stroke: #12ABB0;
}
.subcategory-name {
    flex-grow: 1;
    text-align: right;
    margin-right: 8px;
    padding-right: 4px;
}
.backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0,0,0,0.4);
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
    z-index: 999;
}
.dark-mode .backdrop {
    background: rgba(0, 0, 0, 0.6) !important;
}
.backdrop.visible {
    opacity: 1;
    visibility: visible;
}
/* === BACK TO TOP BUTTON - ORIGINAL === */
/* === BACK TO TOP BUTTON - UPDATED === */
.back-to-top {
    position: fixed;
    bottom: 30px;
    right: 15px;
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    opacity: 0;
    transform: translateY(20px) scale(0.8);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 9999; /* Increased z-index to ensure it's above everything */
    box-shadow: 0 8px 25px rgba(14, 123, 127, 0.4);
    border: 2px solid rgba(255, 255, 255, 0.2);
    pointer-events: none; /* Prevent clicks when invisible */
}

.back-to-top.visible {
    opacity: 1;
    transform: translateY(0) scale(1);
    pointer-events: auto; /* Allow clicks when visible */
}

.dark-mode .back-to-top {
    background: linear-gradient(135deg, #12ABB0, #0d8a8e);
    box-shadow: 0 8px 25px rgba(18, 171, 176, 0.4);
}

.back-to-top:hover {
    transform: translateY(-5px) scale(1.1);
    box-shadow: 0 15px 35px rgba(14, 123, 127, 0.6);
}

.dark-mode .back-to-top:hover {
    box-shadow: 0 15px 35px rgba(18, 171, 176, 0.6);
}
/* ===== NEWSLETTER MODAL - DARK MODE FIX ===== */
.newsletter-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.65);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2001;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    backdrop-filter: blur(5px);
    
}

.dark-mode .newsletter-modal {
    background: rgba(10, 14, 26, 0.85);
    
}

.newsletter-modal.active {
    opacity: 1;
    visibility: visible;
}

.newsletter-modal-content {
    background: var(--bg-secondary);
    border-radius: 1rem;
    padding: 2rem;
    width: 90%;
    max-width: 400px;
    transform: translateY(20px);
    transition: transform 0.3s ease;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    border: 1px solid #0E7B7F;
    text-align: center;
    color: var(--text-primary);
}

.dark-mode .newsletter-modal-content {
    background: var(--dark-card);
    border: 1px solid #12ABB0;
}

.newsletter-modal.active .newsletter-modal-content {
    transform: translateY(0);
}

.newsletter-modal-icon {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    color: var(--text-primary);
}

.newsletter-modal-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 1rem;
}

/* CRITICAL FIX: Ensure title is white in dark mode */
.dark-mode .newsletter-modal-title {
    color: #ffffff !important;
}

/* TWO ADDITIONAL LINES FOR MORE WHITE TEXT IN DARK MODE */
.dark-mode .newsletter-modal-message {
    color: #ffffff !important;
}

.dark-mode .newsletter-modal-icon {
    color: #ffffff !important;
}

.newsletter-modal-message {
    color: var(--text-secondary);
    margin-bottom: 1.5rem;
    line-height: 1.6;
}

.newsletter-modal-close {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: 0.75rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.dark-mode .newsletter-modal-close {
    background: linear-gradient(135deg, #12ABB0, #0d8a8e);
}

.newsletter-modal-close:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(14, 123, 127, 0.3);
}

/* === FOOTER STYLES - NO BORDERS, FULL WIDTH === */
.footer-card {
    background: #0a0e1a !important;
    border-bottom: none !important;  /* REMOVED BORDERS */
    padding: 1.1rem 1rem !important;
    border-right: none !important;   /* REMOVED BORDERS */
}
.footer-card:last-child {
    border-bottom: none !important;
}
.footer-container {
    background: #0a0e1a !important;
    margin-top: 2rem;
    padding: 0 !important;
    width: 100%;
    max-width: 100% !important;  /* FULL WIDTH */
    margin-left: 0 !important;
    margin-right: 0 !important;
}
@media (min-width: 768px) {
    .footer-top-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0;
    }
    .footer-top-row > .footer-card:first-child {
        border-right: none !important;  /* REMOVED BORDER */
    }
    .quick-links-card {
        grid-column: span 2;
    }
}
@media (max-width: 767px) {
    .footer-top-row {
        display: block;
    }
    .footer-card {
        padding: 1.5rem 0 !important;
        width: 100% !important;
    }
    .footer-container {
        padding-left: 0 !important;
        padding-right: 0 !important;
    }
}
.social-icon {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}
.social-icon:hover {
    transform: translateY(-3px);
}
.facebook-bg { background: #1877F2; }
.twitter-bg { background: #000000; }
.instagram-bg { background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D); }
.linkedin-bg { background: #0A66C2; }
.youtube-bg { background: #FF0000; }
.newsletter-input {
    transition: all 0.3s ease;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
}
.newsletter-input:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 2px rgba(14, 123, 127, 0.2);
    background: rgba(255, 255, 255, 0.08);
}
.newsletter-btn {
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    transition: all 0.3s ease;
}
.newsletter-btn:hover {
    background: linear-gradient(135deg, var(--primary-dark), var(--primary));
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(14, 123, 127, 0.4);
}
.feature-badge {
    background: linear-gradient(135deg, rgba(14, 123, 127, 0.15), rgba(14, 123, 127, 0.05));
    border: 1px solid rgba(14, 123, 127, 0.3);
}
.quick-links-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
}
@media (max-width: 768px) {
    .quick-links-grid a span.text-gray-300,
    .quick-links-grid a span.text-gray-400 {
        font-size: 0.75rem;
    }
    .quick-links-grid svg.w-3.h-3 {
        width: 1rem;
        height: 1rem;
    }
}
.gradient-text {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}
img {
    pointer-events: none !important;
    -webkit-user-select: none !important;
    user-select: none !important;
}
/* === 6 HASHTAGS - ROUNDED BG, LIKE AUTHOR BUT MORE ROUNDED === */
.hashtag-list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.6rem;
    margin: 1.8rem 0 1.2rem 0;
    align-items: center;
    justify-content: center; /* center-align on all devices */
}
.hashtag-item {
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    background: rgba(14, 123, 127, 0.08);
    color: #0E7B7F;
    padding: 0.2rem 0.8rem;
    border-radius: 40px; /* more rounded */
    font-size: 0.65rem;
    font-weight: 600;
    letter-spacing: 0.5px;
    border: 1px solid rgba(14, 123, 127, 0.15);
}
.dark-mode .hashtag-item {
    background: rgba(18, 171, 176, 0.1);
    color: #12ABB0;
    border-color: rgba(18, 171, 176, 0.2);
}
.hashtag-item i {
    font-size: 0.65rem;
    opacity: 0.9;
}

/* === SCROLL INDICATOR - AT TOP EDGE (HORIZONTAL) === */
.scroll-indicator {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 5px;
    background: rgba(14, 123, 127, 0.15);
    z-index: 9999;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
    opacity: 0;  /* Start hidden */
    transition: opacity 1s ease;  /* Smooth fade transition */
    pointer-events: none;  /* So it doesn't block clicks when invisible */
}

.scroll-indicator.visible {
    opacity: 1;
}

.scroll-progress {
    width: 0%;
    height: 100%;
    background: linear-gradient(90deg, var(--teal-color), var(--teal-dark));
    transition: width 0.1s ease;
    box-shadow: 0 0 15px rgba(14, 123, 127, 0.5);
    border-radius: 0 2px 2px 0;
}

.dark-mode .scroll-indicator {
    background: rgba(18, 171, 176, 0.2);
}

.dark-mode .scroll-progress {
    background: linear-gradient(90deg, #12ABB0, #0d8a8e);
    box-shadow: 0 0 20px #12ABB0;
}

/* Mobile optimization for scroll indicator */
@media (max-width: 768px) {
    .scroll-indicator {
        height: 4px;
    }
}

/* ===== TOOLBAR STYLES ===== */
.toolbar-container {
    max-width: 1000px;
    margin: 0.8rem auto 1rem auto;
    padding: 0;
    width: 100%;
}

.toolbar-collapsed {
    background: #0E7B7F;
    border-radius: 15px;
    padding: 0.2rem 0.5rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    border: 1px solid rgba(255,255,255,0.25);
    min-height: 48px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
.dark-mode .toolbar-collapsed { background: #12ABB0; }

.toolbar-expanded {
    background: #0E7B7F;
    border-radius: 15px;
    padding: 0.5rem 1rem;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    border: 1px solid rgba(255,255,255,0.25);
    min-height: 56px;
    animation: expandToolbar 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: center;
}
.dark-mode .toolbar-expanded { background: #12ABB0; }

@keyframes expandToolbar {
    0% { opacity: 0; transform: scale(0.95) translateY(-10px); }
    100% { opacity: 1; transform: scale(1) translateY(0); }
}

.toolbar-collapsed .toolbar-icons { animation: fadeInIcons 0.3s ease-out; }
@keyframes fadeInIcons {
    0% { opacity: 0; transform: translateY(-5px); }
    100% { opacity: 1; transform: translateY(0); }
}

/* Toolbar share panel - whitish background for all icons */
.toolbar-expanded .social-icon {
  background: rgba(255, 255, 255, 0.2) !important;
  border: 1px solid rgba(255, 255, 255, 0.4) !important;
  color: white !important;
}

/* Keep the copy button consistent */
.toolbar-expanded .copy-btn {
  background: rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.4);
  color: white;
}

.hidden-icon { 
    opacity: 0; transform: scale(0.8); transition: all 0.2s ease;
    pointer-events: none; display: none !important;
}

.toolbar-icons {
    display: flex; align-items: center; justify-content: space-evenly;
    gap: 0.8rem; width: 100%; padding: 0 0.2rem;
}
@media (max-width: 480px) { .toolbar-icons { gap: 0.3rem; } }

.toolbar-icon {
    background: transparent; border: none; color: white; font-size: 1.3rem;
    padding: 0; border-radius: 50%; cursor: pointer; display: flex;
    align-items: center; justify-content: center; transition: all 0.2s;
    width: 40px; height: 40px;
}
@media (max-width: 480px) { .toolbar-icon { width: 36px; height: 36px; font-size: 1.2rem; } }
.toolbar-icon:hover { background: rgba(255,255,255,0.2); transform: scale(1.05) rotate(5deg); }

.settings-panel {
    display: flex; align-items: center; gap: 1.2rem; color: white;
    font-weight: 500; flex-wrap: wrap; font-size: 0.85rem;
    animation: slideInSettings 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    width: 100%;
}
@keyframes slideInSettings {
    0% { opacity: 0; transform: translateX(-20px); }
    100% { opacity: 1; transform: translateX(0); }
}
.settings-item { display: flex; align-items: center; gap: 0.5rem; }

/* reaction grid with moving animation on hover */
.reaction-grid { display: flex; align-items: center; gap: 0.8rem; }
.reaction-icon {
    background: rgba(255,255,255,0.2); border: none; width: 40px; height: 40px;
    border-radius: 5px; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex; align-items: center; justify-content: center; color: white;
    padding: 0; animation: bounceIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}
.reaction-icon i { font-size: 16px !important; line-height: 1; display: block; }
.reaction-icon:hover {
    transform: translateY(-3px) scale(1.15) rotate(2deg);
    background: rgba(255,255,255,0.35);
    animation: wiggle 0.3s ease-in-out;
}
.reaction-icon:hover i { animation: pulse 0.3s ease-in-out; }

@keyframes pulse {
    0% { transform: scale(1); } 50% { transform: scale(1.3); } 100% { transform: scale(1); }
}
@keyframes bounceIn {
    0% { opacity: 0; transform: scale(0.3) translateY(-10px); }
    50% { opacity: 0.9; transform: scale(1.1); }
    80% { transform: scale(0.95); }
    100% { opacity: 1; transform: scale(1) translateY(0); }
}
@keyframes wiggle {
    0%, 100% { transform: translateY(-3px) scale(1.15) rotate(2deg); }
    25% { transform: translateY(-5px) scale(1.15) rotate(-4deg); }
    75% { transform: translateY(-1px) scale(1.15) rotate(4deg); }
}

.settings-item button, .settings-item select {
    background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.4);
    color: white; padding: 0.25rem 0.8rem; border-radius: 30px; font-size: 0.8rem;
    cursor: pointer; transition: all 0.2s ease;
}
.settings-item button:hover, .settings-item select:hover {
    background: rgba(255,255,255,0.3); transform: translateY(-1px);
}
select option { background: #0E7B7F; color: white; }

.text-size-slider { display: flex; align-items: center; gap: 1rem; }
.text-size-slider input {
    width: 200px; height: 6px; background: rgba(255,255,255,0.3);
    border-radius: 10px; accent-color: white; transition: all 0.2s ease;
}
.text-size-slider input:hover { transform: scaleY(1.5); }
@media (max-width: 480px) { .text-size-slider input { width: 150px; } }

/* listen panel */
.listen-controls {
    display: flex; align-items: center; gap: 1rem; flex-wrap: wrap; width: 100%;
}
.listen-controls-left {
    display: flex; align-items: center; gap: 0.8rem; flex-wrap: wrap;
}
.listen-controls-right {
    display: flex; align-items: center; gap: 1rem; margin-left: auto;
    flex: 1; max-width: 280px; justify-content: flex-end;
}
.speed-buttons {
    display: flex; align-items: center; gap: 0.4rem; background: rgba(255,255,255,0.15);
    padding: 0.2rem; border-radius: 30px;
}
.visualizer {
    display: flex; align-items: center; gap: 4px; height: 24px;
}
.visualizer span {
    width: 5px; height: 14px; background: rgba(255,255,255,0.9);
    border-radius: 3px; animation: none; transition: height 0.2s ease;
}
.visualizer.animating span {
    animation: soundwave 1.2s infinite ease-in-out;
}
.visualizer span:nth-child(2) { animation-delay: 0.6s; }
.visualizer span:nth-child(3) { animation-delay: 0.2s; }
.visualizer span:nth-child(4) { animation-delay: 0.4s; }
.visualizer span:nth-child(5) { animation-delay: 0.8s; }
@keyframes soundwave {
    0%, 100% { transform: scaleY(0.6); opacity: 0.8; }
    50% { transform: scaleY(1.4); opacity: 1; }
}

.speed-btn {
    background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.4);
    color: white; width: 38px; height: 38px; border-radius: 50%;
    font-size: 0.8rem; font-weight: 600; cursor: pointer; transition: all 0.2s ease;
    display: flex; align-items: center; justify-content: center;
}
.speed-btn:hover { transform: scale(1.1); background: rgba(255,255,255,0.3); }
.speed-btn.active { background: white; color: #0E7B7F; font-weight: bold; }

.progress-container {
    display: flex; align-items: center; width: 100%; min-width: 160px; gap: 0.5rem;
}
@media (min-width: 768px) { .progress-container { min-width: 200px; } }
@media (max-width: 640px) {
    .listen-controls-right { max-width: 100%; margin-left: 0; width: 100%; justify-content: space-between; }
    .progress-container { min-width: 140px; flex: 2; }
}

.progress-bar { flex: 1; height: 6px; background: rgba(255,255,255,0.25); border-radius: 10px; overflow: hidden; }
.progress-fill { width: 0%; height: 100%; background: white; transition: width 0.1s linear; }

.listen-icon-btn {
    background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.4);
    color: white; width: 42px; height: 42px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center; font-size: 1.2rem;
    cursor: pointer; transition: all 0.2s ease; flex-shrink: 0;
}
.listen-icon-btn:hover { transform: scale(1.1); background: rgba(255,255,255,0.3); }

/* Spinner for TTS loading */
.spinner {
    border: 2px solid rgba(255,255,255,0.3); border-top: 2px solid white;
    border-radius: 50%; width: 20px; height: 20px; animation: spin 0.8s linear infinite;
    display: inline-block;
}
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

/* Updated share grid with fixed X logo */
.share-grid {
    display: flex; align-items: center; gap: 0.8rem; flex-wrap: wrap;
}

/* ===== SOCIAL MEDIA ICONS - FULL FIX ===== */
/* Remove the ash color overlay from the generic social-icon class */
.social-icon {
  border: none;
  color: white;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  animation: popIn 0.3s ease-out;
  animation-fill-mode: both;
  position: relative;
  overflow: hidden;
}

/* Brand color backgrounds - MUST come after .social-icon */
.facebook-bg { background: #1877F2 !important; }
.twitter-bg { background: #000000 !important; }
.instagram-bg { 
  background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D) !important; 
}
.linkedin-bg { background: #0A66C2 !important; }
.youtube-bg { background: #FF0000 !important; }

.x-logo-svg { 
  width: 18px; 
  height: 18px; 
  fill: white; 
}

/* Staggered animation delays */
.social-icon:nth-child(1) { animation-delay: 0.05s; }
.social-icon:nth-child(2) { animation-delay: 0.1s; }
.social-icon:nth-child(3) { animation-delay: 0.15s; }
.social-icon:nth-child(4) { animation-delay: 0.2s; }
.social-icon:nth-child(5) { animation-delay: 0.25s; }
.social-icon:nth-child(6) { animation-delay: 0.3s; }

/* Pop-in animation */
@keyframes popIn {
  0% { opacity: 0; transform: scale(0.5) rotate(-10deg); }
  70% { opacity: 0.8; transform: scale(1.1) rotate(5deg); }
  100% { opacity: 1; transform: scale(1) rotate(0); }
}

/* Hover effect - lift and scale with subtle ash overlay */
.social-icon:hover {
  transform: translateY(-3px) scale(1.15);
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

/* Click/Active state - ash color flash animation */
.social-icon:active {
  background: rgba(255, 255, 255, 0.2) !important;
  transform: scale(0.95);
  transition: all 0.15s ease;
}

/* Icon spin animation on hover */
.social-icon:hover i,
.social-icon:hover svg {
  animation: spinIcon 0.3s ease-out;
}

@keyframes spinIcon {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Ensure SVG icons stay white */
.social-icon svg path {
  fill: white !important;
}

.copy-btn {
    background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.4);
    color: white; width: 38px; height: 38px; border-radius: 50%; display: flex;
    align-items: center; justify-content: center; font-size: 1rem; cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); animation: popIn 0.3s ease-out 0.35s both;
}
.copy-btn:hover { transform: translateY(-3px) scale(1.15); background: rgba(255,255,255,0.35); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
.copy-btn i { transition: all 0.2s ease; }
.copy-btn:hover i { animation: bounce 0.3s ease-out; }
@keyframes bounce { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }

.cross-button {
    background: rgba(255,255,255,0.25); border: none; color: white; width: 34px; height: 34px;
    border-radius: 50%; display: flex; align-items: center; justify-content: center;
    font-size: 1.1rem; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    flex-shrink: 0; margin-left: 0.5rem; animation: rotateIn 0.3s ease-out;
}
@keyframes rotateIn {
    0% { opacity: 0; transform: rotate(-180deg) scale(0.5); }
    100% { opacity: 1; transform: rotate(0) scale(1); }
}
.cross-button:hover { background: rgba(255,255,255,0.4); transform: rotate(90deg) scale(1.1); }
.cross-button i { font-size: 1.2rem; transition: all 0.2s ease; }

/* ===== POST-ARTICLE SECTION STYLES ===== */
.post-article-section {
    max-width: 1000px;
    margin: 1rem auto;
    padding: 0.8rem;
    background: var(--light-card);
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    transition: all 0.3s ease;
    animation: fadeInUp 0.5s ease-out;
}
.dark-mode .post-article-section {
    background: var(--dark-card);
}

/* === SECTION REVEAL ON SCROLL ANIMATION === */
.fade-up-section {
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1), transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.fade-up-section.visible {
    opacity: 1;
    transform: translateY(0);
}

/* Stagger children animations inside sections */
.fade-up-section .section-title,
.fade-up-section .share-section,
.fade-up-section .quiz-container,
.fade-up-section .author-box,
.fade-up-section .you-may-like-container,
.fade-up-section .categories-grid,
.fade-up-section .faq-container,
.fade-up-section .comment-form,
.fade-up-section .comments-grid {
    animation: fadeInContent 0.8s ease-out forwards;
}

@keyframes fadeInContent {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Stagger children with delays */
.fade-up-section .section-title { animation-delay: 0.1s; }
.fade-up-section .share-section { animation-delay: 0.2s; }
.fade-up-section .quiz-container { animation-delay: 0.25s; }
.fade-up-section .author-box { animation-delay: 0.3s; }
.fade-up-section .you-may-like-container { animation-delay: 0.35s; }
.fade-up-section .categories-grid { animation-delay: 0.4s; }
.fade-up-section .faq-container { animation-delay: 0.45s; }
.fade-up-section .comment-form { animation-delay: 0.5s; }
.fade-up-section .comments-grid { animation-delay: 0.55s; }

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.section-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1.2rem;
    color: var(--teal-color);
    position: relative;
    display: inline-block;
}
.dark-mode .section-title {
    color: var(--teal-bright);
}
.section-title::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 0;
    width: 60px;
    height: 3px;
    background: var(--teal-color);
    border-radius: 2px;
}
.dark-mode .section-title::after {
    background: var(--teal-bright);
}

/* Section header with proper alignment */
.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.2rem;
    flex-wrap: wrap;
    gap: 1rem;
    width: 100%;
}
.section-header .section-title {
    margin-bottom: 0;
    flex: 0 1 auto;
}
.section-header .view-all-btn {
    margin-left: auto;
    white-space: nowrap;
    flex: 0 0 auto;
}
.delete-all-btn {
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
    border: 1px solid #ef4444;
    padding: 0.4rem 1rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: all 0.3s ease;
}
.dark-mode .delete-all-btn {
    background: rgba(239, 68, 68, 0.2);
    color: #f87171;
    border-color: #f87171;
}
.delete-all-btn:hover {
    background: #ef4444;
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
}

/* Share Section - Centered */
.share-section {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
    gap: 1.5rem;
    padding: 1rem 0;
}
.share-label {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-secondary);
}
.dark-mode .share-label {
    color: var(--teal-bright);
}
.share-icons {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
    gap: 1rem;
}

.share-icon-btn {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: var(--primary-light);
    color: var(--teal-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.4rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid transparent;
    cursor: pointer;
}
.dark-mode .share-icon-btn {
    background: rgba(18, 171, 176, 0.15);
    color: var(--teal-bright);
}
.share-icon-btn:hover {
    transform: translateY(-3px) scale(1.1);
    background: var(--teal-color);
    color: white;
    border-color: var(--teal-color);
    box-shadow: 0 5px 15px rgba(14, 123, 127, 0.3);
}
.dark-mode .share-icon-btn:hover {
    background: var(--teal-bright);
    color: white;
}

/* Mini Quiz - 2 columns on desktop */
.quiz-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
}
@media (max-width: 768px) {
    .quiz-container {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
}
.quiz-item {
    background: rgba(14, 123, 127, 0.05);
    border-radius: 12px;
    padding: 1.2rem;
    border: 1px solid transparent;
    transition: all 0.3s ease;
}
.dark-mode .quiz-item {
    background: rgba(18, 171, 176, 0.1);
}
.quiz-item:hover {
    border-color: var(--teal-color);
    box-shadow: 0 4px 12px rgba(14, 123, 127, 0.1);
}
.dark-mode .quiz-item:hover {
    border-color: var(--teal-bright);
    box-shadow: 0 4px 12px rgba(18, 171, 176, 0.2);
}
.quiz-question {
    font-weight: 1000;
    margin-bottom: 1rem;
    color: var(--text-primary);
}
.dark-mode .quiz-question {
    color: #fff;
}
.quiz-options {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}
.quiz-option {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    color: var(--text-primary);
}
.dark-mode .quiz-option {
    color: #fff;
}
.quiz-option:hover {
    background: rgba(14, 123, 127, 0.1);
}
.dark-mode .quiz-option:hover {
    background: rgba(18, 171, 176, 0.15);
}
.quiz-option input[type="radio"] {
    accent-color: var(--teal-color);
    width: 18px;
    height: 18px;
}
.dark-mode .quiz-option input[type="radio"] {
    accent-color: var(--teal-bright);
}
.quiz-feedback {
    margin-top: 0.8rem;
    padding: 0.5rem;
    border-radius: 6px;
    font-size: 0.9rem;
    font-weight: 500;
    animation: slideIn 0.3s ease;
}
.quiz-feedback.correct {
    background: rgba(34, 197, 94, 0.1);
    color: #22c55e;
}
.quiz-feedback.incorrect {
    background: rgba(239, 68, 68, 0.1);
    color: #ef4444;
}
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(-10px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* Author Box */
.author-box {
    display: flex;
    gap: 1.5rem;
    align-items: flex-start;
}
@media (max-width: 640px) {
    .author-box {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }
}
.author-image {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid var(--teal-color);
    display: flex;
    align-items: center;
    justify-content: center;
    background: #0E7B7F;
    color: white;
    font-size: 3rem;
}
.dark-mode .author-image {
    border-color: var(--teal-bright);
}
.author-info {
    flex: 1;
}
.author-name {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--teal-color);
    margin-bottom: 0.3rem;
}
.dark-mode .author-name {
    color: var(--teal-bright);
}
.author-bio {
    color: var(--text-secondary);
    margin-bottom: 0.8rem;
    font-size: 0.95rem;
}
.dark-mode .author-bio {
    color: #b0c4de;
}
.author-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 0.8rem;
    /* default alignment (left) for desktop */
}
.author-tag {
    background: var(--primary-light);
    color: var(--teal-color);
    padding: 0.2rem 0.8rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 500;
}
.dark-mode .author-tag {
    background: rgba(18, 171, 176, 0.15);
    color: var(--teal-bright);
}

/* Center tags only on mobile */
@media (max-width: 760px) {
    .author-tags {
        justify-content: center;
    }
}
.author-link {
    color: white !important;
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    padding: 0.5rem 1rem;
    border-radius: 25px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(14, 123, 127, 0.3);
}
.dark-mode .author-link {
    color: white !important;
    background: linear-gradient(135deg, var(--teal-bright), var(--primary-dark));
    box-shadow: 0 2px 8px rgba(18, 171, 176, 0.3);
}
.author-link:hover {
    text-decoration: none;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(14, 123, 127, 0.4);
    background: linear-gradient(135deg, var(--primary-dark), var(--teal-light));
}
.dark-mode .author-link:hover {
    box-shadow: 0 4px 12px rgba(18, 171, 176, 0.4);
    background: linear-gradient(135deg, var(--primary-dark), var(--teal-bright));
}

/* You May Like - List Cards with Teal Border */
.you-may-like-container {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}
.list-card {
    display: flex;
    gap: 0.5rem;
    padding: 0.3rem;
    background: rgba(14, 123, 127, 0.05);
    border-radius: 12px;
    transition: all 0.3s ease;
    position: relative;
}
.dark-mode .list-card {
    background: rgba(18, 171, 176, 0.1);
}
.list-card:hover {
    transform: translateX(5px);
    background: var(--teal-color);
}
.dark-mode .list-card:hover {
    background: var(--teal-bright);
}
.list-card:hover .list-card-title,
.list-card:hover .list-card-description,
.list-card:hover .timestamp {
    color: white;
}
.list-card-image {
    width: 120px;
    height: 120px;
    border-radius: 10px;
    object-fit: cover;
    flex-shrink: 0;
}
@media (max-width: 480px) {
    .list-card-image {
        width: 120px;
        height: 120px;
    }
}
.list-card-content {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
}
.list-card-title {
    font-weight: 700;
    font-size: 1rem;
    color: var(--text-primary);
    margin-bottom: 0.3rem;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.4;
}
.dark-mode .list-card-title {
    color: #fff;
}
.list-card-description {
    font-size: 0.9rem;
    color: var(--text-secondary);
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.4;
}
.dark-mode .list-card-description {
    color: #b0c4de;
}
/* Timestamp and Read button */
.list-card-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 0.3rem;
}
.timestamp {
    font-size: 0.7rem;
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    gap: 0.3rem;
}
.timestamp i {
    font-size: 0.65rem;
    color: inherit;
}
.read-btn {
    background: #0E7B7F;
    color: white;
    border: none;
    padding: 0.2rem 0.8rem;
    border-radius: 20px;
    font-size: 0.7rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    text-decoration: none;
    display: inline-block;
    z-index: 10;
    position: relative;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}
.dark-mode .read-btn {
    background: #12ABB0;
}
.read-btn:hover {
    background: var(--teal-dark);
    transform: scale(1.05);
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
}
.list-card:hover .read-btn {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}
.dark-mode .list-card:hover .read-btn {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

/* ===== EXPLORE CATEGORIES — FIXED ===== */
.categories-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
}
@media (max-width: 640px) {
    .categories-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

.category-card {
    background: rgba(14, 123, 127, 0.05);
    border-radius: 10px;
    padding: 1.2rem;
    text-align: center;
    transition: all 0.3s ease;
    cursor: pointer;
    border: 1px solid var(--teal-color);
    text-decoration: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}
.dark-mode .category-card {
    background: rgba(18, 171, 176, 0.1);
}

.category-card:hover {
    transform: translateY(-3px);
    border-color: var(--teal-color);
    background: var(--teal-color);
}
.dark-mode .category-card:hover {
    border-color: var(--teal-bright);
    background: var(--teal-bright);
}

.category-card:hover .category-icon svg,
.category-card:hover .category-name {
    color: white;
}

.category-icon {
    margin-bottom: 0.5rem;
    display: flex;
    justify-content: center;
    align-items: center;
}

.category-icon svg {
    width: 32px;
    height: 32px;
    color: var(--teal-color);
    display: block;
}

.dark-mode .category-icon svg {
    color: var(--teal-bright);
}

.category-name {
    font-weight: 600;
    color: var(--text-primary);
    line-height: 1.3;
}
.dark-mode .category-name {
    color: #fff;
}

/* FAQ - single expand */
.faq-container {
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
}
.faq-item {
    border: 1px solid var(--teal-color);
    border-radius: 10px;
    overflow: hidden;
}
.dark-mode .faq-item {
    border-color: var(--teal-bright);
}
.faq-question {
    padding: 1rem;
    background: rgba(14, 123, 127, 0.05);
    font-weight: 600;
    color: #000;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.2s ease;
}
.dark-mode .faq-question {
    background: rgba(18, 171, 176, 0.1);
    color: #fff;
}
.faq-question:hover {
    background: rgba(14, 123, 127, 0.1);
}
.dark-mode .faq-question:hover {
    background: rgba(18, 171, 176, 0.15);
}
.faq-question i {
    transition: transform 0.3s ease;
}
.faq-question.active i {
    transform: rotate(180deg);
}
.faq-answer {
    max-height: 0;
    overflow: hidden;
    padding: 0 1rem;
    background: var(--light-card);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    color: var(--text-primary);
}
.dark-mode .faq-answer {
    background: var(--dark-card);
    color: #fff;
}
.faq-answer.show {
    max-height: 200px;
    padding: 1rem;
}

/* Comments */
.comment-form {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 1.5rem;
}
.comment-input {
    padding: 0.8rem;
    border: 1px solid var(--teal-color);
    border-radius: 8px;
    background: var(--light-card);
    color: var(--text-primary);
    font-size: 0.95rem;
    transition: all 0.2s ease;
}
.dark-mode .comment-input {
    background: #1e293b;
    border-color: var(--teal-bright);
    color: #f1f5f9;
}
.comment-input:focus {
    outline: none;
    border-color: var(--teal-color);
    box-shadow: 0 0 0 2px rgba(14, 123, 127, 0.2);
}
.dark-mode .comment-input:focus {
    border-color: var(--teal-bright);
    box-shadow: 0 0 0 2px rgba(18, 171, 176, 0.4), 0 0 15px var(--teal-bright);
}
.comment-submit {
    background: var(--teal-color);
    color: white;
    border: none;
    padding: 0.8rem;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}
.dark-mode .comment-submit {
    background: var(--teal-bright);
}
.comment-submit:hover {
    background: var(--teal-dark);
    transform: translateY(-2px);
}
.dark-mode .comment-submit:hover {
    background: #0d8a8e;
}
.comments-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}
@media (max-width: 768px) {
    .comments-grid {
        grid-template-columns: 1fr;
    }
}
.comment-item {
    background: rgba(14, 123, 127, 0.03);
    border-radius: 8px;
    padding: 1rem;
    animation: slideIn 0.3s ease;
    border: 1px solid transparent;
    position: relative;
    break-inside: avoid;
}
.dark-mode .comment-item {
    background: rgba(18, 171, 176, 0.05);
}
.comment-item:hover {
    border-color: var(--teal-color);
}
.dark-mode .comment-item:hover {
    border-color: var(--teal-bright);
}
.comment-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
}
.comment-name {
    font-weight: 600;
    color: var(--teal-color);
}
.dark-mode .comment-name {
    color: var(--teal-bright);
}
.comment-date {
    font-size: 0.75rem;
    color: var(--text-secondary);
}
.comment-text {
    color: var(--text-primary);
    font-size: 0.95rem;
    margin-bottom: 0.5rem;
}
.comment-delete {
    background: none;
    border: none;
    color: #ef4444;
    font-size: 0.8rem;
    cursor: pointer;
    padding: 0.3rem;
    border-radius: 50%;
    transition: all 0.2s ease;
    position: absolute;
    bottom: 0.5rem;
    right: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
}
.comment-delete:hover {
    background: rgba(239, 68, 68, 0.1);
}
.comment-delete i {
    margin: 0;
    font-size: 12px;
}
/* View All button */
.view-all-btn {
    background: linear-gradient(135deg, var(--teal-color), var(--teal-dark));
    color: white;
    border: none;
    padding: 0.6rem 1.5rem;
    border-radius: 25px;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-block;
    width: fit-content;
    text-decoration: none;
    box-shadow: 0 2px 8px rgba(14, 123, 127, 0.3);
}
.dark-mode .view-all-btn {
    background: linear-gradient(135deg, var(--teal-bright), var(--primary-dark));
    box-shadow: 0 2px 8px rgba(18, 171, 176, 0.3);
}
.view-all-btn:hover {
    background: linear-gradient(135deg, var(--teal-dark), var(--teal-light));
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(14, 123, 127, 0.4);
}
.dark-mode .view-all-btn:hover {
    background: linear-gradient(135deg, var(--primary-dark), var(--teal-bright));
    box-shadow: 0 4px 12px rgba(18, 171, 176, 0.4);
}
.view-all-btn i {
    margin-left: 0.5rem;
    font-size: 0.8rem;
}
.hidden-comments {
    display: none !important;
}
/* Hidden class */
.hidden {
    display: none !important;
}

/* === VIEW TRANSITION ANIMATION === */
@supports (view-transition-name: none) {
::view-transition-old(root),
::view-transition-new(root) {
animation: none;
mix-blend-mode: normal;
}
::view-transition-old(root) {
z-index: 1;
}
::view-transition-new(root) {
z-index: 9999;
}
.dark-mode::view-transition-old(root) {
z-index: 9999;
}
.dark-mode::view-transition-new(root) {
z-index: 1;
}
}

/* Image lazy loading blur effect */
img[loading="lazy"] {
    filter: blur(10px);
    transition: filter 0.5s ease-out;
}

img[loading="lazy"].loaded {
    filter: blur(0);
}

/* Ensure all images have lazy loading class */
img:not([loading]) {
    loading: lazy;
}

/* === DYNAMIC INTERNAL LINK BOX === */
.dynamic-link-box {
    background: rgba(14, 123, 127, 0.05);
    border-left: 4px solid var(--primary);
    padding: 0.3rem;
    margin-top: 0.5rem;
    margin-bottom: 1rem;
    border-radius: 8px;
    transition: all 0.3s ease;
    animation: fadeInLink 0.5s ease-out;
    display: flex;
    align-items: flex-start;
    
    /* Required for the shimmer effect to stay inside the box */
    position: relative;
    overflow: hidden; 
}

/* Shimmer Effect (Pseudo-element) */
.dynamic-link-box::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 50%;
    height: 100%;
    background: linear-gradient(
        to right,
        rgba(255, 255, 255, 0) 0%,
        rgba(14, 123, 127, 0.1) 50%,  /* Increased from 0.15 to 0.4 for better visibility */
        rgba(255, 255, 255, 0) 100%
    );
    transform: skewX(-25deg);
    animation: shimmerMove 3s infinite;  /* Slowed from 3s to 6s */
    pointer-events: none; /* Ensures clickability isn't blocked */
    z-index: 1;
}

/* Dark Mode Shimmer Adjustment */
.dark-mode .dynamic-link-box::before {
    background: linear-gradient(
        to right,
        rgba(255, 255, 255, 0) 0%,
        rgba(18, 171, 176, 0.1) 50%,
        rgba(255, 255, 255, 0) 100%
    );
}

.dark-mode .dynamic-link-box {
    background: rgba(18, 171, 176, 0.1);
    border-left-color: var(--teal-bright);
}

.dynamic-link-text {
    color: var(--primary);
    font-weight: 600;
    text-decoration: none;
    display: flex;
    align-items: flex-start;
    gap: 0.2rem;
    font-size: 1.05rem;
    line-height: 1.4;
    transition: opacity 0.2s ease;
    flex: 1;
    min-width: 0;
    position: relative; /* Ensures text stays above shimmer */
    z-index: 2;
}

.dark-mode .dynamic-link-text {
    color: var(--teal-bright);
}

.dynamic-link-text:hover {
    text-decoration: underline;
    opacity: 0.8;
}

.dynamic-link-text svg {
    flex-shrink: 0;
    width: 20px;
    height: 20px;
    margin-top: 0.1rem;
}

.link-text-span {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: 1;
}

/* Mobile: 2 lines with dots */
@media (max-width: 768px) {
    .link-text-span {
        -webkit-line-clamp: 2;
    }
}

@keyframes fadeInLink {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Shimmer Animation Keyframes */
@keyframes shimmerMove {
    0% {
        left: -100%;
    }
    20% {
        left: 200%; /* Moves quickly across */
    }
    100% {
        left: 200%; /* Waits before repeating */
    }
}
/* === COMPACT SOURCE BUTTONS === */
.source-section {
    margin-top: 1rem;
    margin-bottom: 1.5rem;
}

.source-divider {
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(107, 114, 128, 0.4), transparent);
    margin: 1rem 0;
}

.dark-mode .source-divider {
    background: linear-gradient(90deg, transparent, rgba(148, 163, 184, 0.3), transparent);
}

.source-label {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--text-secondary);
    font-weight: 600;
    display: block;
    margin-bottom: 0.6rem;
    text-align: center;
}

.dark-mode .source-label {
    color: #94a3b8;
}

.source-btns {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    justify-content: center;
    margin-top: 0.8rem;
}

.source-btn {
    font-size: 0.7rem;
    padding: 0.35rem 0.85rem;
    border-radius: 20px;
    background: rgba(14, 123, 127, 0.08);
    color: var(--primary);
    text-decoration: none;
    border: 1px solid rgba(14, 123, 127, 0.15);
    transition: all 0.2s ease;
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    font-weight: 600;
    flex: 1;
    min-width: 120px;
    max-width: 200px;
    justify-content: center;
}

.source-btn:hover {
    background: var(--primary);
    color: white;
    transform: translateY(-1px);
}

.dark-mode .source-btn {
    background: rgba(18, 171, 176, 0.1);
    color: var(--teal-bright);
    border-color: rgba(18, 171, 176, 0.2);
}

.dark-mode .source-btn:hover {
    background: var(--teal-bright);
    color: white;
}

.source-btn i {
    font-size: 0.65rem;
    opacity: 0.8;
}
</style>
<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
<!-- BACK TO TOP BUTTON -->
<div class="back-to-top" id="backToTop" aria-label="Back to top">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <path d="M18 15l-6-6-6 6"/>
    </svg>
</div>

<!-- NEWSLETTER MODAL -->
<div class="newsletter-modal" id="newsletterModal">
    <div class="newsletter-modal-content">
        <div class="newsletter-modal-icon">🚧</div>
        <h3 class="newsletter-modal-title">Newsletter Under Development</h3>
        <p class="newsletter-modal-message">
            Our newsletter system is currently being upgraded with enhanced features.
            <br><br>
            In the meantime, you can follow us on social media for the latest updates.
        </p>
        <button class="newsletter-modal-close" id="newsletterModalClose">Got it!</button>
    </div>
</div>

<!-- SCROLL INDICATOR - AT TOP EDGE (HORIZONTAL) -->
<div class="scroll-indicator">
    <div class="scroll-progress" id="scrollProgress"></div>
</div>

<!-- THEME TOGGLE BUTTON -->
<button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
   <svg class="theme-icon sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <circle cx="12" cy="12" r="5" fill="none" stroke="currentColor" stroke-width="2"/>
    <line x1="12" y1="1" x2="12" y2="3" stroke="currentColor" stroke-width="2"/>
    <line x1="12" y1="21" x2="12" y2="23" stroke="currentColor" stroke-width="2"/>
    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" stroke="currentColor" stroke-width="2"/>
    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" stroke="currentColor" stroke-width="2"/>
    <line x1="1" y1="12" x2="3" y2="12" stroke="currentColor" stroke-width="2"/>
    <line x1="21" y1="12" x2="23" y2="12" stroke="currentColor" stroke-width="2"/>
    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" stroke="currentColor" stroke-width="2"/>
    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" stroke="currentColor" stroke-width="2"/>
</svg>
    <svg class="theme-icon moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" fill="none" stroke="currentColor" stroke-width="2"/>
    </svg>
    <span class="sr-only">Toggle theme</span>
</button>

<!-- MENU TOGGLE BUTTON - ICONS ALWAYS WHITE -->
<button class="menu-toggle" id="menuToggle" aria-label="Open menu">
    <span></span>
    <span></span>
    <span></span>
</button>

<!-- MENU CARD (with teal line on hover) - DARK MODE STYLED -->
<div class="menu-card" id="menuCard">
    <div class="menu-header">
        <h3>Menu</h3>
        <button class="menu-close" id="menuClose" aria-label="Close menu">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
        </button>
    </div>
    <ul class="menu-list">
        <li class="menu-item">
            <a href="https://techtonic-times.github.io/home/" class="menu-link">
                <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                    <polyline points="9 22 9 12 15 12 15 22"/>
                </svg>
                Home
            </a>
        </li>
        <li class="menu-item dropdown-parent">
            <button class="menu-link dropdown-toggle">
                <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <rect x="3" y="3" width="7" height="7"/>
                    <rect x="14" y="3" width="7" height="7"/>
                    <rect x="14" y="14" width="7" height="7"/>
                    <rect x="3" y="14" width="7" height="7"/>
                </svg>
                Categories
                <svg class="dropdown-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M9 18l6-6-6-6"/>
                </svg>
            </button>
            <ul class="dropdown-menu">
                <li>
                    <a href="https://techtonic-times.github.io/tech/" class="dropdown-item">
                        <span class="subcategory-name">Technology</span>
                        <svg class="subcategory-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </li>
                <li>
                    <a href="https://techtonic-times.github.io/science/" class="dropdown-item">
                        <span class="subcategory-name">Science</span>
                        <svg class="subcategory-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </li>
                <li>
                    <a href="https://techtonic-times.github.io/ai/" class="dropdown-item">
                        <span class="subcategory-name">AI & Data</span>
                        <svg class="subcategory-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </li>
                <li>
                    <a href="https://techtonic-times.github.io/cyber/" class="dropdown-item">
                        <span class="subcategory-name">Cyber World</span>
                        <svg class="subcategory-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </li>
                <li>
                    <a href="https://techtonic-times.github.io/future/" class="dropdown-item">
                        <span class="subcategory-name">Future Tech</span>
                        <svg class="subcategory-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </li>
                <li>
                    <a href="https://techtonic-times.github.io/explanations/" class="dropdown-item">
                        <span class="subcategory-name">Explanations</span>
                        <svg class="subcategory-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </a>
                </li>
            </ul>
        </li>
        <li class="menu-item">
            <a href="https://techtonic-times.github.io/home/archive.html" class="menu-link">
                <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                    <line x1="16" y1="2" x2="16" y2="6"/>
                    <line x1="8" y1="2" x2="8" y2="6"/>
                    <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
                Archives
            </a>
        </li>
        <li class="menu-item">
            <a href="https://www.techtontic-times.com/submit-article" class="menu-link">
                <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2H16a2 2 0 0 0 2-2v-8"/>
                    <polyline points="14 2 14 8 20 8"/>
                    <line x1="16" y1="13" x2="8" y2="13"/>
                    <line x1="16" y1="17" x2="8" y2="17"/>
                    <polyline points="10 9 9 9 8 9"/>
                    <path d="M20 4v5h-5"/>
                </svg>
                Submit Your Article
            </a>
        </li>
        <li class="menu-item">
            <a href="https://www.techtontic-times.com/community" class="menu-link">
                <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                    <circle cx="9" cy="7" r="4"/>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                </svg>
                Community
            </a>
        </li>
        <li class="menu-item">
            <a href="https://www.techtontic-times.com/about" class="menu-link">
                <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="12" y1="16" x2="12" y2="12"/>
                    <line x1="12" y1="8" x2="12.01" y2="8"/>
                </svg>
                About Us
            </a>
        </li>
        <li class="menu-item">
            <a href="https://www.techtontic-times.com/contact" class="menu-link">
                <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                    <polyline points="22,6 12,13 2,6"/>
                </svg>
                Contact Us
            </a>
        </li>
    </ul>
</div>

<!-- BACKDROP FOR MENU -->
<div class="backdrop" id="backdrop"></div>

<!-- BREADCRUMB - EXACT TOOLIVO STYLE, 5px FROM TOP -->
<nav aria-label="Breadcrumb" class="breadcrumb">
<ul>
    <li><a href="https://techtonic-times.github.io/home/"><i class="fas fa-home"></i> Home</a></li>
    <li><a href="https://techtonic-times.github.io/science/">Science & Research</a></li>
    <li aria-current="page">Tiny Cleaner Wrasse Intelligence Redefines Animal Self Awareness Research</li>
</ul>
</nav>

<!-- HEADER WITH LOGO - BIGGER, 2-ROW STYLE -->
<header>
    <div class="logo-container">
        <a href="https://techtonic-times.github.io/home/">
            <img 
                src="https://techtonic-times.github.io/home/techtonic-logo.webp" 
                alt="TechTonic Times Logo" 
                class="logo"
                loading="lazy"
                onerror="this.style.display='none'; this.nextElementSibling.style.display='block';"
                onload="this.classList.add('loaded')"
            >
            <span style="display:none; color:white; font-size:1.5rem; font-weight:bold;">TechTonic Times</span>
        </a>
        <span class="logo-tagline">Feel the Pulse of Progress</span>
    </div>
</header>

<!-- ARTICLE TAG (BADGE) - EXACT TOOLIVO STYLE WITH CLICKABLE SVG -->
<div class="article-tag">
    <a href="https://techtonic-times.github.io/science/" class="article-badge" style="text-decoration: none; display: inline-flex; align-items: center; gap: 0.3rem;">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16" height="16" style="color: white;">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
        </svg>
        Science & Research
    </a>
</div>

<!-- ARTICLE MAIN TITLE (H1) - EXACT TOOLIVO STYLE -->
<div class="article-main-title">
    <h1 id="articleMainTitle">Tiny Cleaner Wrasse Intelligence Redefines Animal Self Awareness Research</h1>
</div>

<!-- ARTICLE SECTION CARD - EXACT TOOLIVO STYLE -->
<section class="article-section fade-up-section" id="mainArticleSection">
    <div class="article-header">
        <!-- ARTICLE META - UPDATED: Date left, Author right, smaller font/padding -->
        <div class="article-meta">
            <div class="article-date">
  <i class="fas fa-calendar-alt meta-icon"></i>
<span>March 01, 2026 12:30 AM EST</span>

  <span class="meta-separator">•</span>

  <i class="fas fa-clock meta-icon"></i>
  <span>6 min read</span>
</div>
            <div class="article-author">
                <i class="fas fa-user meta-icon"></i>
                <span>Sophia Reynolds</span>
            </div>
        </div>
    </div>

    <div class="article-single-content" id="articleContent">
       
       
       
       
       
        

<p>We have generally assumed that only big, brained mammals possess self-awareness, abstract thinking, and the ability to understand one's own reflection. When we think of animals capable of high-order cognition, dolphins, great apes, and elephants are typically the ones we imagine. So when research on cleaner wrasse intelligence reveals a fish only the size of your finger behaving in ways that suggest genuine fish self-awareness, it leads to an unsettling question: have we been severely underestimating the cognitive abilities of marine creatures?</p>

 <div class="toolbar-container">
            <div id="toolbar" class="toolbar-collapsed">
                <div id="iconGroup" class="toolbar-icons">
                    <button id="iconLang" class="toolbar-icon" title="Language"><i class="fas fa-language"></i></button>
                    <button id="iconTextSize" class="toolbar-icon" title="Text size"><i class="fas fa-text-height"></i></button>
                    <button id="iconLike" class="toolbar-icon" title="React"><span id="likeEmoji"><i class="far fa-heart"></i></span></button>
                    <button id="iconShare" class="toolbar-icon" title="Share"><i class="fa-solid fa-share"></i></button>
                    <button id="iconListen" class="toolbar-icon" title="Listen"><i class="fas fa-headphones-alt"></i></button>
                </div>
            </div>
        </div>

       
        <div style="display: none;" id="ttsContent">
            <!-- English -->
            <div data-lang="en">
                <p>We have generally assumed that only big, brained mammals possess self-awareness, abstract thinking, and the ability to understand one's own reflection… When we think of animals capable of high-order cognition, dolphins, great apes, and elephants are typically the ones we imagine… So when a fish only the size of your finger starts behaving in a way that looks very much like it is engaged in philosophical inquiry, it leads to an unsettling question… have we been severely underestimating the cognitive abilities of marine creatures?… A tiny, brightly colored reef fish known as the cleaner wrasse, Labroides dimidiatus, has gone against the grain of assumptions regarding the limits of animal intelligence… In a series of mirror experiments with meticulous control, scientists from Osaka Metropolitan University, Japan, observed these fish carry out a remarkable act… one that had only been documented in dolphins and manta rays so far… The results, which appeared in Scientific Reports, are leading the scientific community to reconsider the timeline of self-awareness in evolution… ###The Fish That Looked in the Mirror — and Actually Understood It… The mirror self-recognition test is a very popular method which is used in animal cognition research to test animals' self-awareness… The concept is straightforward… when an animal is placed in front of a mirror and its body is marked with something that it cannot directly see, the animal, if self-aware, would use a mirror to see the mark and investigate it… Self-awareness is therefore suggested by such behavior, that is, the animal knows the reflection is of itself and not some other creature… Cleaner wrasse have already been proven to pass this particular test in previous research… However, the Osaka team, led by Shumpei Sogawa and Professor Masanori Kohda, after closely observing the fish, found that changing the sequence of the experiment brought out a very different behavior in the fish… Before the fish was let to see the mirror for the first time, they were marked first… Very notable was the change… Instead of taking days to associate the reflection with themselves, the fish were observed to almost immediately start scraping the mark… The explanation goes along the line that they probably knew that there was something on their body, with the mirror granting them the visual evidence that they needed to recognize it… It was a lot quicker than anyone thought… ###Dropping Shrimp to Understand Reality… That was very exciting, but the fish behavior that really amazed the scientists came later… After several days of exposure to the mirror, some fish would pick up tiny pieces of shrimp from the aquarium floor and swim toward the mirror before deliberately letting the food drop in front of the glass… They then followed the shrimp falling very carefully… not by direct sight but by observing its reflection as it came down… They touched the glass several times while following the movement in the mirror… It looked like the fish were conducting a controlled experiment… they dropped an external object and checked if the reflected movement matched the reality… Such behavior is called in cognitive science contingency testing… Animals carry out this clever mental process of probing the mirror's rules not only by moving their bodies but also by manipulating an external object and observing the result… So far, only dolphins which release bubbles and watch them go up in reflections and manta rays, which carry out similar exploratory behavior, have been at this level of mirror investigation… Finding it in a fish puts into question the idea that such cognition entails a large, mammalian brain… ###Why This Changes the Story of Intelligence… The cleaner wrasse lacks a particularly large brain… It's a social reef fish, about ten centimeters in length, most famous for picking parasites off larger fish at the cleaning stations along the coral reefs… The fish constantly coexists in a world of social negotiation… figuring out which fish to clean, when to cooperate, and how to handle relationships… Some scientists are of the opinion that this intricate social setting could have been the exact reason that cognitive sophistication of the cleaner wrasse evolved… The remarkable aspect of the new discoveries is not only the actions of the fish but also what those actions reveal… Testing of contingency is not a reflex… It involves having an image of oneself mentally, making a guess about the mirror, and then using a tool… a piece of shrimp in this case… to test the guess… This reasoning sequence was believed to require a brain that only mammals have… ###Rethinking the Boundaries of Animal Minds… This finding is consistent with a larger pattern of animal cognition discoveries… Octopuses can solve puzzles… Bees exhibit some playful behavior… Fish are tools users, can recognize human faces and, as the latest evidence shows, are even capable of conducting simple experiments… The more thoroughly scientists examine the animal mind, the more they are amazed by the presence of cognition in so far unthought-of places… The consequences of such discoveries extend far beyond mere academic curiosity… The fact that abilities like self-awareness and abstract reasoning have been found in several species independently… fish, mammals, maybe even others… is a strong indication that these abilities are not rare biological freaks but rather something that complex social life tends to produce… Intelligence, therefore, is probably less of a ladder with humans at the top and more of a network that arises wherever the conditions are suitable… The cleaner wrasse has not only passed a cognitive test but, in a way, it may have been the facilitator of science passing one as well.</p>
            </div>
            <!-- Spanish -->
            <div data-lang="es">
                <p>Hemos asumido generalmente que solo los mamíferos grandes y con cerebros desarrollados poseen autoconciencia, pensamiento abstracto y la capacidad de entender su propio reflejo… Cuando pensamos en animales capaces de cognición de alto orden, los delfines, los grandes simios y los elefantes son típicamente los que imaginamos… Así que cuando un pez del tamaño de tu dedo comienza a comportarse de una manera que parece muy parecida a que está participando en una indagación filosófica, lleva a una pregunta inquietante… ¿hemos estado subestimando severamente las habilidades cognitivas de las criaturas marinas?… Un pequeño pez de arrecife de colores brillantes conocido como el pez limpiador, Labroides dimidiatus, ha ido en contra de la corriente de las suposiciones con respecto a los límites de la inteligencia animal… En una serie de experimentos con espejos con control meticuloso, científicos de la Universidad Metropolitana de Osaka, Japón, observaron a estos peces llevar a cabo un acto notable… uno que solo se había documentado en delfines y mantarrayas hasta ahora… Los resultados, que aparecieron en Scientific Reports, están llevando a la comunidad científica a reconsiderar la línea de tiempo de la autoconciencia en la evolución… ###El Pez Que Miró en el Espejo — y Realmente Lo Entendió… La prueba de autoconciencia en el espejo es un método muy popular que se usa en la investigación de cognición animal para probar la autoconciencia de los animales… El concepto es sencillo… cuando un animal se coloca frente a un espejo y su cuerpo se marca con algo que no puede ver directamente, el animal, si es autoconsciente, usaría un espejo para ver la marca e investigarla… Por lo tanto, la autoconciencia se sugiere por tal comportamiento, es decir, el animal sabe que el reflejo es de sí mismo y no de alguna otra criatura… Los peces limpiadores ya han demostrado pasar esta prueba particular en investigaciones previas… Sin embargo, el equipo de Osaka, liderado por Shumpei Sogawa y el Profesor Masanori Kohda, después de observar de cerca a los peces, encontró que cambiar la secuencia del experimento provocó un comportamiento muy diferente en los peces… Antes de que se dejara ver el espejo al pez por primera vez, fueron marcados primero… Muy notable fue el cambio… En lugar de tomar días para asociar el reflejo con ellos mismos, se observó que los peces comenzaban casi inmediatamente a rascar la marca… La explicación va en la línea de que probablemente sabían que había algo en su cuerpo, con el espejo otorgándoles la evidencia visual que necesitaban para reconocerlo… Fue mucho más rápido de lo que cualquiera pensó… ###Dejando Caer Camarones para Entender la Realidad… Eso fue muy emocionante, pero el comportamiento de los peces que realmente asombró a los científicos vino después… Después de varios días de exposición al espejo, algunos peces recogían pequeños trozos de camarón del suelo del acuario y nadaban hacia el espejo antes de dejar caer deliberadamente la comida frente al cristal… Luego seguían la caída del camarón muy cuidadosamente… no por visión directa sino observando su reflejo mientras caía… Tocaron el cristal varias veces mientras seguían el movimiento en el espejo… Parecía que los peces estaban conduciendo un experimento controlado… dejaron caer un objeto externo y verificaron si el movimiento reflejado coincidía con la realidad… Tal comportamiento se llama en ciencia cognitiva prueba de contingencia… Los animales llevan a cabo este proceso mental inteligente de sondear las reglas del espejo no solo moviendo sus cuerpos sino también manipulando un objeto externo y observando el resultado… Hasta ahora, solo los delfines que liberan burbujas y las observan subir en los reflejos y las mantarrayas, que llevan a cabo un comportamiento exploratorio similar, han estado en este nivel de investigación con espejos… Encontrarlo en un pez pone en duda la idea de que tal cognición requiere un cerebro grande de mamífero… ###Por Qué Esto Cambia la Historia de la Inteligencia… El pez limpiador carece de un cerebro particularmente grande… Es un pez de arrecife social, de unos diez centímetros de longitud, más famoso por recoger parásitos de peces más grandes en las estaciones de limpieza a lo largo de los arrecifes de coral… El pez coexiste constantemente en un mundo de negociación social… descubriendo qué peces limpiar, cuándo cooperar y cómo manejar las relaciones… Algunos científicos son de la opinión de que este entorno social intrincado podría haber sido la razón exacta por la que evolucionó la sofisticación cognitiva del pez limpiador… El aspecto notable de los nuevos descubrimientos no son solo las acciones de los peces sino también lo que esas acciones revelan… La prueba de contingencia no es un reflejo… Implica tener una imagen de uno mismo mentalmente, hacer una conjetura sobre el espejo y luego usar una herramienta… un trozo de camarón en este caso… para probar la conjetura… Se creía que esta secuencia de razonamiento requería un cerebro que solo los mamíferos tienen… ###Reconsiderando los Límites de las Mentes Animales… Este hallazgo es consistente con un patrón más amplio de descubrimientos de cognición animal… Los pulpos pueden resolver acertijos… Las abejas exhiben algún comportamiento juguetón… Los peces son usuarios de herramientas, pueden reconocer caras humanas y, como muestra la evidencia más reciente, incluso son capaces de conducir experimentos simples… Cuanto más minuciosamente los científicos examinan la mente animal, más se asombran por la presencia de cognición en lugares hasta ahora insospechados… Las consecuencias de tales descubrimientos se extienden mucho más allá de la mera curiosidad académica… El hecho de que habilidades como la autoconciencia y el razonamiento abstracto se hayan encontrado en varias especies independientemente… peces, mamíferos, quizás incluso otros… es una fuerte indicación de que estas habilidades no son rarezas biológicas raras sino más bien algo que la vida social compleja tiende a producir… La inteligencia, por lo tanto, es probablemente menos una escalera con los humanos en la cima y más una red que surge dondequiera que las condiciones sean adecuadas… El pez limpiador no solo ha pasado una prueba cognitiva sino que, de cierta manera, puede haber sido el facilitador de que la ciencia pase una también.</p>
            </div>
            <!-- Hindi -->
            <div data-lang="hi">
                <p>हमने आम तौर पर यह माना है कि केवल बड़े, विकसित मस्तिष्क वाले स्तनधारी ही आत्म-जागरूकता, अमूर्त चिंतन और अपने स्वयं के प्रतिबिंब को समझने की क्षमता रखते हैं… जब हम उच्च कोटि की संज्ञानात्मक क्षमताओं वाले जानवरों के बारे में सोचते हैं, तो डॉल्फ़िन, ग्रेट एप्स और हाथी आमतौर पर वे हैं जिनकी हम कल्पना करते हैं… इसलिए जब आपकी उंगली के आकार का एक मछली ऐसे व्यवहार करना शुरू कर देता है जो बहुत अधिक दार्शनिक जांच में लगा हुआ प्रतीत होता है, तो यह एक चिंताजनक प्रश्न की ओर ले जाता है… क्या हमने समुद्री जीवों की संज्ञानात्मक क्षमताओं को गंभीर रूप से कम आंका है?… क्लीनर रैस नामक एक छोटी, चमकीले रंग की रिफ मछली, लैब्रॉइड्स डिमिडिएटस, ने जानवरों की बुद्धि की सीमाओं के बारे में धारणाओं के विपरीत जाकर काम किया है… ओसाका मेट्रोपोलिटन यूनिवर्सिटी, जापान के वैज्ञानिकों ने सावधानीपूर्वक नियंत्रण वाले दर्पण प्रयोगों की एक श्रृंखला में इन मछलियों को एक उल्लेखनीय कार्य करते हुए देखा… वह कार्य जो अब तक केवल डॉल्फ़िन और मांटा रे में ही दस्तावेज़ित किया गया था… साइंटिफिक रिपोर्ट्स में प्रकाशित हुए परिणाम, वैज्ञानिक समुदाय को विकास में आत्म-जागरूकता की समयरेखा पर पुनर्विचार करने के लिए प्रेरित कर रहे हैं… ###वह मछली जिसने दर्पण में देखा — और वास्तव में समझा… दर्पण आत्म-पहचान परीक्षण जानवरों की संज्ञानात्मक अनुसंधान में जानवरों की आत्म-जागरूकता का परीक्षण करने के लिए उपयोग की जाने वाली एक बहुत लोकप्रिय विधि है… अवधारणा सीधी है… जब एक जानवर को दर्पण के सामने रखा जाता है और उसके शरीर को किसी ऐसी चीज से चिह्नित किया जाता है जिसे वह सीधे नहीं देख सकता, तो जानवर, यदि आत्म-जागरूक है, तो चिह्न को देखने और उसकी जांच करने के लिए दर्पण का उपयोग करेगा… इसलिए आत्म-जागरूकता ऐसे व्यवहार द्वारा सुझाई जाती है, अर्थात जानवर जानता है कि प्रतिबिंब स्वयं का है न कि किसी अन्य जीव का… क्लीनर रैस मछलियों ने पहले के शोध में इस विशेष परीक्षण को पास करना पहले ही साबित कर दिया है… हालांकि, शुम्पेई सोगावा और प्रोफेसर मसानोरी कोहदा के नेतृत्व में ओसाका टीम ने, मछलियों का बारीकी से अवलोकन करने के बाद, पाया कि प्रयोग के क्रम को बदलने से मछलियों में बहुत अलग व्यवहार सामने आया… मछली को पहली बार दर्पण देखने देने से पहले, उन्हें पहले चिह्नित किया गया… परिवर्तन बहुत उल्लेखनीय था… प्रतिबिंब को स्वयं से जोड़ने में दिनों का समय लेने के बजाय, मछलियों को लगभग तुरंत चिह्न को खुरचना शुरू करते हुए देखा गया… व्याख्या इस तर्क के साथ जाती है कि वे संभवतः जानते थे कि उनके शरीर पर कुछ है, दर्पण ने उन्हें वह दृश्य प्रमाण प्रदान किया जिसकी उन्हें इसे पहचानने की आवश्यकता थी… यह किसी की भी सोच से बहुत तेज था… ###वास्तविकता को समझने के लिए झींगा गिराना… यह बहुत रोमांचक था, लेकिन मछली का वह व्यवहार जिसने वास्तव में वैज्ञानिकों को आश्चर्यचकित कर दिया, बाद में आया… दर्पण के कई दिनों तक संपर्क में रहने के बाद, कुछ मछलियां एक्वेरियम के फर्श से झींगा के छोटे टुकड़े उठातीं और दर्पण की ओर तैरतीं और कांच के सामने जानबूझकर भोजन गिरा देतीं… फिर वे झींगा के गिरने का बहुत सावधानी से अनुसरण करतीं… प्रत्यक्ष दृष्टि से नहीं बल्कि उसके प्रतिबिंब को देखते हुए जैसे वह नीचे आ रहा था… उन्होंने दर्पण में गति का अनुसरण करते समय कांच को कई बार छुआ… ऐसा लग रहा था कि मछलियां एक नियंत्रित प्रयोग कर रही हैं… उन्होंने एक बाहरी वस्तु गिराई और जांचा कि क्या प्रतिबिंबित गति वास्तविकता से मेल खाती है… संज्ञानात्मक विज्ञान में ऐसे व्यवहार को आकस्मिकता परीक्षण कहा जाता है… जानवर दर्पण के नियमों की जांच करने की इस चतुर मानसिक प्रक्रिया को न केवल अपने शरीर को हिलाकर बल्कि एक बाहरी वस्तु को हेरफेर करके और परिणाम का अवलोकन करके انجام देते हैं… अब तक, केवल डॉल्फ़िन जो बुलबुले छोड़ते हैं और उन्हें प्रतिबिंब में ऊपर जाते हुए देखते हैं और मांटा रे, जो समान अन्वेषणात्मक व्यवहार करते हैं, दर्पण जांच के इस स्तर पर रहे हैं… इसे एक मछली में पाना इस विचार पर प्रश्नचिह्न लगाता है कि ऐसी संज्ञानात्मकता के लिए एक बड़े स्तनधारी मस्तिष्क की आवश्यकता होती है… ###यह बुद्धि की कहानी को क्यों बदलता है… क्लीनर रैस मछली के पास विशेष रूप से बड़ा मस्तिष्क नहीं है… यह एक सामाजिक रिफ मछली है, लगभग दस सेंटीमीटर लंबी, जो प्रवाल भित्तियों के साथ सफाई स्टेशनों पर बड़ी मछलियों से परजीवियों को चुनने के लिए सबसे प्रसिद्ध है… मछली लगातार सामाजिक बातचीत की दुनिया में सहअस्तित्व में रहती है… यह पता लगाना कि किन मछलियों को साफ करना है, कब सहयोग करना है और संबंधों को कैसे संभालना है… कुछ वैज्ञानिकों की राय है कि यह जटिल सामाजिक परिवेश ही सटीक कारण रहा होगा कि क्लीनर रैस मछली की संज्ञानात्मक परिष्कृतता विकसित हुई… नई खोजों का उल्लेखनीय पहलू न केवल मछलियों की क्रियाएं हैं बल्कि वह भी है जो वे क्रियाएं प्रकट करती हैं… आकस्मिकता का परीक्षण कोई प्रतिवर्त नहीं है… इसमें मानसिक रूप से स्वयं की एक छवि रखना, दर्पण के बारे में एक अनुमान लगाना और फिर एक उपकरण का उपयोग करना शामिल है… इस मामले में झींगा का एक टुकड़ा… अनुमान का परीक्षण करने के लिए… इस तर्क अनुक्रम के लिए एक ऐसे मस्तिष्क की आवश्यकता होती है believed जाता था कि केवल स्तनधारियों के पास है… ###पशु मस्तिष्क की सीमाओं पर पुनर्विचार… यह खोज पशु संज्ञानात्मक खोजों के एक बड़े पैटर्न के साथ सुसंगत है… ऑक्टोपस पहेलियां सुलझा सकते हैं… मधुमक्खियां कुछ खेलने जैसा व्यवहार प्रदर्शित करती हैं… मछलियां उपकरण उपयोगकर्ता हैं, मानव चेहरों को पहचान सकती हैं और, जैसा कि नवीनतम साक्ष्य दिखाता है, साधारण प्रयोग करने में भी सक्षम हैं… जैसे-जैसे वैज्ञानिक पशु मस्तिष्क की अधिक गहराई से जांच करते हैं, वे इतने दूर के अकल्पनीय स्थानों में संज्ञानात्मकता की उपस्थिति से अधिक आश्चर्यचकित होते हैं… ऐसी खोजों के परिणाम केवल शैक्षणिक जिज्ञासा से कहीं अधिक दूर तक फैले हुए हैं… तथ्य यह है कि आत्म-जागरूकता और अमूर्त तर्क जैसी क्षमताएं कई प्रजातियों में स्वतंत्र रूप से पाई गई हैं… मछलियां, स्तनधारी, शायद अन्य भी… यह एक मजबूत संकेत है कि ये क्षमताएं दुर्लभ जैविक विचित्रताएं नहीं हैं बल्कि बल्कि कुछ ऐसा है जो जटिल सामाजिक जीवन उत्पन्न करने की प्रवृत्ति रखता है… इसलिए, बुद्धि संभवतः एक सीढ़ी से कम है जिसके शीर्ष पर मनुष्य हैं और अधिक एक नेटवर्क है जो जहां भी परिस्थितियां उपयुक्त हों उत्पन्न होता है… क्लीनर रैस मछली ने न केवल एक संज्ञानात्मक परीक्षण पास किया है बल्कि, एक मायने में, यह विज्ञान को भी एक पास करने का सुविधाकर्ता रहा होगा।</p>
            </div>
        </div>
        
        <!-- IMAGE + KEY INSIGHTS - DESKTOP SIDEBYSIDE, MOBILE STACKED -->
        <div class="image-keypoints-container">
            <div class="image-container">
                <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhZIaFnu7m9cYbKvKzvZ_ZPhRShChxEC1zI8CfXi4mk625fWauS3EAmp3pl87JC8xQulA_vNrj6sQBLZNJSB-bsqmCsgFNetkhPjhf0F131kLXUUa4p7Jre532Zcc9m1l_rMCcrTYR3OTtBt-DWjy7HD1LZoMlxhU6iPdTiIs8rewzqfG4/s1600/1772344050492-019ca7ef-7601-74a0-8f6c-d311b84c9975.webp" 
                     alt="Nuclear cooling towers and green field – symbolizing nuclear science for environment" 
                     class="square-image"
                     loading="lazy"
                     onload="this.classList.add('loaded')">
            </div>
            <div class="keypoints-container">
                <h3 class="keypoints-title">Key Insights You Should never miss</h3>
                <ul class="keypoints-list">
                    <li class="keypoint-item">
                        <div class="keypoint-title">Brain Size No Longer Defines Cognitive Capacity.</div>
                        <div class="keypoint-description">The cleaner wrasse proves sophisticated self-recognition and experimental reasoning can evolve in small-brained species. This dismantles the mammal-centric view of intelligence.</div>
                    </li>
                    <li class="keypoint-item">
                        <div class="keypoint-title">Social Complexity Drives Cognitive Evolution.</div>
                        <div class="keypoint-description">Living in intricate reef social networks likely pressured cleaner wrasse to develop advanced problem-solving. Intelligence emerges where ecological demands require it.</div>
                    </li>
                    <li class="keypoint-item">
                        <div class="keypoint-title">Rethinking Animal Welfare and Research Ethics.</div>
                        <div class="keypoint-description">Recognizing self-awareness in fish demands we reconsider how we study, conserve, and interact with marine life. The stakes extend far beyond academic curiosity.</div>
                    </li>
                </ul>
            </div>
        </div>

<p>A tiny, brightly colored reef fish known as the cleaner wrasse (<em>Labroides dimidiatus</em>) has gone against the grain of assumptions regarding the limits of animal intelligence. In a series of mirror experiments with meticulous control, scientists from Osaka Metropolitan University, Japan, observed these fish carry out a remarkable act—one that had only been documented in dolphins and manta rays so far. The results, which appeared in <em>Scientific Reports</em>, are leading the scientific community to reconsider the timeline of self-awareness in evolution and recognize advanced fish cognition in unexpected places.</p>

<h2>The Cleaner Wrasse Mirror Test: A Window Into Fish Self-Recognition</h2>

<p>The mirror self-recognition test is a very popular method which is used in animal cognition research to test animals' self-awareness. The concept is straightforward: when an animal is placed in front of a mirror and its body is marked with something that it cannot directly see, the animal, if self-aware, would use a mirror to see the mark and investigate it. Self-awareness is therefore suggested by such behavior—that is, the animal knows the reflection is of itself and not some other creature.</p>

<p>Cleaner wrasse have already been proven to pass this particular test in previous research, making them among the few mirror self-recognition animals outside the mammalian world. However, the Osaka team, led by Shumpei Sogawa and Professor Masanori Kohda, after closely observing the fish, found that changing the sequence of the experiment brought out a very different behavior in the fish. Before the fish was let to see the mirror for the first time, they were marked first.</p>

<p>Very notable was the change. Instead of taking days to associate the reflection with themselves, the fish were observed to almost immediately start scraping the mark. The explanation goes along the line that they probably knew that there was something on their body, with the mirror granting them the visual evidence that they needed to recognize it. This rapid response in the cleaner wrasse mirror test suggests sophisticated cleaner fish self-recognition that was far quicker than anyone thought.</p>

<h2>Dropping Shrimp to Understand Reality: Contingency Testing Fish</h2>

<p>That was very exciting, but the fish behavior that really amazed the scientists came later. After several days of exposure to the mirror, some fish would pick up tiny pieces of shrimp from the aquarium floor and swim toward the mirror before deliberately letting the food drop in front of the glass. They then followed the shrimp falling very carefully—not by direct sight but by observing its reflection as it came down. They touched the glass several times while following the movement in the mirror. It looked like the fish were conducting a controlled experiment: they dropped an external object and checked if the reflected movement matched the reality.</p>

<p>Such behavior is called in cognitive science contingency testing. Animals carry out this clever mental process of probing the mirror's rules not only by moving their bodies but also by manipulating an external object and observing the result. This cleaner fish contingency testing mirrors the sophisticated contingency testing fish behavior previously seen only in dolphins—which release bubbles and watch them go up in reflections—and manta rays, which carry out similar exploratory behavior. Finding it in a fish puts into question the idea that such cognition entails a large, mammalian brain, suggesting instead a form of mammal-like fish intelligence.</p>
 <div class="highlight-box">
            <h4>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                In Simple Terms — Contingency Testing
            </h4>
            <p>When animals deliberately manipulate objects to check if mirror reflections behave as expected, they're testing cause-and-effect. It shows they understand the mirror shows themselves, not another creature. </p>
        </div>
        

<h2>Why This Changes the Story of Intelligence</h2>

<p>The cleaner wrasse lacks a particularly large brain. It's a social reef fish, about 10 centimeters in length, most famous for picking parasites off larger fish at the "cleaning stations" along the coral reefs. The fish constantly coexists in a world of social negotiation—figuring out which fish to clean, when to cooperate, and how to handle relationships. Some scientists are of the opinion that this intricate social setting could have been the exact reason that <em>Labroides dimidiatus</em> cognition and reef fish intelligence evolved to such remarkable levels.</p>

<div class="highlight-box">
            <h4>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                Think of It Like This — Mirror Self-Recognition
            </h4>
            <p>Imagine seeing a stranger in a mirror who copies your every move. Now imagine realizing that stranger IS you. That "aha" moment—recognizing yourself—is what scientists test for in animals.  </p>
        </div>

<p>The remarkable aspect of the new discoveries is not only the actions of the fish but also what those actions reveal. Testing of contingency is not a reflex. It involves having an image of oneself mentally, making a guess about the mirror, and then using a tool—a piece of shrimp in this case—to test the guess. This reasoning sequence was believed to require a brain that only mammals have. Yet the Osaka Metropolitan University fish study demonstrates that when fish pass mirror test protocols with such sophistication, we must reconsider our assumptions about vertebrate intelligence.</p>

<h2>Rethinking the Boundaries of Animal Minds</h2>

<p>This finding is consistent with a larger pattern of animal cognition discoveries. Octopuses can solve puzzles. Bees exhibit some playful behavior. Fish are tool users, can recognize human faces and, as the latest evidence shows, are even capable of conducting simple experiments. The more thoroughly scientists examine the animal mind, the more they are amazed by the presence of cognition in so far unthought-of places.</p>

<div id="dynamic-link-container"></div>

<p>The consequences of such discoveries extend far beyond mere academic curiosity. The fact that abilities like self-awareness and abstract reasoning have been found in several species independently (fish, mammals, maybe even others) is a strong indication that these abilities are not rare biological freaks but rather something that complex social life tends to produce. Intelligence, therefore, is probably less of a ladder with humans at the top and more of a network that arises wherever the conditions are suitable. The cleaner wrasse has not only passed a cognitive test but, in a way, it may have been the facilitator of science passing one as well.</p>
        
   
  
       
       
        
        <!-- SIX HASHTAGS - MOVED TO AFTER LAST PARAGRAPH -->
        <div class="hashtag-list">
    <span class="hashtag-item"><i class="fas fa-hashtag"></i> FishCognition</span>
    <span class="hashtag-item"><i class="fas fa-hashtag"></i> CleanerWrasse</span>
    <span class="hashtag-item"><i class="fas fa-hashtag"></i> MirrorSelfRecognition</span>
    <span class="hashtag-item"><i class="fas fa-hashtag"></i> AnimalCognition</span>
    <span class="hashtag-item"><i class="fas fa-hashtag"></i> ContingencyTesting</span>
    <span class="hashtag-item"><i class="fas fa-hashtag"></i> MarineIntelligence</span>
</div>
    </div>
    
    
    <!-- SOURCE SECTION WITH DIVIDER LINE -->
<div class="source-section">
    <div class="source-divider"></div>
    <span class="source-label">Source</span>
    <div class="source-btns">
        <a href="https://www.nature.com/srep/" target="_blank" rel="noopener noreferrer" class="source-btn">
            <i class="fas fa-link"></i> Scientific Reports Journal
        </a>
        <a href="https://www.omu.ac.jp/en/research/" target="_blank" rel="noopener noreferrer" class="source-btn">
            <i class="fas fa-link"></i> Osaka Metropolitan University Research Portal
        </a>
        <a href="https://www.springer.com/journal/10071" target="_blank" rel="noopener noreferrer" class="source-btn">
            <i class="fas fa-link"></i> Animal Cognition Research Literature
        </a>
    </div>
</div>
    
</section>





<!-- ===== POST-ARTICLE SECTIONS ===== -->

<!-- SHARE SECTION - Centered with larger icons (EXACT COPY) -->
<div class="post-article-section fade-up-section" id="shareSection">
    <h2 class="section-title">Spread the word</h2>
    <div class="share-section">
        <div class="share-icons">
            <button class="share-icon-btn" data-platform="facebook"><i class="fab fa-facebook-f"></i></button>
            <button class="share-icon-btn" data-platform="x"><svg class="x-logo-svg" viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></button>
            <button class="share-icon-btn" data-platform="linkedin"><i class="fab fa-linkedin-in"></i></button>
            <button class="share-icon-btn" data-platform="whatsapp"><i class="fab fa-whatsapp"></i></button>
            <button class="share-icon-btn" data-platform="telegram"><i class="fab fa-telegram-plane"></i></button>
            <button class="share-icon-btn" data-platform="reddit"><i class="fab fa-reddit-alien"></i></button>
            <button class="share-icon-btn" data-platform="pinterest"><i class="fab fa-pinterest"></i></button>
            <button class="share-icon-btn" data-platform="email"><i class="fas fa-envelope"></i></button>
            <button class="share-icon-btn" data-platform="hackernews"><i class="fab fa-hacker-news"></i></button>
            <button class="share-icon-btn" id="copyLinkBtn2"><i class="fas fa-copy"></i></button>
        </div>
    </div>
</div>

<!-- AUTHOR BOX with icon placeholder -->
<div class="post-article-section fade-up-section" id="authorSection">
    <h2 class="section-title">About the Author</h2>
    <div class="author-box">
        <!-- icon as placeholder -->
        <div class="author-image" style="display: flex; align-items: center; justify-content: center; background: #0E7B7F; color: white; font-size: 3rem; width: 100px; height: 100px; border-radius: 50%;">
            <svg viewBox="0 0 24 24" fill="currentColor" width="48" height="48" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
        </div>
        <div class="author-info">
            <div class="author-name">Sophia Reynolds</div>
            <div class="author-bio">A science journalist with a background in research communication. Sophia explains space missions, climate studies, and advanced physics in accessible language. She bridges academic discovery with everyday relevance. Her writing blends clarity with curiosity.</div>
            <div class="author-tags">
                <span class="author-tag">Science</span>
                <span class="author-tag">Research</span>
                <span class="author-tag">Discovery</span>
            </div>
            <a href="https://techtonic-times.github.io/science/" class="author-link">View all articles By The Author<i class="fas fa-arrow-right"></i></a>
        </div>
    </div>
</div>

<!-- MINI QUIZ - 2 Columns -->

<div class="post-article-section fade-up-section" id="quizSection">
    <h2 class="section-title">Quick Quiz & Opinion</h2>
    <div class="quiz-container" id="quizContainer">
        <!-- Quiz 1 -->
        <div class="quiz-item" id="quiz1">
            <div class="quiz-question">1. What specific behavior did cleaner wrasse exhibit that suggests "contingency testing"?</div>
            <div class="quiz-options">
                <label class="quiz-option"><input type="radio" name="quiz1" value="incorrect"> Building complex nests to attract mates</label>
                <label class="quiz-option"><input type="radio" name="quiz1" value="correct"> Dropping shrimp in front of a mirror to watch the reflection fall</label>
                <label class="quiz-option"><input type="radio" name="quiz1" value="incorrect"> Mimicking the colors of poisonous fish</label>
            </div>
            <div class="quiz-feedback" id="quiz1Feedback"></div>
        </div>
        <!-- Quiz 2 (Opinion) -->
        <div class="quiz-item" id="quiz2">
            <div class="quiz-question">2. Does finding self-awareness in a small-brained fish change your view on animal intelligence?</div>
            <div class="quiz-options">
                <label class="quiz-option"><input type="radio" name="quiz2" value="yes"> Yes, it proves intelligence is more widespread than we thought</label>
                <label class="quiz-option"><input type="radio" name="quiz2" value="maybe"> Maybe, but I need to see more research on other species</label>
                <label class="quiz-option"><input type="radio" name="quiz2" value="no"> No, I still believe large brains are required for true self-awareness</label>
            </div>
            <div class="quiz-feedback" id="quiz2Feedback"></div>
        </div>
    </div>
</div>


<!-- RELATED ARTICLES -->
<div class="post-article-section fade-up-section" id="relatedSection">
    <div class="section-header">
        <h2 class="section-title">Related Articles</h2>
        <a href="https://techtonic-times.github.io/science/" class="view-all-btn">View All <i class="fas fa-arrow-right"></i></a>
    </div> 
    <div class="you-may-like-container" id="relatedArticlesContainer"></div>
</div>

<!-- EXPLORE 6 CATEGORIES with icons -->
<div class="post-article-section fade-up-section" id="categoriesSection">
    <h2 class="section-title">Explore Topics</h2>
    <div class="categories-grid">
        <!-- Science -->
        <a href="https://techtonic-times.github.io/category/nuclear-science" class="category-card">
            <div class="category-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="48" height="48">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
                </svg>
            </div>
            <div class="category-name">Science</div>
        </a>
        <!-- Technology -->
        <a href="https://techtonic-times.github.io/category/clean-energy" class="category-card">
            <div class="category-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="48" height="48">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 2.5h8a2 2 0 012 2v15a2 2 0 01-2 2H8a2 2 0 01-2-2v-15a2 2 0 012-2z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.5 18.5h1" />
                </svg>
            </div>
            <div class="category-name">Technology</div>
        </a>
        <!-- AI & Data -->
        <a href="https://techtonic-times.github.io/category/water-treatment" class="category-card">
            <div class="category-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="48" height="48">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" />
                </svg>
            </div>
            <div class="category-name">AI & Data</div>
        </a>
        <!-- Cyber World -->
        <a href="https://techtonic-times.github.io/category/agriculture" class="category-card">
            <div class="category-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="48" height="48">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2l8 4v6c0 5.2-3.6 8.1-8 10-4.4-1.9-8-4.8-8-10V6l8-4z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v5m0 3h.01" />
                </svg>
            </div>
            <div class="category-name">Cyber World</div>
        </a>
        <!-- Future Tech -->
        <a href="https://techtonic-times.github.io/future/" class="category-card">
            <div class="category-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="48" height="48">
                    <circle cx="12" cy="12" r="3" stroke-width="2" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2v3M12 19v3M2 12h3M19 12h3" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5l2 2M17 17l2 2M5 19l2-2M17 7l2-2" />
                </svg>
            </div>
            <div class="category-name">Future Tech</div>
        </a>
        <!-- Explanations -->
        <a href="https://techtonic-times.github.io/category/innovation" class="category-card">
            <div class="category-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="48" height="48">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3a6 6 0 00-3 11v3h6v-3a6 6 0 00-3-11z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 21h6" />
                </svg>
            </div>
            <div class="category-name">Explanations</div>
        </a>
    </div>
</div>

<!-- YOU MAY LIKE -->
<div class="post-article-section fade-up-section" id="youMayLikeSection">
    <div class="section-header">
        <h2 class="section-title">You May Like</h2>
        <a href="https://techtonic-times.github.io/category/editor-picks" class="view-all-btn">View All <i class="fas fa-arrow-right"></i></a>
    </div>
    <div class="you-may-like-container" id="youMayLikeContainer"></div>
</div>

<!-- LAST WEEK'S POPULAR -->
<div class="post-article-section fade-up-section" id="popularSection">
    <div class="section-header">
        <h2 class="section-title">Last Week's Popular</h2>
        
    </div>
    <div class="you-may-like-container" id="popularContainer"></div>
</div>

<!-- FAQ - single expand -->
<div class="post-article-section fade-up-section" id="faqSection">
    <h2 class="section-title">Frequently Asked Questions</h2>
    <div class="faq-container" id="faqContainer">
        <div class="faq-item">
            <div class="faq-question">What is the mirror self-recognition test? <i class="fas fa-chevron-down"></i></div>
            <div class="faq-answer">The mirror self-recognition test assesses self-awareness by marking an animal's body in a place it can't see directly. If the animal uses the mirror to investigate the mark, it suggests the animal recognizes the reflection as itself.</div>
        </div>
        <div class="faq-item">
            <div class="faq-question">Why is the cleaner wrasse's behavior significant? <i class="fas fa-chevron-down"></i></div>
            <div class="faq-answer">Cleaner wrasse demonstrated contingency testing—dropping shrimp to observe the reflection's movement—a behavior previously seen only in dolphins and manta rays. This suggests sophisticated cognition in a small-brained fish, challenging assumptions about intelligence.</div>
        </div>
        <div class="faq-item">
            <div class="faq-question">Do fish have self-awareness? <i class="fas fa-chevron-down"></i></div>
            <div class="faq-answer">Research on cleaner wrasse indicates they may possess a form of self-recognition. While debate continues, their rapid response to marked reflections and experimental behavior suggest cognitive abilities once thought exclusive to mammals.</div>
        </div>
        <div class="faq-item">
            <div class="faq-question">What is contingency testing in animal cognition? <i class="fas fa-chevron-down"></i></div>
            <div class="faq-answer">Contingency testing is when an animal manipulates an external object to probe how a mirror responds—checking if the reflection matches reality. It implies mental representation, hypothesis testing, and understanding of cause-and-effect.</div>
        </div>
        <div class="faq-item">
            <div class="faq-question">How could social life drive fish intelligence? <i class="fas fa-chevron-down"></i></div>
            <div class="faq-answer">Cleaner wrasse navigate complex social interactions at reef "cleaning stations," negotiating with client fish. Scientists propose this intricate social environment may have selected for advanced cognitive skills like recognition, cooperation, and strategic decision-making.</div>
        </div>
    </div>
</div>
<!-- COMMENTS (LocalStorage) -->
<div class="post-article-section fade-up-section" id="commentsSection">
    <div class="section-header">
        <h2 class="section-title">Leave a Note</h2>
        <button class="delete-all-btn hidden" id="deleteAllComments"><i class="fas fa-trash"></i> Delete All</button>
    </div>
    <div class="comment-form">
        <input type="text" id="commentName" class="comment-input" placeholder="Your name" maxlength="50">
        <textarea id="commentText" class="comment-input" rows="3" placeholder="Your thoughts..." maxlength="500"></textarea>
        <button class="comment-submit" id="submitComment">Save Comment</button>
    </div>
    <div class="comments-grid" id="commentsList"></div>
    <button class="view-all-btn hidden" id="viewAllComments">View All Comments <i class="fas fa-chevron-down"></i></button>
</div>

<!-- FOOTER SECTION - FULL WIDTH, NO BORDERS -->
<div class="footer-container">
    <div class="footer-top-row">
        <div class="footer-card">
            <div class="mb-3 px-4">
                <span class="feature-badge text-xs font-medium px-3 py-1 rounded-full text-[#12ABB0] inline-flex items-center gap-1 mb-3">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"/>
                    </svg>
                    FOLLOW US
                </span>
            </div>
            <h3 class="text-white font-bold text-lg mb-4 px-4">
                Join Our Science & Tech Community
            </h3>
            <div class="grid grid-cols-5 gap-3 mb-5 px-4">
                <a href="https://facebook.com" class="social-icon facebook-bg group" aria-label="Facebook" title="Facebook">
                    <svg width="28px" height="28px" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg">
                        <path fill="white" d="M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z"/>
                    </svg>
                </a>
                <a href="https://twitter.com" class="social-icon twitter-bg group" aria-label="X (Twitter)" title="X (Twitter)">
                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                    </svg>
                </a>
                <a href="https://instagram.com" class="social-icon instagram-bg group" aria-label="Instagram" title="Instagram">
                    <svg width="24px" height="24px" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg">
                        <path fill="white" d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.074-4.947c-.061-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.45-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/>
                    </svg>
                </a>
                <a href="https://linkedin.com" class="social-icon linkedin-bg group" aria-label="LinkedIn" title="LinkedIn">
                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                    </svg>
                </a>
                <a href="https://youtube.com" class="social-icon youtube-bg group" aria-label="YouTube" title="YouTube">
                    <svg class="w-7 h-7 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M23.498 6.186a3.016 3.016 0 00-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505a3.017 3.017 0 00-2.122 2.136C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 002.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 002.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                    </svg>
                </a>
            </div>
            <div class="mt-5 space-y-2 px-4">
                <div class="flex items-center gap-2 text-sm">
                    <svg class="w-4 h-4 text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    <span class="text-gray-300">Daily tech news & updates</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                    <svg class="w-4 h-4 text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    <span class="text-gray-300">Exclusive behind-the-scenes content</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                    <svg class="w-4 h-4 text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    <span class="text-gray-300">Live Q&A sessions with tech experts</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                    <svg class="w-4 h-4 text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    <span class="text-gray-300">Community discussions & tech debates</span>
                </div>
            </div>
            <p class="text-sm text-gray-300 mt-4 px-4">
                Connect with us for daily tech updates and discussions
            </p>
        </div>
        <div class="footer-card">
            <div class="mb-2 px-4">
                <span class="feature-badge text-xs font-medium px-3 py-1 rounded-full text-[#12ABB0] inline-flex items-center gap-1 mb-3">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" />
                        <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
                    </svg>
                    NEWSLETTER
                </span>
            </div>
            <h3 class="text-white font-bold text-xl mb-3 px-4">
                Stay Ahead in Tech
            </h3>
            <p class="text-gray-300 mb-4 text-sm px-4">
                Get the latest tech news delivered directly to your inbox
            </p>
            <form class="space-y-4 px-4" id="newsletterForm">
                <div class="flex flex-col gap-3">
                    <input
                        type="email"
                        placeholder="your.email@example.com"
                        required
                        class="newsletter-input flex-grow px-4 py-3 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#12ABB0]"
                    >
                    <button
                        type="submit"
                        class="newsletter-btn px-6 py-3 rounded-lg font-medium text-white"
                    >
                        Subscribe
                    </button>
                </div>
            </form>
            <div class="mt-5 space-y-2 px-4">
                <div class="flex items-center gap-2 text-sm">
                    <svg class="w-4 h-4 text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    <span class="text-gray-300">Daily tech news digest</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                    <svg class="w-4 h-4 text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    <span class="text-gray-300">Exclusive analysis & insights</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                    <svg class="w-4 h-4 text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    <span class="text-gray-300">Weekly roundup of top stories</span>
                </div>
            </div>
            <p class="text-xs text-gray-500 mt-4 px-4">
                We respect your privacy. No spam. Unsubscribe anytime.
            </p>
        </div>
    </div>
    <div class="footer-card quick-links-card">
        <h4 class="text-white font-medium mb-4 px-4">Quick Links</h4>
        <div class="quick-links-grid px-4">
            <div>
                <h5 class="text-sm font-semibold text-[#12ABB0] mb-2 flex items-center gap-1">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    Information
                </h5>
                <ul class="space-y-2">
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>
                        <span class="text-gray-300">About Us</span>
                    </a></li>
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                        </svg>
                        <span class="text-gray-300">Categories</span>
                    </a></li>
                    <li><a href="https://techtonic-times.github.io/home/archive.html" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/>
                        </svg>
                        <span class="text-gray-300">Archive</span>
                    </a></li>
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <span class="text-gray-300">FAQs</span>
                    </a></li>
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                        </svg>
                        <span class="text-gray-300">Contact Us</span>
                    </a></li>
                </ul>
            </div>
            <div>
                <h5 class="text-sm font-semibold text-[#12ABB0] mb-2 flex items-center gap-1">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                    </svg>
                    Legal
                </h5>
                <ul class="space-y-2">
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                        </svg>
                        <span class="text-gray-300">Privacy Policy</span>
                    </a></li>
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        <span class="text-gray-300">T & C</span>
                    </a></li>
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.346 16.5c-.77.833.192 2.5 1.732 2.5z"/>
                        </svg>
                        <span class="text-gray-300">Disclaimer</span>
                    </a></li>
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v14a2 2 0 002 2H16a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                        </svg>
                        <span class="text-gray-300">Write for Us</span>
                    </a></li>
                    <li><a href="#" class="hover:text-[#12ABB0] transition-colors flex items-center gap-2 group">
                        <svg class="w-3 h-3 text-gray-400 group-hover:text-[#12ABB0]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"/>
                        </svg>
                        <span class="text-gray-300">Advertise with Us</span>
                    </a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- BOTTOM FOOTER -->
<footer class="bg-[#0a0e1a] text-gray-400 py-6 text-center" style="background-color: #0a0e1a !important;">
    <div class="container-max-width" style="max-width: 1400px; margin: 0 auto;">
        <div class="mb-3">
            <a href="#" class="text-xl font-bold tracking-tight text-white inline-block">
                <span class="gradient-text">TechTonic</span><span class="text-white"> Times</span>
            </a>
        </div>
        <p class="text-sm">&copy; 2026 TechTonic Times. All rights reserved. |
            <a href="#" class="hover:text-[#12ABB0]">Privacy Policy</a> |
            <a href="#" class="hover:text-[#12ABB0]">Terms of Service</a>
        </p>
    </div>
</footer>

<!-- FONT AWESOME FOR ICONS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
<script>
// ====== UNIQUE PAGE IDENTIFIER FOR LOCALSTORAGE ======
const getPageId = () => {
    const path = window.location.pathname;
    const page = path.split("/").pop().replace(".html", "") || "home";
    return page.replace(/[^a-z0-9]/gi, '_'); 
};
const PAGE_ID = getPageId();

// ====== TIMESTAMP FUNCTION (clean + consistent) ======
function formatTimestamp(articleTime) {
    const now = new Date();
    const diffMs = now - articleTime;
    if (diffMs <= 0) return "Just Now";
    const seconds = Math.floor(diffMs / 1000);
    if (seconds < 60) return "Just Now";
    const minutes = Math.floor(seconds / 60);
    if (minutes < 60)
        return `${minutes} ${minutes === 1 ? "minute" : "minutes"} ago`;
    const hours = Math.floor(minutes / 60);
    if (hours < 24)
        return `${hours} ${hours === 1 ? "hour" : "hours"} ago`;
    const days = Math.floor(hours / 24);
    if (days < 7)
        return `${days} ${days === 1 ? "day" : "days"} ago`;
    if (days < 28) {
        const weeks = Math.floor(days / 7);
        return `${weeks} ${weeks === 1 ? "week" : "weeks"} ago`;
    }
    if (days >= 365) {
        const day = String(articleTime.getDate()).padStart(2, "0");
        const month = articleTime.toLocaleString("en-US", { month: "short" });
        const year = articleTime.getFullYear();
        return `${day} ${month}, ${year}`;
    }
    if (days < 365) {
        let months = Math.floor(days / 30);
        if (months < 1) months = 1;
        return `${months} ${months === 1 ? "month" : "months"} ago`;
    }
}

// ====== ARTICLE DATA WITH PUBLICATION DATES ======
const relatedArticles = [
    {
        title: "Why the February 2026 Planet Parade Won't Look Like You Expect",
        description: "Six planets align, but only one shines. Get the facts on the February 2026...",
        image: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhh2IrRSxOUKkdwXcOGXqlhBMZiVqw5GT1U3n9SJ_0JPbrS2AsqbpxzaEH5o4aNGBeXId8VU4tU4YWq7FtJRfAkMX3XS45o6IPsJsGeTeBfyTEUrmnWg-odI8ymIfa_r_g1v5zillWCp9LAZyY2uRkQFzbk3MxvkkTNbYjqgOKJ3e50mXc/s1600/1772256350970-019ca2b5-462f-7a66-83b1-85182b363be6.webp",
        link: "https://techtonic-times.github.io/science/see-six-planets-align-2026-feb-28.html",
        date: new Date('2026-02-28T11:20:00')
    },
    {
        title: "Nuclear Techniques Unlock Ocean's Carbon Storage Secrets",
        description: "Isotopic tracing reveals how much carbon mangroves and seagrass meadows actually lock away – vital for climate models.",
        image: "https://images.unsplash.com/photo-1558449028-b53a39d100fc?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
        link: "https://techtonic-times.github.io/ocean-carbon",
        date: new Date('2026-02-08T09:45:00')
    },
    {
        title: "From Nuclear Waste to Clean Fuel: New Recycling Method",
        description: "Advanced reprocessing techniques could turn nuclear waste into valuable energy sources, reducing long-term storage needs.",
        image: "https://images.unsplash.com/photo-1581091226033-d5c48150dbaa?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
        link: "https://techtonic-times.github.io/waste-recycle",
        date: new Date('2026-02-05T13:15:00')
    }
];
const youMayLikeArticles = [
    {
        title: "Fusion Energy: The Clean Power Breakthrough We've Been Waiting For",
        description: "Recent advances in nuclear fusion technology bring us closer to unlimited clean energy. Scientists achieve net energy gain in historic experiment.",
        image: "https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
        link: "https://techtonic-times.github.io/fusion-energy-breakthrough",
        date: new Date('2026-02-20T14:30:00')
    },
    {
        title: "How Cosmic Rays Help Scientists Track Glacier Melt in Real-Time",
        description: "Innovative muon detectors are revolutionizing how we monitor climate change impact on polar ice caps and mountain glaciers.",
        image: "https://images.unsplash.com/photo-1558449028-b53a39d100fc?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
        link: "https://techtonic-times.github.io/cosmic-ray-glacier-monitoring",
        date: new Date('2025-11-13T10:15:00')
    },
    {
        title: "Sterile Insect Technique: The Nuclear Solution to Crop Protection",
        description: "How radiation is being used to combat agricultural pests without harmful pesticides, protecting both crops and ecosystems.",
        image: "https://images.unsplash.com/photo-1558449028-b53a39d100fc?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
        link: "https://techtonic-times.github.io/sterile-insect-technique",
        date: new Date('2025-11-12T08:00:00')
    }
];
const popularArticles = [
    {
        title: "Fusion Ignition Achieved: What It Means for Clean Power",
        description: "Scientists repeat ignition experiments, bringing commercial fusion one step closer. Experts weigh in on timelines.",
        image: "https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
        link: "https://techtonic-times.github.io/fusion-ignition",
        date: new Date('2026-02-22T10:00:00')
    },
    {
        title: "How Nuclear Science Is Saving the World's Chocolate Supply",
        description: "Sterile insect technique battles cocoa pests in West Africa, protecting crops and farmers' livelihoods without chemicals.",
        image: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhdjwrQgBZTwtEXOjT874wYilASg9bFbW3xscjOX-6gpB3vDcuI0PcD-EBUmHkDflaposqV5BF8xEGK3aGQl7M0e9WA9fGv9uIM5XYcTW36jqh061ulEoTPd7HPWkwGKqkKbb3EgbwY1OP15F3tjOlj4nvnvU6sC3kIwQYeHsQtSarEcVg/s1600/pexels-vedih-akbas-99816515-12543917.jpg",
        link: "https://techtonic-times.github.io/chocolate-supply",
        date: new Date('2026-01-28T14:30:00')
    },
    {
        title: "E‑beam Treatment Cleans Pharmaceuticals from Water",
        description: "New study shows electron beams effectively break down antibiotics and painkillers in wastewater, preventing resistance.",
        image: "https://images.unsplash.com/photo-1581091226033-d5c48150dbaa?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80",
        link: "https://techtonic-times.github.io/ebeam-pharma",
        date: new Date('2026-01-26T08:20:00')
    }
];

// ====== UPDATE ALL TIMESTAMPS ======
function updateAllTimestamps() {
    document.querySelectorAll('.timestamp').forEach(el => {
        const timestamp = el.getAttribute('data-timestamp');
        if (timestamp) {
            const newText = formatTimestamp(new Date(parseInt(timestamp)));
            const icon = el.querySelector('i');
            if (icon) {
                el.innerHTML = icon.outerHTML + ' ' + newText;
            } else {
                el.textContent = newText;
            }
        }
    });
}

// ---------- THEME WITH ANIMATION ----------
const themeToggle = document.getElementById('themeToggle');
const body = document.body;
const savedTheme = localStorage.getItem('theme');
const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
const isDark = savedTheme === 'dark' || (!savedTheme && systemPrefersDark);

function applyTheme(dark) {
    if (dark) body.classList.add('dark-mode');
    else body.classList.remove('dark-mode');
    localStorage.setItem('theme', dark ? 'dark' : 'light');
}
applyTheme(isDark);

async function toggleTheme() {
    if (!document.startViewTransition) {
        body.classList.toggle('dark-mode');
        localStorage.setItem('theme', body.classList.contains('dark-mode') ? 'dark' : 'light');
        return;
    }
    await document.startViewTransition(() => {
        body.classList.toggle('dark-mode');
        localStorage.setItem('theme', body.classList.contains('dark-mode') ? 'dark' : 'light');
    }).ready;
    const { top, left, width, height } = themeToggle.getBoundingClientRect();
    const x = left + width / 2;
    const y = top + height / 2;
    const maxRadius = Math.hypot(
        Math.max(left, innerWidth - left),
        Math.max(top, innerHeight - top)
    );
    document.documentElement.animate({
        clipPath: [
            `circle(0px at ${x}px ${y}px)`,
            `circle(${maxRadius}px at ${x}px ${y}px)`
        ]
    }, {
        duration: 1000,
        easing: 'ease-in-out',
        pseudoElement: '::view-transition-new(root)'
    });
}
themeToggle.addEventListener('click', toggleTheme);

// ---------- SCROLL ----------
const backToTopBtn = document.getElementById('backToTop');
function toggleBackToTop() {
    if (!backToTopBtn) return;
    if (window.scrollY > 300) {
        backToTopBtn.classList.add('visible');
    } else {
        backToTopBtn.classList.remove('visible');
    }
}
if (backToTopBtn) {
    backToTopBtn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    });
}

let scrollTimeout;
const scrollIndicator = document.querySelector('.scroll-indicator');
const progressEl = document.getElementById('scrollProgress');
function updateScrollIndicator() {
    const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
    const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    const scrolled = (winScroll / height) * 100;
    if (progressEl) progressEl.style.width = scrolled + '%';
    if (scrollIndicator) {
        scrollIndicator.classList.add('visible');
        clearTimeout(scrollTimeout);
        scrollTimeout = setTimeout(() => {
            scrollIndicator.classList.remove('visible');
        }, 300);
    }
}
let isScrolling = false;
window.addEventListener('scroll', () => {
    if (!isScrolling) {
        window.requestAnimationFrame(() => {
            updateScrollIndicator();
            updateThemeTogglePosition();
            toggleBackToTop();
            isScrolling = false;
        });
        isScrolling = true;
    }
});

function updateThemeTogglePosition() {
    const themeToggle = document.getElementById('themeToggle');
    const menuToggle = document.getElementById('menuToggle');
    if (window.scrollY > 35) {
        if (themeToggle) themeToggle.classList.add('scrolled');
        if (menuToggle) menuToggle.classList.add('scrolled');
    } else {
        if (themeToggle) themeToggle.classList.remove('scrolled');
        if (menuToggle) menuToggle.classList.remove('scrolled');
    }
}
window.addEventListener('load', () => {
    updateScrollIndicator();
    if (scrollIndicator) {
        scrollIndicator.classList.add('visible');
        setTimeout(() => {
            scrollIndicator.classList.remove('visible');
        }, 1000);
    }
});
updateScrollIndicator();

// ---------- SECTION REVEAL ON SCROLL ----------
function checkVisibility() {
    const sections = document.querySelectorAll('.fade-up-section');
    const windowHeight = window.innerHeight;
    sections.forEach(section => {
        const rect = section.getBoundingClientRect();
        const isVisible = rect.top < windowHeight - 100 && rect.bottom > 50;
        if (isVisible) {
            section.classList.add('visible');
        }
    });
}
window.addEventListener('load', checkVisibility);
window.addEventListener('scroll', checkVisibility);
window.addEventListener('resize', checkVisibility);
setTimeout(checkVisibility, 100);

// ---------- MENU FUNCTIONALITY ----------
const menuToggle = document.getElementById('menuToggle');
const menuCard = document.getElementById('menuCard');
const menuClose = document.getElementById('menuClose');
const backdrop = document.getElementById('backdrop');

function openMenu() {
    menuCard.classList.add('open');
    backdrop.classList.add('visible');
    document.body.style.overflow = 'hidden';
    menuToggle.style.opacity = '0';
    menuToggle.style.visibility = 'hidden';
    menuToggle.style.transform = 'scale(0.8)';
}
function closeMenu() {
    menuCard.classList.remove('open');
    backdrop.classList.remove('visible');
    document.body.style.overflow = '';
    menuToggle.style.opacity = '1';
    menuToggle.style.visibility = 'visible';
    menuToggle.style.transform = 'scale(1)';
    const dropdownParent = document.querySelector('.dropdown-parent');
    if (dropdownParent) {
        dropdownParent.classList.remove('active');
    }
}
if (menuToggle) {
    menuToggle.addEventListener('click', (e) => {
        e.stopPropagation();
        if (menuCard.classList.contains('open')) {
            closeMenu();
        } else {
            openMenu();
        }
    });
}
if (menuClose) {
    menuClose.addEventListener('click', closeMenu);
}
if (backdrop) {
    backdrop.addEventListener('click', closeMenu);
}
document.querySelectorAll('.menu-link:not(.dropdown-toggle)').forEach(link => {
    link.addEventListener('click', closeMenu);
});

const dropdownToggle = document.querySelector('.dropdown-toggle');
const dropdownParent = document.querySelector('.dropdown-parent');
if (dropdownToggle) {
    dropdownToggle.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        dropdownParent.classList.toggle('active');
        return false;
    });
}
document.querySelectorAll('.dropdown-item').forEach(item => {
    item.addEventListener('click', function(e) {
        e.stopPropagation();
        if (dropdownParent) {
            dropdownParent.classList.remove('active');
        }
    });
});
document.addEventListener('click', function(e) {
    if (dropdownParent && !dropdownParent.contains(e.target) && dropdownParent.classList.contains('active')) {
        dropdownParent.classList.remove('active');
    }
    if (menuCard && menuToggle && !menuCard.contains(e.target) &&
        !menuToggle.contains(e.target) &&
        e.target !== menuToggle &&
        menuCard.classList.contains('open')) {
        closeMenu();
    }
});

// ---------- NEWSLETTER MODAL ----------
const newsletterForm = document.getElementById('newsletterForm');
const newsletterModal = document.getElementById('newsletterModal');
const newsletterModalClose = document.getElementById('newsletterModalClose');
if (newsletterForm) {
    newsletterForm.addEventListener('submit', function(e) {
        e.preventDefault();
        if (newsletterModal) {
            newsletterModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        this.reset();
        return false;
    });
}
if (newsletterModalClose) {
    newsletterModalClose.addEventListener('click', function() {
        newsletterModal.classList.remove('active');
        document.body.style.overflow = '';
    });
}
if (newsletterModal) {
    newsletterModal.addEventListener('click', function(e) {
        if (e.target === newsletterModal) {
            newsletterModal.classList.remove('active');
            document.body.style.overflow = '';
        }
    });
}

// ---------- TOOLBAR ----------
const toolbar = document.getElementById('toolbar');
let currentActiveIcon = null;

// === FIXED: Reaction state with PAGE_ID ===
let selectedReactionEmoji = localStorage.getItem(`selectedReaction_${PAGE_ID}`) || '❤️';

function updateReactionIcon(emoji) {
    const likeSpan = document.getElementById('likeEmoji');
    if (likeSpan) {
        if (emoji === '👍') likeSpan.innerHTML = '<i class="fa-regular fa-thumbs-up"></i>';
        else if (emoji === '❤️') likeSpan.innerHTML = '<i class="fas fa-heart"></i>';
        else if (emoji === '😮') likeSpan.innerHTML = '<i class="fa-regular fa-face-surprise"></i>';
        else if (emoji === '😢') likeSpan.innerHTML = '<i class="fa-regular fa-face-sad-tear"></i>';
        else if (emoji === '😠') likeSpan.innerHTML = '<i class="fa-regular fa-face-angry"></i>';
    }
    // === FIXED: Save with PAGE_ID ===
    localStorage.setItem(`selectedReaction_${PAGE_ID}`, emoji);
}
updateReactionIcon(selectedReactionEmoji);






// Language support
let currentLang = 'en';
let originalContent = {
    title: '',
    paragraphs: [],
    h2s: [],
    keyTitles: [],
    keyDescs: [],
    highlightTitles: [],
    highlightTexts: []
};

function saveOriginalContent() {
    const titleEl = document.getElementById('articleMainTitle');
    if (titleEl) originalContent.title = titleEl.innerText;
    document.querySelectorAll('#articleContent > p').forEach(p => {
        originalContent.paragraphs.push(p.innerText);
    });
    document.querySelectorAll('#articleContent > h2').forEach(h2 => {
        originalContent.h2s.push(h2.innerText);
    });
    document.querySelectorAll('.keypoint-title').forEach(kt => {
        originalContent.keyTitles.push(kt.innerText);
    });
    document.querySelectorAll('.keypoint-description').forEach(kd => {
        originalContent.keyDescs.push(kd.innerText);
    });
    document.querySelectorAll('.highlight-box').forEach((box, index) => {
        const title = box.querySelector('h4');
        const text = box.querySelector('p');
        if (title) originalContent.highlightTitles.push(title.innerHTML);
        if (text) originalContent.highlightTexts.push(text.innerText);
    });
}

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', saveOriginalContent);
} else {
    saveOriginalContent();
}

const translations = {
    en: {},
    es: {
        title: 'Seis formas en que la ciencia y la tecnología nucleares protegen nuestro planeta',
        p1: 'Mientras líderes mundiales, organizaciones internacionales, científicos, representantes empresariales y activistas climáticos se reúnen en Belém para la COP30, el OIEA muestra cómo la ciencia y la tecnología nucleares impulsan soluciones a los desafíos ambientales.',
        p2: 'En el Pabellón Atoms4Climate del OIEA, los visitantes pueden ver estas innovaciones en acción.',
        p3: 'El tratamiento de aguas residuales contaminadas por contaminantes industriales sigue siendo un desafío importante para muchos países.',
        p4: 'Con el apoyo del OIEA y la Agencia de Innovación de Brasil (FINEP), se está desplegando una unidad móvil equipada con un acelerador de haz de electrones en Brasil.',
        p5: 'A medida que el mundo busca nuevas soluciones para la energía limpia, la investigación sobre energía de fusión está ganando impulso.',
        p6: 'La sesión proporciona una visión general del estado actual de la energía de fusión.',
        p7: 'Basándose en los resultados del primer Balance Global en la COP28, el OIEA apoya a los países.',
        p8: 'La intersección de la ciencia nuclear y la protección ambiental representa una de las fronteras más prometedoras.',
        p9: 'Como se demostró en la COP30, estas tecnologías no son conceptos futuristas sino soluciones prácticas.',
        h2_1: 'Las Seis Aplicaciones Revolucionarias',
        h2_2: 'Soluciones Energéticas del Futuro',
        h2_3: 'Conclusión',
        key_title1: 'Desintoxicación del agua sin químicos',
        key_desc1: 'La tecnología de haz de electrones descompone los contaminantes industriales sin químicos.',
        key_title2: 'Carbono azul y monitoreo climático',
        key_desc2: 'Las técnicas isotópicas del OIEA rastrean el almacenamiento de carbono en manglares.',
        key_title3: 'Insecto estéril y energía de fusión',
        key_desc3: 'La TIE erradica plagas sin pesticidas; la investigación de fusión del ITER acelera la energía limpia.',
        highlight1_title: 'Punto importante',
        highlight1_text: 'Las aplicaciones nucleares se extienden mucho más allá de la producción de energía.',
        highlight2_title: 'Tecnología emergente',
        highlight2_text: 'La aceleración del despliegue de pequeños reactores modulares también está en el centro de atención.'
    },
    hi: {
        title: 'परमाणु विज्ञान और प्रौद्योगिकी हमारे ग्रह की रक्षा के छह तरीके',
        p1: 'जैसे ही वैश्विक नेता, अंतर्राष्ट्रीय संगठन, वैज्ञानिक, व्यापार प्रतिनिधि और जलवायु कार्यकर्ता बेलेम में COP30 के लिए एकत्र होते हैं, IAEA दिखा रहा है कि कैसे परमाणु विज्ञान और प्रौद्योगिकी पर्यावरणीय चुनौतियों का समाधान कर रहे हैं।',
        p2: 'IAEA के Atoms4Climate मंडप में, आगंतुक इन नवाचारों को क्रियाशील देख सकते हैं।',
        p3: 'औद्योगिक प्रदूषकों से दूषित अपशिष्ट जल का उपचार कई देशों के लिए एक बड़ी चुनौती बनी हुई है।',
        p4: 'IAEA और ब्राजील की नवाचार एजेंसी (FINEP) के समर्थन से, इलेक्ट्रॉन बीम त्वरक से सुसज्जित एक मोबाइल इकाई ब्राजील में तैनात की जा रही है।',
        p5: 'जैसे-जैसे दुनिया स्वच्छ ऊर्जा के लिए नए समाधान तलाश रही है, फ्यूजन ऊर्जा अनुसंधान गति पकड़ रहा है।',
        p6: 'सत्र फ्यूजन ऊर्जा की वर्तमान स्थिति का एक सिंहावलोकन प्रदान करता है।',
        p7: 'COP28 में पहले ग्लोबल स्टॉकटेक के परिणामों पर निर्माण करते हुए, IAEA देशों को सहायता करता है।',
        p8: 'परमाणु विज्ञान और पर्यावरण संरक्षण का प्रतिच्छेदन सतत प्रौद्योगिकी में सबसे आशाजनक सीमाओं में से एक का प्रतिनिधित्व करता है।',
        p9: 'जैसा कि COP30 में प्रदर्शित किया गया, ये प्रौद्योगिकियां भविष्यवादी अवधारणाएं नहीं हैं बल्कि व्यावहारिक समाधान हैं।',
        h2_1: 'छह क्रांतिकारी अनुप्रयोग',
        h2_2: 'भविष्य के ऊर्जा समाधान',
        h2_3: 'निष्कर्ष',
        key_title1: 'रसायन मुक्त जल विषहरण',
        key_desc1: 'ई-बीम तकनीक रसायनों के बिना औद्योगिक प्रदूषकों को तोड़ती है।',
        key_title2: 'ब्लू कार्बन और जलवायु निगरानी',
        key_desc2: 'IAEA की समस्थानिक तकनीकें मैंग्रोव में कार्बन भंडारण को ट्रैक करती हैं।',
        key_title3: 'बंध्य कीट और फ्यूजन ऊर्जा',
        key_desc3: 'एसआईटी कीटनाशकों के बिना कीटों को मिटाती है; आईटीईआर फ्यूजन अनुसंधान स्वच्छ बिजली में तेजी लाते हैं।',
        highlight1_title: 'महत्वपूर्ण बिंदु',
        highlight1_text: 'परमाणु अनुप्रयोग ऊर्जा उत्पादन से कहीं आगे तक फैले हुए हैं।',
        highlight2_title: 'उभरती हुई तकनीक',
        highlight2_text: 'छोटे मॉड्यूलर रिएक्टरों की तैनाती में तेजी लाना भी COP में सुर्खियों में है।'
    }
};

function applyLanguage(lang) {
    const t = translations[lang] || translations.en;
    if (lang === 'en') {
        const titleEl = document.getElementById('articleMainTitle');
        if (titleEl && originalContent.title) {
            titleEl.innerText = originalContent.title;
        }
        const paras = document.querySelectorAll('#articleContent > p');
        paras.forEach((p, index) => {
            if (originalContent.paragraphs[index]) {
                p.innerText = originalContent.paragraphs[index];
            }
        });
        const h2Elements = document.querySelectorAll('#articleContent > h2');
        h2Elements.forEach((h2, index) => {
            if (originalContent.h2s[index]) {
                h2.innerText = originalContent.h2s[index];
            }
        });
        const keyTitles = document.querySelectorAll('.keypoint-title');
        const keyDescs = document.querySelectorAll('.keypoint-description');
        keyTitles.forEach((kt, index) => {
            if (originalContent.keyTitles[index]) kt.innerText = originalContent.keyTitles[index];
        });
        keyDescs.forEach((kd, index) => {
            if (originalContent.keyDescs[index]) kd.innerText = originalContent.keyDescs[index];
        });
        const highlightBoxes = document.querySelectorAll('.highlight-box');
        highlightBoxes.forEach((box, boxIndex) => {
            const title = box.querySelector('h4');
            const text = box.querySelector('p');
            if (title && originalContent.highlightTitles[boxIndex]) {
                title.innerHTML = originalContent.highlightTitles[boxIndex];
            }
            if (text && originalContent.highlightTexts[boxIndex]) {
                text.innerText = originalContent.highlightTexts[boxIndex];
            }
        });
        currentLang = lang;
        return;
    }
    const titleEl = document.getElementById('articleMainTitle');
    if (titleEl && t.title) titleEl.innerText = t.title;
    const paras = document.querySelectorAll('#articleContent > p');
    const translations_p = [t.p1, t.p2, t.p3, t.p4, t.p5, t.p6, t.p7, t.p8, t.p9];
    paras.forEach((p, index) => {
        if (translations_p[index]) {
            p.innerText = translations_p[index];
        }
    });
    const h2Elements = document.querySelectorAll('#articleContent > h2');
    const h2Translations = [t.h2_1, t.h2_2, t.h2_3];
    h2Elements.forEach((h2, index) => {
        if (h2Translations[index]) {
            h2.innerText = h2Translations[index];
        }
    });
    const keyTitles = document.querySelectorAll('.keypoint-title');
    const keyDescs = document.querySelectorAll('.keypoint-description');
    const keyTitlesTrans = [t.key_title1, t.key_title2, t.key_title3];
    const keyDescsTrans = [t.key_desc1, t.key_desc2, t.key_desc3];
    keyTitles.forEach((kt, index) => {
        if (keyTitlesTrans[index]) kt.innerText = keyTitlesTrans[index];
    });
    keyDescs.forEach((kd, index) => {
        if (keyDescsTrans[index]) kd.innerText = keyDescsTrans[index];
    });
    const highlightBoxes = document.querySelectorAll('.highlight-box');
    const highlightTitlesTrans = [t.highlight1_title, t.highlight2_title];
    const highlightTextsTrans = [t.highlight1_text, t.highlight2_text];
    highlightBoxes.forEach((box, boxIndex) => {
        const title = box.querySelector('h4');
        const text = box.querySelector('p');
        if (title && highlightTitlesTrans[boxIndex]) {
            const existingSvg = title.querySelector('svg');
            if (existingSvg) {
                title.innerHTML = existingSvg.outerHTML + ' ' + highlightTitlesTrans[boxIndex];
            } else {
                title.innerText = highlightTitlesTrans[boxIndex];
            }
        }
        if (text && highlightTextsTrans[boxIndex]) {
            text.innerText = highlightTextsTrans[boxIndex];
        }
    });
    currentLang = lang;
}
applyLanguage(currentLang);







// ========== TTS IMPLEMENTATION ==========
let ttsChunks = [];
let currentChunkIndex = 0;
let totalChars = 0;
let speechRate = 1.0;
let currentUtterance = null;
let progressInterval = null;
let isPlaying = false;
let ttsInitializing = false;
let availableVoices = [];

if (window.speechSynthesis) {
    window.speechSynthesis.onvoiceschanged = function() {
        availableVoices = window.speechSynthesis.getVoices();
    };
    setTimeout(() => {
        availableVoices = window.speechSynthesis.getVoices();
    }, 100);
}

function getLangCode() {
    const map = { en: 'en-US', es: 'es-ES', hi: 'hi-IN' };
    return map[currentLang] || 'en-US';
}

function stopVisualizerAndProgress() {
    const vis = document.querySelector('.visualizer');
    if (vis) vis.classList.remove('animating');
    clearInterval(progressInterval);
    document.querySelector('.progress-fill').style.width = '0%';
    isPlaying = false;
}

function resetSpeech() {
    if (window.speechSynthesis) window.speechSynthesis.cancel();
    stopVisualizerAndProgress();
    ttsChunks = [];
    currentChunkIndex = 0;
    totalChars = 0;
    document.querySelector('.progress-fill').style.width = '0%';
}

function prepareTTSChunks() {
    const langContent = document.querySelector(`#ttsContent div[data-lang="${currentLang}"] p`);
    if (!langContent) return [];
    let text = langContent.innerText;
    let chunks = [];
    if (text.includes('###')) {
        chunks = text.split('###').map(chunk => chunk.trim()).filter(chunk => chunk.length > 0);
    } else {
        let remaining = text;
        while (remaining.length > 3000) {
            const chunkText = remaining.substring(0, 3000);
            const lastPeriod = Math.max(
                chunkText.lastIndexOf('. '),
                chunkText.lastIndexOf('! '),
                chunkText.lastIndexOf('? ')
            );
            const splitPoint = lastPeriod > 0 ? lastPeriod + 2 : 3000;
            chunks.push(remaining.substring(0, splitPoint));
            remaining = remaining.substring(splitPoint);
        }
        chunks.push(remaining);
    }
    return chunks;
}

function playChunk(chunkIndex, showLoading = true) {
    if (chunkIndex >= ttsChunks.length) {
        resetSpeech();
        const listenBtn = document.getElementById('listenIconBtn');
        if (listenBtn) listenBtn.innerHTML = '<i class="fas fa-play"></i>';
        return;
    }
    const text = ttsChunks[chunkIndex];
    currentUtterance = new SpeechSynthesisUtterance(text);
    currentUtterance.rate = speechRate;
    currentUtterance.lang = getLangCode();
    currentUtterance.pitch = 1;
    currentUtterance.volume = 1;
    const langPrefix = getLangCode().split('-')[0];
    const voices = availableVoices.filter(v => v.lang.startsWith(langPrefix));
    if (voices.length > 0) {
        const googleVoice = voices.find(v => v.name.includes('Google'));
        currentUtterance.voice = googleVoice || voices[0];
    }
    const listenBtn = document.getElementById('listenIconBtn');
    if (showLoading && chunkIndex === 0 && listenBtn) {
        listenBtn.innerHTML = '<span class="spinner"></span>';
        ttsInitializing = true;
    }
    const previousChars = ttsChunks.slice(0, chunkIndex).reduce((sum, chunk) => sum + chunk.length, 0);
    const currentChunkChars = text.length;
    let chunkStartTime = Date.now();
    currentUtterance.onstart = () => {
        isPlaying = true;
        ttsInitializing = false;
        if (listenBtn) listenBtn.innerHTML = '<i class="fas fa-pause"></i>';
        const vis = document.querySelector('.visualizer');
        if (vis) vis.classList.add('animating');
        chunkStartTime = Date.now();
        if (progressInterval) clearInterval(progressInterval);
        progressInterval = setInterval(() => {
            if (!window.speechSynthesis.speaking) {
                clearInterval(progressInterval);
                return;
            }
            const elapsedInChunk = (Date.now() - chunkStartTime) / 1000;
            const wordsPerMinute = 150 * speechRate;
            const charsPerSecond = (wordsPerMinute * 5) / 60;
            const estimatedCharsSpokenInChunk = Math.min(currentChunkChars, elapsedInChunk * charsPerSecond);
            const chunkProgress = estimatedCharsSpokenInChunk / currentChunkChars;
            const totalSpokenChars = previousChars + (currentChunkChars * chunkProgress);
            let percent = (totalSpokenChars / totalChars) * 100;
            percent = Math.min(percent, 100);
            document.querySelector('.progress-fill').style.width = percent + '%';
        }, 100);
    };
    currentUtterance.onend = () => {
        playChunk(chunkIndex + 1, false);
    };
    currentUtterance.onerror = (event) => {
        console.error('TTS Error:', event);
        if (chunkIndex === 0) {
            stopVisualizerAndProgress();
            ttsInitializing = false;
            if (listenBtn) listenBtn.innerHTML = '<i class="fas fa-play"></i>';
        }
    };
    window.speechSynthesis.speak(currentUtterance);
}

function startSpeech(showLoading = true) {
    if (!window.speechSynthesis) { alert('TTS not supported'); return; }
    window.speechSynthesis.cancel();
    stopVisualizerAndProgress();
    ttsChunks = prepareTTSChunks();
    if (ttsChunks.length === 0) return;
    currentChunkIndex = 0;
    totalChars = ttsChunks.reduce((sum, chunk) => sum + chunk.length, 0);
    playChunk(0, showLoading);
}

function toggleListen() {
    if (!window.speechSynthesis) return;
    if (window.speechSynthesis.speaking) {
        window.speechSynthesis.cancel();
        stopVisualizerAndProgress();
        ttsChunks = [];
        const listenBtn = document.getElementById('listenIconBtn');
        if (listenBtn) listenBtn.innerHTML = '<i class="fas fa-play"></i>';
        isPlaying = false;
    } else {
        startSpeech(true);
    }
}

function setSpeed(rate) {
    speechRate = rate;
    document.querySelectorAll('.speed-btn').forEach(btn => {
        btn.classList.remove('active');
        if (parseFloat(btn.dataset.rate) === rate) btn.classList.add('active');
    });
    if (window.speechSynthesis.speaking) {
        const currentIndex = currentChunkIndex;
        window.speechSynthesis.cancel();
        stopVisualizerAndProgress();
        setTimeout(() => { playChunk(currentIndex, false); }, 50);
    }
}

function getSettingsPanel(iconType) {
    const panel = document.createElement('div'); panel.className = 'settings-panel';
    if (iconType === 'lang') {
        panel.innerHTML = `<div class="settings-item"><i class="fas fa-language"></i><span>Language:</span><select id="langSelect"><option value="en">English(Original)</option><option value="es">Español</option><option value="hi">हिन्दी</option></select></div>`;
    } else if (iconType === 'text') {
        panel.innerHTML = `<div class="settings-item"><i class="fas fa-text-height"></i><span>Size:</span><div class="text-size-slider"><input type="range" id="textSizeSlider" min="12" max="24" value="16" step="1"><span id="pxValue">16px</span></div></div>`;
    } else if (iconType === 'like') {
        panel.innerHTML = `<div class="settings-item"><span>React:</span><div class="reaction-grid"><button class="reaction-icon" data-emoji="👍"><i class="fa-regular fa-thumbs-up fa-2x"></i></button><button class="reaction-icon" data-emoji="❤️"><i class="fas fa-heart fa-2x"></i></button><button class="reaction-icon" data-emoji="😮"><i class="fa-regular fa-face-surprise fa-2x"></i></button><button class="reaction-icon" data-emoji="😢"><i class="fa-regular fa-face-sad-tear fa-2x"></i></button><button class="reaction-icon" data-emoji="😠"><i class="fa-regular fa-face-angry fa-2x"></i></button></div></div>`;
    } else if (iconType === 'share') {
        panel.innerHTML = `<div class="share-grid"><button class="social-icon" data-platform="facebook"><i class="fab fa-facebook-f"></i></button><button class="social-icon" data-platform="x"><svg class="x-logo-svg" viewBox="0 0 24 24" width="18" height="18" fill="white"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></button><button class="social-icon" data-platform="telegram"><i class="fab fa-telegram-plane"></i></button><button class="social-icon" data-platform="reddit"><i class="fab fa-reddit-alien"></i></button><button class="social-icon" data-platform="email"><i class="fas fa-envelope"></i></button><button class="copy-btn" id="copyLinkBtn"><i class="fas fa-copy"></i></button></div>`;
    } else if (iconType === 'listen') {
        panel.innerHTML = `<div class="listen-controls"><div class="listen-controls-left"><div class="visualizer"><span></span><span></span><span></span><span></span><span></span></div><div class="speed-buttons"><button class="speed-btn" data-rate="0.5">0.5</button><button class="speed-btn active" data-rate="1">1</button><button class="speed-btn" data-rate="1.5">1.5</button><button class="speed-btn" data-rate="2">2</button></div></div><div class="listen-controls-right"><div class="progress-container"><div class="progress-bar"><div class="progress-fill" style="width:0%"></div></div></div><button class="listen-icon-btn" id="listenIconBtn"><i class="fas fa-play"></i></button></div></div>`;
    }
    return panel;
}

function expandToolbar(iconType) {
    currentActiveIcon = iconType;
    document.querySelectorAll('.toolbar-icon').forEach(icon => icon.classList.add('hidden-icon'));
    toolbar.classList.remove('toolbar-collapsed'); toolbar.classList.add('toolbar-expanded');
    toolbar.innerHTML = '';
    const settingsPanel = getSettingsPanel(iconType);
    const crossBtn = document.createElement('button'); crossBtn.className = 'cross-button'; crossBtn.innerHTML = '<i class="fas fa-times"></i>';
    crossBtn.addEventListener('click', () => {
        if (iconType === 'listen') {
            speechRate = 1.0;
            resetSpeech();
        }
        collapseToolbar();
    });
    toolbar.appendChild(settingsPanel); toolbar.appendChild(crossBtn);
    attachSettingsFunctionality(iconType);
}

function collapseToolbar() {
    currentActiveIcon = null;
    toolbar.classList.remove('toolbar-expanded'); toolbar.classList.add('toolbar-collapsed');
    toolbar.innerHTML = `<div id="iconGroup" class="toolbar-icons"><button id="iconLang" class="toolbar-icon" title="Language"><i class="fas fa-language"></i></button><button id="iconTextSize" class="toolbar-icon" title="Text size"><i class="fas fa-text-height"></i></button><button id="iconLike" class="toolbar-icon" title="React"><span id="likeEmoji">${document.getElementById('likeEmoji')?.innerHTML || '<i class="fas fa-heart"></i>'}</span></button><button id="iconShare" class="toolbar-icon" title="Share"><i class="fa-solid fa-share"></i></button><button id="iconListen" class="toolbar-icon" title="Listen"><i class="fas fa-headphones-alt"></i></button></div>`;
    attachIconListeners();
    updateReactionIcon(selectedReactionEmoji);
}

function attachSettingsFunctionality(iconType) {
    if (iconType === 'lang') {
        const select = document.getElementById('langSelect');
        if (select) {
            select.value = currentLang;
            select.addEventListener('change', e => {
                applyLanguage(e.target.value);
                if (window.speechSynthesis) {
                    window.speechSynthesis.cancel();
                    resetSpeech();
                }
            });
        }
    } else if (iconType === 'text') {
        const slider = document.getElementById('textSizeSlider');
        if (slider) { slider.value = currentFontSize; setTextSize(currentFontSize); slider.addEventListener('input', e => { currentFontSize = e.target.value; setTextSize(currentFontSize); }); }
    } else if (iconType === 'like') {
        document.querySelectorAll('.reaction-icon').forEach(btn => {
            btn.addEventListener('click', e => { selectedReactionEmoji = e.currentTarget.dataset.emoji; updateReactionIcon(selectedReactionEmoji); setTimeout(collapseToolbar, 150); });
        });
    } else if (iconType === 'share') {
        document.querySelectorAll('.social-icon').forEach(btn => btn.addEventListener('click', e => { shareAction(e.currentTarget.dataset.platform); }));
        document.getElementById('copyLinkBtn')?.addEventListener('click', copyLink);
    } else if (iconType === 'listen') {
        document.querySelectorAll('.speed-btn').forEach(btn => btn.addEventListener('click', e => setSpeed(parseFloat(e.target.dataset.rate))));
        document.getElementById('listenIconBtn')?.addEventListener('click', toggleListen);
        document.querySelectorAll('.speed-btn').forEach(btn => { if (parseFloat(btn.dataset.rate) === speechRate) btn.classList.add('active'); else btn.classList.remove('active'); });
    }
}

function attachIconListeners() {
    document.getElementById('iconLang')?.addEventListener('click', () => expandToolbar('lang'));
    document.getElementById('iconTextSize')?.addEventListener('click', () => expandToolbar('text'));
    document.getElementById('iconLike')?.addEventListener('click', () => expandToolbar('like'));
    document.getElementById('iconShare')?.addEventListener('click', () => expandToolbar('share'));
    document.getElementById('iconListen')?.addEventListener('click', () => expandToolbar('listen'));
}
attachIconListeners();

let currentFontSize = 16;
function setTextSize(px) {
    const content = document.getElementById('articleContent');
    content.style.fontSize = px + 'px';
    document.querySelectorAll('.article-single-content p').forEach(p => p.style.fontSize = px + 'px');
    const label = document.getElementById('pxValue');
    if (label) label.innerText = px + 'px';
}

function shareAction(platform) {
    const url = encodeURIComponent(window.location.href);
    const title = encodeURIComponent('Tiny Cleaner Wrasse Intelligence Redefines Animal Self Awareness Research');
    let shareUrl = '';
    if (platform === 'facebook') shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
    else if (platform === 'instagram') { window.open('https://www.instagram.com/', '_blank'); return; }
    else if (platform === 'x') shareUrl = `https://twitter.com/intent/tweet?text=${title}&url=${url}`;
    else if (platform === 'linkedin') shareUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${url}`;
    else if (platform === 'reddit') shareUrl = `https://www.reddit.com/submit?url=${url}&title=${title}`;
    else if (platform === 'whatsapp') shareUrl = `https://wa.me/?text=${title}%20${url}`;
    else if (platform === 'telegram') shareUrl = `https://t.me/share/url?url=${url}&text=${title}`;
    else if (platform === 'pinterest') shareUrl = `https://pinterest.com/pin/create/button/?url=${url}&description=${title}`;
    else if (platform === 'email') shareUrl = `mailto:?subject=${title}&body=${url}`;
    else if (platform === 'hackernews') shareUrl = `https://news.ycombinator.com/submitlink?u=${url}&t=${title}`;
    if (shareUrl) window.open(shareUrl, '_blank');
}

function copyLink() {
    navigator.clipboard.writeText(window.location.href);
    const copyBtn1 = document.getElementById('copyLinkBtn');
    const copyBtn2 = document.getElementById('copyLinkBtn2');
    if (copyBtn1) { copyBtn1.innerHTML = '<i class="fas fa-check"></i>'; setTimeout(() => { copyBtn1.innerHTML = '<i class="fas fa-copy"></i>'; }, 2000); }
    if (copyBtn2) { copyBtn2.innerHTML = '<i class="fas fa-check"></i>'; setTimeout(() => { copyBtn2.innerHTML = '<i class="fas fa-copy"></i>'; }, 2000); }
}

// ---------- POST-ARTICLE FUNCTIONALITY ----------
document.querySelectorAll('.share-section .share-icon-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
        const platform = e.currentTarget.dataset.platform;
        if (platform) shareAction(platform);
    });
});
document.getElementById('copyLinkBtn2')?.addEventListener('click', copyLink);

// === FIXED: Mini Quiz with localStorage using PAGE_ID ===
const quiz1Radios = document.querySelectorAll('input[name="quiz1"]');
const quiz2Radios = document.querySelectorAll('input[name="quiz2"]');
const quiz1Feedback = document.getElementById('quiz1Feedback');
const quiz2Feedback = document.getElementById('quiz2Feedback');

// === FIXED: Load saved quiz answers with PAGE_ID ===
const savedQuiz1 = localStorage.getItem(`quiz1_${PAGE_ID}`);
const savedQuiz2 = localStorage.getItem(`quiz2_${PAGE_ID}`);

// === QUIZ 1 - Load saved answer (CLICKABLE - no lock) ===
if (savedQuiz1) {
    quiz1Radios.forEach(radio => {
        if (radio.value === savedQuiz1) {
            radio.checked = true;
        }
        // REMOVED: radio.disabled = true (so users can change answer)
    });
    // Show feedback based on saved value
    if (savedQuiz1 === 'correct') {
        quiz1Feedback.innerHTML = '✓ You are Correct!';
        quiz1Feedback.className = 'quiz-feedback correct';
    } else {
        quiz1Feedback.innerHTML = '✗ Wrong answer. Keep reading and try again.';
        quiz1Feedback.className = 'quiz-feedback incorrect';
    }
}

// === QUIZ 2 - Load saved answer (NO CHANGES - opinion based) ===
if (savedQuiz2) {
    quiz2Radios.forEach(radio => {
        if (radio.value === savedQuiz2) {
            radio.checked = true;
            quiz2Feedback.textContent = '✓ Thanks for sharing your perspective!';
            quiz2Feedback.className = 'quiz-feedback correct';
        }
    });
}

// === QUIZ 1 - Event listener (CLICKABLE - no lock) ===
quiz1Radios.forEach(radio => {
    radio.addEventListener('change', (e) => {
        const value = e.target.value;
        // Save answer with PAGE_ID
        localStorage.setItem(`quiz1_${PAGE_ID}`, value);
        
        // REMOVED: Disable code - radios stay clickable
        
        if (value === 'correct') {
            quiz1Feedback.innerHTML = '✓ You are Correct!';
            quiz1Feedback.className = 'quiz-feedback correct';
        } else {
            quiz1Feedback.innerHTML = '✗ Wrong answer. Keep reading and try again.';
            quiz1Feedback.className = 'quiz-feedback incorrect';
        }
    });
});

// === QUIZ 2 - Event listener (NO CHANGES - opinion based) ===
quiz2Radios.forEach(radio => {
    radio.addEventListener('change', (e) => {
        const value = e.target.value;
        // === FIXED: Save with PAGE_ID ===
        localStorage.setItem(`quiz2_${PAGE_ID}`, value);
        quiz2Feedback.textContent = '✓ Thanks for sharing your perspective!';
        quiz2Feedback.className = 'quiz-feedback correct';
    });
});
// FAQ Accordion
const faqItems = document.querySelectorAll('.faq-item');
faqItems.forEach(item => {
    const question = item.querySelector('.faq-question');
    question.addEventListener('click', () => {
        const isActive = question.classList.contains('active');
        faqItems.forEach(i => {
            i.querySelector('.faq-question').classList.remove('active');
            i.querySelector('.faq-answer').classList.remove('show');
        });
        if (!isActive) {
            question.classList.add('active');
            item.querySelector('.faq-answer').classList.add('show');
        }
    });
});

// Render You May Like
function renderYouMayLike() {
    const container = document.getElementById('youMayLikeContainer');
    if (!container) return;
    container.innerHTML = '';
    youMayLikeArticles.forEach(article => {
        const card = document.createElement('div');
        card.className = 'list-card';
        card.innerHTML = `
            <img src="${article.image}" alt="${article.title}" class="list-card-image" loading="lazy" onload="this.classList.add('loaded')">
            <div class="list-card-content">
                <div class="list-card-title">${article.title}</div>
                <div class="list-card-description">${article.description}</div>
                <div class="list-card-footer">
                    <span class="timestamp" data-timestamp="${article.date.getTime()}"><i class="fa-solid fa-earth-americas"></i> ${formatTimestamp(article.date)}</span>
                    <a href="${article.link}" class="read-btn" target="_blank" rel="noopener noreferrer">Read Now</a>
                </div>
            </div>
        `;
        container.appendChild(card);
    });
}

function renderRelated() {
    const container = document.getElementById('relatedArticlesContainer');
    if (!container) return;
    container.innerHTML = '';
    relatedArticles.forEach(article => {
        const card = document.createElement('div');
        card.className = 'list-card';
        card.innerHTML = `
            <img src="${article.image}" alt="${article.title}" class="list-card-image" loading="lazy" onload="this.classList.add('loaded')">
            <div class="list-card-content">
                <div class="list-card-title">${article.title}</div>
                <div class="list-card-description">${article.description}</div>
                <div class="list-card-footer">
                    <span class="timestamp" data-timestamp="${article.date.getTime()}"><i class="fa-solid fa-earth-americas"></i> ${formatTimestamp(article.date)}</span>
                    <a href="${article.link}" class="read-btn" target="_blank" rel="noopener noreferrer">Read Now</a>
                </div>
            </div>
        `;
        container.appendChild(card);
    });
}

function renderPopular() {
    const container = document.getElementById('popularContainer');
    if (!container) return;
    container.innerHTML = '';
    popularArticles.forEach(article => {
        const card = document.createElement('div');
        card.className = 'list-card';
        card.innerHTML = `
            <img src="${article.image}" alt="${article.title}" class="list-card-image" loading="lazy" onload="this.classList.add('loaded')">
            <div class="list-card-content">
                <div class="list-card-title">${article.title}</div>
                <div class="list-card-description">${article.description}</div>
                <div class="list-card-footer">
                    <span class="timestamp" data-timestamp="${article.date.getTime()}"><i class="fa-solid fa-earth-americas"></i> ${formatTimestamp(article.date)}</span>
                    <a href="${article.link}" class="read-btn" target="_blank" rel="noopener noreferrer">Read Now</a>
                </div>
            </div>
        `;
        container.appendChild(card);
    });
}

renderYouMayLike();
renderRelated();
renderPopular();

// === FIXED: COMMENTS with Dynamic PAGE_ID Keys ===
const commentName = document.getElementById('commentName');
const commentText = document.getElementById('commentText');
const submitComment = document.getElementById('submitComment');
const commentsList = document.getElementById('commentsList');
const viewAllBtn = document.getElementById('viewAllComments');
const deleteAllBtn = document.getElementById('deleteAllComments');
let showingAll = false;
let commentUpdateInterval;

function loadComments() {
    // === FIXED: Load comments with PAGE_ID ===
    const comments = JSON.parse(localStorage.getItem(`comments_${PAGE_ID}`) || '[]');
    comments.sort((a, b) => b.timestamp - a.timestamp);
    commentsList.innerHTML = '';
    if (comments.length === 0) {
        commentsList.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 2rem;">No comments yet by you. Share your thoughts right now✍️</p>';
        viewAllBtn.classList.add('hidden');
        deleteAllBtn.classList.add('hidden');
        return;
    }
    if (comments.length >= 2) {
        deleteAllBtn.classList.remove('hidden');
    } else {
        deleteAllBtn.classList.add('hidden');
    }
    const displayCount = showingAll ? comments.length : Math.min(6, comments.length);
    const displayComments = comments.slice(0, displayCount);
    displayComments.forEach((comment, index) => {
        const commentEl = document.createElement('div');
        commentEl.className = 'comment-item';
        commentEl.dataset.timestamp = comment.timestamp;
        const commentDate = new Date(parseInt(comment.timestamp));
        commentEl.innerHTML = `
            <div class="comment-header">
                <span class="comment-name">${escapeHtml(comment.name)}</span>
                <span class="comment-date">${formatTimestamp(commentDate)}</span>
            </div>
            <div class="comment-text">${escapeHtml(comment.text)}</div>
            <button class="comment-delete" data-index="${comments.findIndex(c => c.timestamp === comment.timestamp)}">
                <i class="fas fa-trash"></i>
            </button>
        `;
        commentsList.appendChild(commentEl);
    });
    if (comments.length > 5) {
        viewAllBtn.classList.remove('hidden');
        viewAllBtn.innerHTML = showingAll ? 'Show Less <i class="fas fa-chevron-up"></i>' : 'View All Comments <i class="fas fa-chevron-down"></i>';
    } else {
        viewAllBtn.classList.add('hidden');
    }
    document.querySelectorAll('.comment-delete').forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.stopPropagation();
            const index = e.currentTarget.dataset.index;
            // === FIXED: Load and save with PAGE_ID ===
            const comments = JSON.parse(localStorage.getItem(`comments_${PAGE_ID}`) || '[]');
            comments.splice(index, 1);
            localStorage.setItem(`comments_${PAGE_ID}`, JSON.stringify(comments));
            loadComments();
        });
    });
}

function escapeHtml(unsafe) {
    return unsafe
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
}

submitComment.addEventListener('click', () => {
    const name = commentName.value.trim();
    const text = commentText.value.trim();
    if (!name || !text) {
        alert('Please enter both name and comment');
        return;
    }
    // === FIXED: Load and save with PAGE_ID ===
    const comments = JSON.parse(localStorage.getItem(`comments_${PAGE_ID}`) || '[]');
    comments.push({
        name: name,
        text: text,
        timestamp: Date.now()
    });
    localStorage.setItem(`comments_${PAGE_ID}`, JSON.stringify(comments));
    commentName.value = '';
    commentText.value = '';
    showingAll = false;
    loadComments();
});

viewAllBtn.addEventListener('click', () => {
    showingAll = !showingAll;
    loadComments();
});

deleteAllBtn.addEventListener('click', () => {
    if (confirm('Are you sure you want to delete all comments?')) {
        // === FIXED: Remove with PAGE_ID ===
        localStorage.removeItem(`comments_${PAGE_ID}`);
        showingAll = false;
        loadComments();
    }
});

loadComments();

// ====== INITIAL TIMESTAMP UPDATE AND INTERVAL ======
updateAllTimestamps();
commentUpdateInterval = setInterval(updateAllTimestamps, 60000);
window.addEventListener('beforeunload', () => {
    if (commentUpdateInterval) clearInterval(commentUpdateInterval);
});

// Fix for X icon color
document.querySelectorAll('.share-icon-btn[data-platform="x"] svg').forEach(svg => {
    svg.style.fill = 'currentColor';
});

// ====== LAZY LOADING FOR IMAGES ======
function fixImageBlurriness() {
    document.querySelectorAll('img:not([loading])').forEach(img => {
        img.setAttribute('loading', 'lazy');
    });
    document.querySelectorAll('img[loading="lazy"]').forEach(img => {
        img.classList.remove('loaded');
        const markAsLoaded = () => {
            img.classList.add('loaded');
        };
        if (img.complete && img.naturalHeight !== 0) {
            markAsLoaded();
        } else {
            img.addEventListener('load', markAsLoaded);
            img.addEventListener('error', markAsLoaded);
        }
    });
}
fixImageBlurriness();
setTimeout(fixImageBlurriness, 100);
setTimeout(fixImageBlurriness, 500);
document.addEventListener('DOMContentLoaded', fixImageBlurriness);
window.addEventListener('load', function() {
    fixImageBlurriness();
    setTimeout(fixImageBlurriness, 200);
});

// Dynamic Internal Link
const internalLinks = [
    { title: "Why the February 2026 Planet Parade Won't Look Like You Expect", url: "https://techtonic-times.github.io/science/see-six-planets-align-2026-feb-28.html" },
    { title: "Nuclear Techniques Unlock Ocean's Carbon Storage Secrets", url: "https://techtonic-times.github.io/ocean-carbon" },
    { title: "From Nuclear Waste to Clean Fuel: New Recycling Method", url: "https://techtonic-times.github.io/waste-recycle" },
    { title: "Fusion Ignition Achieved: What It Means for Clean Power", url: "https://techtonic-times.github.io/fusion-ignition" },
    { title: "How Nuclear Science Is Saving the World's Chocolate Supply", url: "https://techtonic-times.github.io/chocolate-supply" }
];

function renderDynamicLink() {
    const container = document.getElementById('dynamic-link-container');
    if (!container) {
        console.log('Dynamic link container not found');
        return;
    }
    const randomIndex = Math.floor(Math.random() * internalLinks.length);
    const link = internalLinks[randomIndex];
    container.innerHTML = `
        <div class="dynamic-link-box">
            <a href="${link.url}" class="dynamic-link-text">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
                </svg>
                <span class="link-text-span">${link.title}</span>
            </a>
        </div>
    `;
    console.log('Dynamic link rendered:', link.title);
}

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', renderDynamicLink);
} else {
    renderDynamicLink();
}
</script>
</body>
</html>
